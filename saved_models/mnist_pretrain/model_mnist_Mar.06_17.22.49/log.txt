current path: saved_models/mnist_pretrain/model_mnist_Mar.06_17.22.49
Loading data
build_classes_dict done
train loaders done
get poison test loader
load data done
create model done
Poisoned following participants: [1, 2, 3, 4, 5, 6.0, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33]
We use following environment for graphs:  mnist_DBA
Server Epoch:1 choose agents : [23, 72, 61, 11, 71, 42, 45, 37, 21, 35].
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch   1, local model 23, internal_epoch   1,  Average loss: 0.0423, Accuracy: 172/428 (40.1869%), train_poison_data_count: 428
Global model norm: 13.898006576196178.
Norm before scaling: 13.893457181919132. Distance: 0.5609304996149295
Total norm for 3 adversaries is: 13.893457181919132. distance: 0.5609304996149295
___Test Local_Simple poisoned: True, epoch: 1: Average loss: 2.6116, Accuracy: 990/8991 (11.0110%)
___Train Local_Simple,  epoch   1, local model 72, internal_epoch   1,  Average loss: 0.2306, Accuracy: 0/10 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 2.3016, Accuracy: 1330/10000 (13.3000%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch   1, local model 61, internal_epoch   1,  Average loss: 0.0323, Accuracy: 471/767 (61.4081%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 4.0732, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:6/10000(0.060)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch   1, local model 11, internal_epoch   1,  Average loss: 0.0531, Accuracy: 45/84 (53.5714%), train_poison_data_count: 84
Global model norm: 13.898006576196178.
Norm before scaling: 13.896426041910246. Distance: 0.042507839702582775
Total norm for 3 adversaries is: 13.896426041910246. distance: 0.042507839702582775
___Test Local_Simple poisoned: True, epoch: 1: Average loss: 2.2987, Accuracy: 1042/8991 (11.5894%)
___Train Local_Simple,  epoch   1, local model 71, internal_epoch   1,  Average loss: 0.0456, Accuracy: 97/342 (28.3626%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 2.3393, Accuracy: 892/10000 (8.9200%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch   1, local model 42, internal_epoch   1,  Average loss: 0.0701, Accuracy: 59/63 (93.6508%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 2.3033, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch   1, local model 45, internal_epoch   1,  Average loss: 0.0426, Accuracy: 180/388 (46.3918%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 2.5395, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch   1, local model 37, internal_epoch   1,  Average loss: 0.0412, Accuracy: 215/578 (37.1972%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 3.2383, Accuracy: 980/10000 (9.8000%), Attack Success Rate:4/10000(0.040)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch   1, local model 21, internal_epoch   1,  Average loss: 0.0204, Accuracy: 1423/2072 (68.6776%), train_poison_data_count: 2072
Global model norm: 13.898006576196178.
Norm before scaling: 13.82527226047183. Distance: 1.7689793549233812
Total norm for 3 adversaries is: 13.82527226047183. distance: 1.7689793549233812
___Test Local_Simple poisoned: True, epoch: 1: Average loss: 6.8199, Accuracy: 1955/8991 (21.7440%)
___Train Local_Simple,  epoch   1, local model 35, internal_epoch   1,  Average loss: 0.0245, Accuracy: 795/978 (81.2883%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 5.0616, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:14/10000(0.140)
time spent on training: 28.93674635887146
[foolsgold agg] training data poison_ratio: 0.45253940455341507  data num: [428, 10, 767, 84, 342, 63, 388, 578, 2072, 978]
[foolsgold agg] considering poison per batch poison_fraction: 0.45253940455341507
[foolsgold agg] wv: [0.41339979 0.         0.41339979 0.         0.13452366 0.
 0.         1.         1.         0.13452366]
___Test Target_Simple poisoned: False, epoch: 1: Average loss: 2.3002, Accuracy: 1119/10000 (11.1900%), Attack Success Rate:10/10000(0.100)
___Test Target_Simple poisoned: True, epoch: 1: Average loss: 2.2966, Accuracy: 1104/8991 (12.2789%)
Done in 93.99306464195251 sec.
Server Epoch:2 choose agents : [11, 59, 62, 28, 65, 22, 78, 58, 41, 81].
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch   2, local model 11, internal_epoch   1,  Average loss: 0.0532, Accuracy: 45/84 (53.5714%), train_poison_data_count: 84
Global model norm: 13.898518193800317.
Norm before scaling: 13.896937168703701. Distance: 0.04571481253681488
Total norm for 3 adversaries is: 13.896937168703701. distance: 0.04571481253681488
___Test Local_Simple poisoned: True, epoch: 2: Average loss: 2.2942, Accuracy: 1064/8991 (11.8341%)
___Train Local_Simple,  epoch   2, local model 59, internal_epoch   1,  Average loss: 0.0828, Accuracy: 21/27 (77.7778%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 2.3002, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch   2, local model 62, internal_epoch   1,  Average loss: 1.1566, Accuracy: 0/2 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 2.3003, Accuracy: 1099/10000 (10.9900%), Attack Success Rate:13/10000(0.130)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch   2, local model 28, internal_epoch   1,  Average loss: 0.0451, Accuracy: 141/237 (59.4937%), train_poison_data_count: 237
Global model norm: 13.898518193800317.
Norm before scaling: 13.89395414091762. Distance: 0.23953238322119952
Total norm for 3 adversaries is: 13.89395414091762. distance: 0.23953238322119952
___Test Local_Simple poisoned: True, epoch: 2: Average loss: 2.3077, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch   2, local model 65, internal_epoch   1,  Average loss: 0.0231, Accuracy: 1022/1326 (77.0739%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 5.5552, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:4/10000(0.040)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch   2, local model 22, internal_epoch   1,  Average loss: 0.0686, Accuracy: 0/34 (0.0000%), train_poison_data_count: 34
Global model norm: 13.898518193800317.
Norm before scaling: 13.897797971338784. Distance: 0.016279056885694643
Total norm for 3 adversaries is: 13.897797971338784. distance: 0.016279056885694643
___Test Local_Simple poisoned: True, epoch: 2: Average loss: 2.2957, Accuracy: 1081/8991 (12.0231%)
___Train Local_Simple,  epoch   2, local model 78, internal_epoch   1,  Average loss: 0.0239, Accuracy: 1500/2324 (64.5439%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 3.9726, Accuracy: 3363/10000 (33.6300%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch   2, local model 58, internal_epoch   1,  Average loss: 0.0362, Accuracy: 380/1015 (37.4384%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 3.7609, Accuracy: 986/10000 (9.8600%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch   2, local model 41, internal_epoch   1,  Average loss: 0.0392, Accuracy: 290/509 (56.9745%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 4.7997, Accuracy: 974/10000 (9.7400%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch   2, local model 81, internal_epoch   1,  Average loss: 0.0669, Accuracy: 7/68 (10.2941%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 2.3004, Accuracy: 965/10000 (9.6500%), Attack Success Rate:12/10000(0.120)
time spent on training: 29.51425838470459
[foolsgold agg] training data poison_ratio: 0.06309989335229292  data num: [84, 27, 2, 237, 1326, 34, 2324, 1015, 509, 68]
[foolsgold agg] considering poison per batch poison_fraction: 0.06309989335229292
[foolsgold agg] wv: [0. 0. 1. 0. 0. 1. 1. 0. 0. 1.]
___Test Target_Simple poisoned: False, epoch: 2: Average loss: 2.2985, Accuracy: 1325/10000 (13.2500%), Attack Success Rate:20/10000(0.200)
___Test Target_Simple poisoned: True, epoch: 2: Average loss: 2.2942, Accuracy: 1309/8991 (14.5590%)
Done in 92.68596148490906 sec.
Server Epoch:3 choose agents : [54, 55, 61, 73, 18, 42, 87, 41, 50, 28].
___Train Local_Simple,  epoch   3, local model 54, internal_epoch   1,  Average loss: 0.0508, Accuracy: 0/91 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.2980, Accuracy: 1629/10000 (16.2900%), Attack Success Rate:23/10000(0.230)
___Train Local_Simple,  epoch   3, local model 55, internal_epoch   1,  Average loss: 0.0282, Accuracy: 1329/2803 (47.4135%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 4.6202, Accuracy: 3910/10000 (39.1000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch   3, local model 61, internal_epoch   1,  Average loss: 0.0321, Accuracy: 496/767 (64.6675%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 3.6017, Accuracy: 1714/10000 (17.1400%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch   3, local model 73, internal_epoch   1,  Average loss: 0.0213, Accuracy: 946/1205 (78.5062%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 4.6304, Accuracy: 958/10000 (9.5800%), Attack Success Rate:3/10000(0.030)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch   3, local model 18, internal_epoch   1,  Average loss: 0.0491, Accuracy: 114/264 (43.1818%), train_poison_data_count: 264
Global model norm: 13.898764663799712.
Norm before scaling: 13.893558222536365. Distance: 0.3182144654349015
Total norm for 2 adversaries is: 13.893558222536365. distance: 0.3182144654349015
___Test Local_Simple poisoned: True, epoch: 3: Average loss: 2.3551, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch   3, local model 42, internal_epoch   1,  Average loss: 0.0703, Accuracy: 55/63 (87.3016%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.3003, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch   3, local model 87, internal_epoch   1,  Average loss: 0.0694, Accuracy: 4/33 (12.1212%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.2983, Accuracy: 1538/10000 (15.3800%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch   3, local model 41, internal_epoch   1,  Average loss: 0.0388, Accuracy: 291/509 (57.1709%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 4.9904, Accuracy: 974/10000 (9.7400%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch   3, local model 50, internal_epoch   1,  Average loss: 0.0558, Accuracy: 112/151 (74.1722%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.3186, Accuracy: 980/10000 (9.8000%), Attack Success Rate:5/10000(0.050)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch   3, local model 28, internal_epoch   1,  Average loss: 0.0452, Accuracy: 145/237 (61.1814%), train_poison_data_count: 237
Global model norm: 13.898764663799712.
Norm before scaling: 13.894312160031191. Distance: 0.2468456181413115
Total norm for 2 adversaries is: 13.894312160031191. distance: 0.2468456181413115
___Test Local_Simple poisoned: True, epoch: 3: Average loss: 2.3075, Accuracy: 1032/8991 (11.4781%)
time spent on training: 28.002272129058838
[foolsgold agg] training data poison_ratio: 0.08182263596276335  data num: [91, 2803, 767, 1205, 264, 63, 33, 509, 151, 237]
[foolsgold agg] considering poison per batch poison_fraction: 0.08182263596276335
[foolsgold agg] wv: [0.         1.         0.59922632 0.         0.61335681 1.
 1.         1.         0.59922632 1.        ]
___Test Target_Simple poisoned: False, epoch: 3: Average loss: 2.2946, Accuracy: 1608/10000 (16.0800%), Attack Success Rate:29/10000(0.290)
___Test Target_Simple poisoned: True, epoch: 3: Average loss: 2.2872, Accuracy: 1577/8991 (17.5398%)
Done in 91.39409279823303 sec.
Server Epoch:4 choose agents : [37, 92, 95, 76, 13, 99, 94, 74, 45, 44].
___Train Local_Simple,  epoch   4, local model 37, internal_epoch   1,  Average loss: 0.0382, Accuracy: 258/578 (44.6367%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 4.0242, Accuracy: 980/10000 (9.8000%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch   4, local model 92, internal_epoch   1,  Average loss: 0.0507, Accuracy: 103/202 (50.9901%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 2.4054, Accuracy: 958/10000 (9.5800%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch   4, local model 95, internal_epoch   1,  Average loss: 0.0777, Accuracy: 8/29 (27.5862%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 2.2939, Accuracy: 1813/10000 (18.1300%), Attack Success Rate:33/10000(0.330)
___Train Local_Simple,  epoch   4, local model 76, internal_epoch   1,  Average loss: 0.0517, Accuracy: 31/87 (35.6322%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 2.2943, Accuracy: 1033/10000 (10.3300%), Attack Success Rate:6/10000(0.060)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch   4, local model 13, internal_epoch   1,  Average loss: 0.4608, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 13.900151181942569.
Norm before scaling: 13.899474407111418. Distance: 0.015874659055600045
Total norm for 1 adversaries is: 13.899474407111418. distance: 0.015874659055600045
___Test Local_Simple poisoned: True, epoch: 4: Average loss: 2.2865, Accuracy: 1673/8991 (18.6075%)
___Train Local_Simple,  epoch   4, local model 99, internal_epoch   1,  Average loss: 0.0273, Accuracy: 377/411 (91.7275%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 9.4561, Accuracy: 980/10000 (9.8000%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch   4, local model 94, internal_epoch   1,  Average loss: 0.0281, Accuracy: 468/607 (77.1005%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 12.3075, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch   4, local model 74, internal_epoch   1,  Average loss: 0.0346, Accuracy: 416/762 (54.5932%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 3.4078, Accuracy: 1341/10000 (13.4100%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch   4, local model 45, internal_epoch   1,  Average loss: 0.0391, Accuracy: 215/388 (55.4124%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 3.3171, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch   4, local model 44, internal_epoch   1,  Average loss: 0.0482, Accuracy: 2/47 (4.2553%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 2.2943, Accuracy: 1123/10000 (11.2300%), Attack Success Rate:7/10000(0.070)
time spent on training: 25.209810972213745
[foolsgold agg] training data poison_ratio: 0.0016046213093709885  data num: [578, 202, 29, 87, 5, 411, 607, 762, 388, 47]
[foolsgold agg] considering poison per batch poison_fraction: 0.0016046213093709885
[foolsgold agg] wv: [0.67552063 0.67552063 0.         0.         1.         0.
 1.         1.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 4: Average loss: 2.2929, Accuracy: 1809/10000 (18.0900%), Attack Success Rate:27/10000(0.270)
___Test Target_Simple poisoned: True, epoch: 4: Average loss: 2.2842, Accuracy: 1777/8991 (19.7642%)
Done in 89.44136571884155 sec.
Server Epoch:5 choose agents : [60, 49, 65, 14, 36, 24, 7, 4, 76, 39].
___Train Local_Simple,  epoch   5, local model 60, internal_epoch   1,  Average loss: 0.0386, Accuracy: 172/399 (43.1078%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 2.9883, Accuracy: 958/10000 (9.5800%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch   5, local model 49, internal_epoch   1,  Average loss: 0.0443, Accuracy: 103/196 (52.5510%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 2.3230, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch   5, local model 65, internal_epoch   1,  Average loss: 0.0241, Accuracy: 1017/1326 (76.6968%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 5.8620, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 14, internal_epoch   1,  Average loss: 0.0476, Accuracy: 1/48 (2.0833%), train_poison_data_count: 48
Global model norm: 13.900659427506712.
Norm before scaling: 13.900119896241284. Distance: 0.023761557888914434
Total norm for 4 adversaries is: 13.900119896241284. distance: 0.023761557888914434
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 2.2837, Accuracy: 1731/8991 (19.2526%)
___Train Local_Simple,  epoch   5, local model 36, internal_epoch   1,  Average loss: 0.0390, Accuracy: 212/304 (69.7368%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 3.9888, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 24, internal_epoch   1,  Average loss: 0.4659, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 13.900659427506712.
Norm before scaling: 13.899905285409659. Distance: 0.02172013319322728
Total norm for 4 adversaries is: 13.899905285409659. distance: 0.02172013319322728
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 2.2835, Accuracy: 1768/8991 (19.6641%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 7, internal_epoch   1,  Average loss: 0.0520, Accuracy: 38/86 (44.1860%), train_poison_data_count: 86
Global model norm: 13.900659427506712.
Norm before scaling: 13.899286682707352. Distance: 0.06332931312210753
Total norm for 4 adversaries is: 13.899286682707352. distance: 0.06332931312210753
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 2.2825, Accuracy: 1010/8991 (11.2335%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 4, internal_epoch   1,  Average loss: 0.0268, Accuracy: 404/463 (87.2570%), train_poison_data_count: 463
Global model norm: 13.900659427506712.
Norm before scaling: 13.941357544920526. Distance: 1.0914748370301512
Total norm for 4 adversaries is: 13.941357544920526. distance: 1.0914748370301512
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 13.2159, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch   5, local model 76, internal_epoch   1,  Average loss: 0.0520, Accuracy: 32/87 (36.7816%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 2.2923, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch   5, local model 39, internal_epoch   1,  Average loss: 0.0192, Accuracy: 1044/1259 (82.9230%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 3.5438, Accuracy: 958/10000 (9.5800%), Attack Success Rate:3/10000(0.030)
time spent on training: 30.93992328643799
[foolsgold agg] training data poison_ratio: 0.14426072369997603  data num: [399, 196, 1326, 48, 304, 5, 86, 463, 87, 1259]
[foolsgold agg] considering poison per batch poison_fraction: 0.14426072369997603
[foolsgold agg] wv: [0.         0.         0.81812772 0.         0.         0.
 1.         1.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 5: Average loss: 2.2925, Accuracy: 1808/10000 (18.0800%), Attack Success Rate:27/10000(0.270)
___Test Target_Simple poisoned: True, epoch: 5: Average loss: 2.2813, Accuracy: 1850/8991 (20.5761%)
Done in 96.77680706977844 sec.
Server Epoch:6 choose agents : [26, 29, 4, 41, 99, 67, 91, 76, 8, 25].
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 26, internal_epoch   1,  Average loss: 0.0185, Accuracy: 942/1311 (71.8535%), train_poison_data_count: 1311
Global model norm: 13.900592467490931.
Norm before scaling: 13.896441963436686. Distance: 1.551956461728338
Total norm for 5 adversaries is: 13.896441963436686. distance: 1.551956461728338
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 9.6321, Accuracy: 1233/8991 (13.7137%)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 29, internal_epoch   1,  Average loss: 0.0200, Accuracy: 1081/1232 (87.7435%), train_poison_data_count: 1232
Global model norm: 13.900592467490931.
Norm before scaling: 13.849174039704723. Distance: 1.2153991214783548
Total norm for 5 adversaries is: 13.849174039704723. distance: 1.2153991214783548
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 5.5987, Accuracy: 982/8991 (10.9220%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 4, internal_epoch   1,  Average loss: 0.0257, Accuracy: 414/463 (89.4168%), train_poison_data_count: 463
Global model norm: 13.900592467490931.
Norm before scaling: 13.945089831030412. Distance: 1.103882369142872
Total norm for 5 adversaries is: 13.945089831030412. distance: 1.103882369142872
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 14.5099, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch   6, local model 41, internal_epoch   1,  Average loss: 0.0338, Accuracy: 309/509 (60.7073%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 5.9453, Accuracy: 974/10000 (9.7400%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch   6, local model 99, internal_epoch   1,  Average loss: 0.0259, Accuracy: 367/411 (89.2944%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 10.1172, Accuracy: 980/10000 (9.8000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch   6, local model 67, internal_epoch   1,  Average loss: 0.0400, Accuracy: 266/568 (46.8310%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 4.3313, Accuracy: 982/10000 (9.8200%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   6, local model 91, internal_epoch   1,  Average loss: 0.0480, Accuracy: 79/182 (43.4066%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 2.3122, Accuracy: 958/10000 (9.5800%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   6, local model 76, internal_epoch   1,  Average loss: 0.0516, Accuracy: 51/87 (58.6207%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 2.2923, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 8, internal_epoch   1,  Average loss: 0.0494, Accuracy: 117/171 (68.4211%), train_poison_data_count: 171
Global model norm: 13.900592467490931.
Norm before scaling: 13.899041868710377. Distance: 0.23412774872528316
Total norm for 5 adversaries is: 13.899041868710377. distance: 0.23412774872528316
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 2.3147, Accuracy: 1010/8991 (11.2335%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 25, internal_epoch   1,  Average loss: 0.0525, Accuracy: 36/128 (28.1250%), train_poison_data_count: 128
Global model norm: 13.900592467490931.
Norm before scaling: 13.897559718802984. Distance: 0.07585670300992207
Total norm for 5 adversaries is: 13.897559718802984. distance: 0.07585670300992207
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 2.2744, Accuracy: 1060/8991 (11.7896%)
time spent on training: 33.661943435668945
[foolsgold agg] training data poison_ratio: 0.652903990517582  data num: [1311, 1232, 463, 509, 411, 568, 182, 87, 171, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.652903990517582
[foolsgold agg] wv: [0.0594762 1.        1.        0.        1.        1.        0.9109764
 0.        0.        0.       ]
___Test Target_Simple poisoned: False, epoch: 6: Average loss: 2.2907, Accuracy: 1978/10000 (19.7800%), Attack Success Rate:28/10000(0.280)
___Test Target_Simple poisoned: True, epoch: 6: Average loss: 2.2784, Accuracy: 1960/8991 (21.7996%)
Done in 100.4617133140564 sec.
Server Epoch:7 choose agents : [66, 68, 59, 62, 31, 10, 23, 7, 99, 45].
___Train Local_Simple,  epoch   7, local model 66, internal_epoch   1,  Average loss: 0.0296, Accuracy: 472/681 (69.3098%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 4.8329, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch   7, local model 68, internal_epoch   1,  Average loss: 0.0173, Accuracy: 1301/1591 (81.7725%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 4.5722, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch   7, local model 59, internal_epoch   1,  Average loss: 0.0824, Accuracy: 21/27 (77.7778%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 2.2914, Accuracy: 1014/10000 (10.1400%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch   7, local model 62, internal_epoch   1,  Average loss: 1.1764, Accuracy: 0/2 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 2.2903, Accuracy: 1976/10000 (19.7600%), Attack Success Rate:30/10000(0.300)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 31, internal_epoch   1,  Average loss: 0.0252, Accuracy: 1040/1839 (56.5525%), train_poison_data_count: 1839
Global model norm: 13.901761477164278.
Norm before scaling: 13.82439700806942. Distance: 1.529550348665909
Total norm for 4 adversaries is: 13.82439700806942. distance: 1.529550348665909
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 3.8710, Accuracy: 2447/8991 (27.2161%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 10, internal_epoch   1,  Average loss: 0.0307, Accuracy: 344/688 (50.0000%), train_poison_data_count: 688
Global model norm: 13.901761477164278.
Norm before scaling: 13.919807186325972. Distance: 1.084807981736293
Total norm for 4 adversaries is: 13.919807186325972. distance: 1.084807981736293
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 7.9556, Accuracy: 982/8991 (10.9220%)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 23, internal_epoch   1,  Average loss: 0.0330, Accuracy: 306/428 (71.4953%), train_poison_data_count: 428
Global model norm: 13.901761477164278.
Norm before scaling: 13.923861960130372. Distance: 0.8079368761186662
Total norm for 4 adversaries is: 13.923861960130372. distance: 0.8079368761186662
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 5.5392, Accuracy: 980/8991 (10.8998%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 7, internal_epoch   1,  Average loss: 0.0517, Accuracy: 31/86 (36.0465%), train_poison_data_count: 86
Global model norm: 13.901761477164278.
Norm before scaling: 13.90051288344612. Distance: 0.07458903150173657
Total norm for 4 adversaries is: 13.90051288344612. distance: 0.07458903150173657
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 2.2778, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch   7, local model 99, internal_epoch   1,  Average loss: 0.0226, Accuracy: 381/411 (92.7007%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 12.1916, Accuracy: 980/10000 (9.8000%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   7, local model 45, internal_epoch   1,  Average loss: 0.0352, Accuracy: 239/388 (61.5979%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 4.6119, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:7/10000(0.070)
time spent on training: 32.62747049331665
[foolsgold agg] training data poison_ratio: 0.49519622211366227  data num: [681, 1591, 27, 2, 1839, 688, 428, 86, 411, 388]
[foolsgold agg] considering poison per batch poison_fraction: 0.49519622211366227
[foolsgold agg] wv: [1.         1.         0.04592016 1.         1.         0.04592016
 0.         0.         0.         0.        ]
___Test Target_Simple poisoned: False, epoch: 7: Average loss: 2.2879, Accuracy: 1903/10000 (19.0300%), Attack Success Rate:21/10000(0.210)
___Test Target_Simple poisoned: True, epoch: 7: Average loss: 2.2735, Accuracy: 1887/8991 (20.9877%)
Done in 101.50153112411499 sec.
Server Epoch:8 choose agents : [63, 55, 79, 9, 62, 56, 96, 12, 92, 86].
___Train Local_Simple,  epoch   8, local model 63, internal_epoch   1,  Average loss: 0.0102, Accuracy: 2786/3022 (92.1906%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 5.5504, Accuracy: 982/10000 (9.8200%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   8, local model 55, internal_epoch   1,  Average loss: 0.0240, Accuracy: 1561/2803 (55.6903%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 4.2288, Accuracy: 4436/10000 (44.3600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch   8, local model 79, internal_epoch   1,  Average loss: 0.0934, Accuracy: 0/25 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 2.2863, Accuracy: 2013/10000 (20.1300%), Attack Success Rate:31/10000(0.310)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch   8, local model 9, internal_epoch   1,  Average loss: 0.0441, Accuracy: 153/263 (58.1749%), train_poison_data_count: 263
Global model norm: 13.901298824526759.
Norm before scaling: 13.904950782005667. Distance: 0.4334482515922695
Total norm for 2 adversaries is: 13.904950782005667. distance: 0.4334482515922695
___Test Local_Simple poisoned: True, epoch: 8: Average loss: 2.7180, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch   8, local model 62, internal_epoch   1,  Average loss: 1.1555, Accuracy: 0/2 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 2.2880, Accuracy: 2228/10000 (22.2800%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch   8, local model 56, internal_epoch   1,  Average loss: 0.0197, Accuracy: 633/704 (89.9148%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 17.7145, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch   8, local model 96, internal_epoch   1,  Average loss: 0.0378, Accuracy: 202/505 (40.0000%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 4.7485, Accuracy: 1806/10000 (18.0600%), Attack Success Rate:32/10000(0.320)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch   8, local model 12, internal_epoch   1,  Average loss: 0.0309, Accuracy: 408/648 (62.9630%), train_poison_data_count: 648
Global model norm: 13.901298824526759.
Norm before scaling: 13.904053109474724. Distance: 0.8392712083102102
Total norm for 2 adversaries is: 13.904053109474724. distance: 0.8392712083102102
___Test Local_Simple poisoned: True, epoch: 8: Average loss: 4.3483, Accuracy: 1944/8991 (21.6216%)
___Train Local_Simple,  epoch   8, local model 92, internal_epoch   1,  Average loss: 0.0459, Accuracy: 140/202 (69.3069%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 2.7285, Accuracy: 958/10000 (9.5800%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   8, local model 86, internal_epoch   1,  Average loss: 0.0668, Accuracy: 15/34 (44.1176%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 2.2872, Accuracy: 1509/10000 (15.0900%), Attack Success Rate:14/10000(0.140)
time spent on training: 33.80320882797241
[foolsgold agg] training data poison_ratio: 0.11098927875243665  data num: [3022, 2803, 25, 263, 2, 704, 505, 648, 202, 34]
[foolsgold agg] considering poison per batch poison_fraction: 0.11098927875243665
[foolsgold agg] wv: [1.         1.         1.         1.         1.         0.2329617
 0.04723163 1.         0.04723163 0.2329617 ]
___Test Target_Simple poisoned: False, epoch: 8: Average loss: 2.2830, Accuracy: 1850/10000 (18.5000%), Attack Success Rate:37/10000(0.370)
___Test Target_Simple poisoned: True, epoch: 8: Average loss: 2.2697, Accuracy: 1827/8991 (20.3203%)
Done in 121.29843163490295 sec.
Server Epoch:9 choose agents : [28, 63, 33, 71, 13, 32, 76, 97, 23, 25].
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 28, internal_epoch   1,  Average loss: 0.0430, Accuracy: 119/237 (50.2110%), train_poison_data_count: 237
Global model norm: 13.902969899323107.
Norm before scaling: 13.901558416811246. Distance: 0.3417098997354083
Total norm for 6 adversaries is: 13.901558416811246. distance: 0.3417098997354083
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 2.3877, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch   9, local model 63, internal_epoch   1,  Average loss: 0.0094, Accuracy: 2780/3022 (91.9921%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 5.9254, Accuracy: 982/10000 (9.8200%), Attack Success Rate:5/10000(0.050)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 33, internal_epoch   1,  Average loss: 0.0315, Accuracy: 400/644 (62.1118%), train_poison_data_count: 644
Global model norm: 13.902969899323107.
Norm before scaling: 13.917858019486545. Distance: 0.933960654971825
Total norm for 6 adversaries is: 13.917858019486545. distance: 0.933960654971825
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 6.3234, Accuracy: 915/8991 (10.1768%)
___Train Local_Simple,  epoch   9, local model 71, internal_epoch   1,  Average loss: 0.0426, Accuracy: 123/342 (35.9649%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 2.6056, Accuracy: 892/10000 (8.9200%), Attack Success Rate:3/10000(0.030)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 13, internal_epoch   1,  Average loss: 0.4587, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 13.902969899323107.
Norm before scaling: 13.902323993734207. Distance: 0.021183748608609977
Total norm for 6 adversaries is: 13.902323993734207. distance: 0.021183748608609977
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 2.2687, Accuracy: 1951/8991 (21.6995%)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 32, internal_epoch   1,  Average loss: 0.0770, Accuracy: 28/28 (100.0000%), train_poison_data_count: 28
Global model norm: 13.902969899323107.
Norm before scaling: 13.902696065358768. Distance: 0.03608284375474703
Total norm for 6 adversaries is: 13.902696065358768. distance: 0.03608284375474703
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 2.2696, Accuracy: 985/8991 (10.9554%)
___Train Local_Simple,  epoch   9, local model 76, internal_epoch   1,  Average loss: 0.0522, Accuracy: 16/87 (18.3908%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 2.2826, Accuracy: 1360/10000 (13.6000%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch   9, local model 97, internal_epoch   1,  Average loss: 0.4318, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 2.2851, Accuracy: 1012/10000 (10.1200%), Attack Success Rate:5/10000(0.050)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 23, internal_epoch   1,  Average loss: 0.0319, Accuracy: 222/428 (51.8692%), train_poison_data_count: 428
Global model norm: 13.902969899323107.
Norm before scaling: 13.928268317533064. Distance: 0.8310631147555791
Total norm for 6 adversaries is: 13.928268317533064. distance: 0.8310631147555791
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 5.9539, Accuracy: 1016/8991 (11.3002%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 25, internal_epoch   1,  Average loss: 0.0531, Accuracy: 18/128 (14.0625%), train_poison_data_count: 128
Global model norm: 13.902969899323107.
Norm before scaling: 13.899647308924784. Distance: 0.08849668295080493
Total norm for 6 adversaries is: 13.899647308924784. distance: 0.08849668295080493
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 2.2596, Accuracy: 1986/8991 (22.0888%)
time spent on training: 46.97627592086792
[foolsgold agg] training data poison_ratio: 0.2984165651644336  data num: [237, 3022, 644, 342, 5, 28, 87, 5, 428, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.2984165651644336
[foolsgold agg] wv: [0.         1.         0.11924816 1.         0.11924816 0.
 0.         0.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 9: Average loss: 2.2810, Accuracy: 1913/10000 (19.1300%), Attack Success Rate:30/10000(0.300)
___Test Target_Simple poisoned: True, epoch: 9: Average loss: 2.2704, Accuracy: 1898/8991 (21.1100%)
Done in 135.2077944278717 sec.
Server Epoch:10 choose agents : [12, 56, 19, 11, 13, 78, 49, 34, 14, 99].
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 12, internal_epoch   1,  Average loss: 0.0304, Accuracy: 414/648 (63.8889%), train_poison_data_count: 648
Global model norm: 13.90342207025565.
Norm before scaling: 13.904143647535042. Distance: 0.830655962709231
Total norm for 5 adversaries is: 13.904143647535042. distance: 0.830655962709231
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 3.9545, Accuracy: 1943/8991 (21.6105%)
___Train Local_Simple,  epoch  10, local model 56, internal_epoch   1,  Average loss: 0.0178, Accuracy: 618/704 (87.7841%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 21.2530, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:2/10000(0.020)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 19, internal_epoch   1,  Average loss: 0.0425, Accuracy: 105/244 (43.0328%), train_poison_data_count: 244
Global model norm: 13.90342207025565.
Norm before scaling: 13.900590820929104. Distance: 0.3507535209825703
Total norm for 5 adversaries is: 13.900590820929104. distance: 0.3507535209825703
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.3612, Accuracy: 1032/8991 (11.4781%)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 11, internal_epoch   1,  Average loss: 0.0531, Accuracy: 44/84 (52.3810%), train_poison_data_count: 84
Global model norm: 13.90342207025565.
Norm before scaling: 13.901944777746587. Distance: 0.07264830458686633
Total norm for 5 adversaries is: 13.901944777746587. distance: 0.07264830458686633
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.2673, Accuracy: 982/8991 (10.9220%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 13, internal_epoch   1,  Average loss: 0.4604, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 13.90342207025565.
Norm before scaling: 13.902752588642855. Distance: 0.022456475778767717
Total norm for 5 adversaries is: 13.902752588642855. distance: 0.022456475778767717
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.2691, Accuracy: 2210/8991 (24.5801%)
___Train Local_Simple,  epoch  10, local model 78, internal_epoch   1,  Average loss: 0.0198, Accuracy: 1707/2324 (73.4509%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 4.3742, Accuracy: 3692/10000 (36.9200%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  10, local model 49, internal_epoch   1,  Average loss: 0.0419, Accuracy: 118/196 (60.2041%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 2.3866, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  10, local model 34, internal_epoch   1,  Average loss: 0.0322, Accuracy: 629/1203 (52.2860%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 4.2457, Accuracy: 1920/10000 (19.2000%), Attack Success Rate:21/10000(0.210)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 14, internal_epoch   1,  Average loss: 0.0480, Accuracy: 1/48 (2.0833%), train_poison_data_count: 48
Global model norm: 13.90342207025565.
Norm before scaling: 13.90284368393747. Distance: 0.02977954702246612
Total norm for 5 adversaries is: 13.90284368393747. distance: 0.02977954702246612
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.2697, Accuracy: 2859/8991 (31.7985%)
___Train Local_Simple,  epoch  10, local model 99, internal_epoch   1,  Average loss: 0.0206, Accuracy: 394/411 (95.8637%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 13.2136, Accuracy: 980/10000 (9.8000%), Attack Success Rate:5/10000(0.050)
time spent on training: 45.95104146003723
[foolsgold agg] training data poison_ratio: 0.1753877620589739  data num: [648, 704, 244, 84, 5, 2324, 196, 1203, 48, 411]
[foolsgold agg] considering poison per batch poison_fraction: 0.1753877620589739
[foolsgold agg] wv: [1.         0.         0.         1.         0.86559112 1.
 0.86559112 1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 10: Average loss: 2.2757, Accuracy: 1910/10000 (19.1000%), Attack Success Rate:34/10000(0.340)
___Test Target_Simple poisoned: True, epoch: 10: Average loss: 2.2605, Accuracy: 1920/8991 (21.3547%)
Done in 134.5247552394867 sec.
Server Epoch:11 choose agents : [53, 56, 51, 14, 36, 6, 46, 99, 88, 37].
___Train Local_Simple,  epoch  11, local model 53, internal_epoch   1,  Average loss: 0.0337, Accuracy: 258/456 (56.5789%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 7.5428, Accuracy: 2057/10000 (20.5700%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  11, local model 56, internal_epoch   1,  Average loss: 0.0192, Accuracy: 583/704 (82.8125%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 13.1453, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  11, local model 51, internal_epoch   1,  Average loss: 0.0357, Accuracy: 206/259 (79.5367%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 4.2735, Accuracy: 980/10000 (9.8000%), Attack Success Rate:1/10000(0.010)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  11, local model 14, internal_epoch   1,  Average loss: 0.0474, Accuracy: 1/48 (2.0833%), train_poison_data_count: 48
Global model norm: 13.905591079016956.
Norm before scaling: 13.905082465033244. Distance: 0.03216585850409442
Total norm for 2 adversaries is: 13.905082465033244. distance: 0.03216585850409442
___Test Local_Simple poisoned: True, epoch: 11: Average loss: 2.2599, Accuracy: 2973/8991 (33.0664%)
___Train Local_Simple,  epoch  11, local model 36, internal_epoch   1,  Average loss: 0.0353, Accuracy: 197/304 (64.8026%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 5.9856, Accuracy: 974/10000 (9.7400%), Attack Success Rate:5/10000(0.050)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  11, local model 6, internal_epoch   1,  Average loss: 0.0174, Accuracy: 1384/1982 (69.8285%), train_poison_data_count: 1982
Global model norm: 13.905591079016956.
Norm before scaling: 13.88642536609916. Distance: 1.8018125282808148
Total norm for 2 adversaries is: 13.88642536609916. distance: 1.8018125282808148
___Test Local_Simple poisoned: True, epoch: 11: Average loss: 9.9028, Accuracy: 2197/8991 (24.4355%)
___Train Local_Simple,  epoch  11, local model 46, internal_epoch   1,  Average loss: 0.0451, Accuracy: 109/310 (35.1613%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 2.7526, Accuracy: 982/10000 (9.8200%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  11, local model 99, internal_epoch   1,  Average loss: 0.0198, Accuracy: 396/411 (96.3504%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 13.5022, Accuracy: 980/10000 (9.8000%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  11, local model 88, internal_epoch   1,  Average loss: 0.0484, Accuracy: 0/96 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 2.2745, Accuracy: 1153/10000 (11.5300%), Attack Success Rate:13/10000(0.130)
___Train Local_Simple,  epoch  11, local model 37, internal_epoch   1,  Average loss: 0.0336, Accuracy: 273/578 (47.2318%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 4.4283, Accuracy: 975/10000 (9.7500%), Attack Success Rate:3/10000(0.030)
time spent on training: 38.31513690948486
[foolsgold agg] training data poison_ratio: 0.39432789432789433  data num: [456, 704, 259, 48, 304, 1982, 310, 411, 96, 578]
[foolsgold agg] considering poison per batch poison_fraction: 0.39432789432789433
[foolsgold agg] wv: [1. 1. 0. 1. 0. 1. 1. 0. 0. 1.]
___Test Target_Simple poisoned: False, epoch: 11: Average loss: 2.2707, Accuracy: 2233/10000 (22.3300%), Attack Success Rate:27/10000(0.270)
___Test Target_Simple poisoned: True, epoch: 11: Average loss: 2.2540, Accuracy: 2222/8991 (24.7136%)
Done in 126.5448784828186 sec.
Server Epoch:12 choose agents : [42, 17, 2, 64, 6, 38, 37, 44, 77, 4].
___Train Local_Simple,  epoch  12, local model 42, internal_epoch   1,  Average loss: 0.0633, Accuracy: 60/63 (95.2381%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 2.3114, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:11/10000(0.110)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 17, internal_epoch   1,  Average loss: 0.0432, Accuracy: 85/94 (90.4255%), train_poison_data_count: 94
Global model norm: 13.907317594202544.
Norm before scaling: 13.907470100970018. Distance: 0.10629026249660643
Total norm for 4 adversaries is: 13.907470100970018. distance: 0.10629026249660643
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 2.2728, Accuracy: 982/8991 (10.9220%)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 2, internal_epoch   1,  Average loss: 0.0550, Accuracy: 38/119 (31.9328%), train_poison_data_count: 119
Global model norm: 13.907317594202544.
Norm before scaling: 13.90505338513861. Distance: 0.16023308376348105
Total norm for 4 adversaries is: 13.90505338513861. distance: 0.16023308376348105
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 2.2596, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch  12, local model 64, internal_epoch   1,  Average loss: 0.0447, Accuracy: 94/216 (43.5185%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 2.7445, Accuracy: 974/10000 (9.7400%), Attack Success Rate:2/10000(0.020)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 6, internal_epoch   1,  Average loss: 0.0163, Accuracy: 1470/1982 (74.1675%), train_poison_data_count: 1982
Global model norm: 13.907317594202544.
Norm before scaling: 13.909111911442768. Distance: 1.855636300000854
Total norm for 4 adversaries is: 13.909111911442768. distance: 1.855636300000854
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 13.9669, Accuracy: 2205/8991 (24.5245%)
___Train Local_Simple,  epoch  12, local model 38, internal_epoch   1,  Average loss: 0.0445, Accuracy: 122/179 (68.1564%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 2.4731, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  12, local model 37, internal_epoch   1,  Average loss: 0.0327, Accuracy: 290/578 (50.1730%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 4.9067, Accuracy: 2448/10000 (24.4800%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  12, local model 44, internal_epoch   1,  Average loss: 0.0505, Accuracy: 0/47 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 2.2685, Accuracy: 2391/10000 (23.9100%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  12, local model 77, internal_epoch   1,  Average loss: 0.0218, Accuracy: 1049/1544 (67.9404%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 5.7974, Accuracy: 1150/10000 (11.5000%), Attack Success Rate:10/10000(0.100)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 4, internal_epoch   1,  Average loss: 0.0188, Accuracy: 403/463 (87.0410%), train_poison_data_count: 463
Global model norm: 13.907317594202544.
Norm before scaling: 13.959905704737272. Distance: 1.182090383640187
Total norm for 4 adversaries is: 13.959905704737272. distance: 1.182090383640187
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 18.3385, Accuracy: 892/8991 (9.9210%)
time spent on training: 42.79666066169739
[foolsgold agg] training data poison_ratio: 0.5029328287606434  data num: [63, 94, 119, 216, 1982, 179, 578, 47, 1544, 463]
[foolsgold agg] considering poison per batch poison_fraction: 0.5029328287606434
[foolsgold agg] wv: [0.         0.         0.         0.79414437 1.         1.
 0.79414437 0.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 12: Average loss: 2.2668, Accuracy: 2193/10000 (21.9300%), Attack Success Rate:19/10000(0.190)
___Test Target_Simple poisoned: True, epoch: 12: Average loss: 2.2446, Accuracy: 2180/8991 (24.2465%)
Done in 130.66922211647034 sec.
Server Epoch:13 choose agents : [24, 38, 52, 10, 11, 76, 97, 7, 70, 14].
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 24, internal_epoch   1,  Average loss: 0.4705, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 13.909697716045372.
Norm before scaling: 13.908885920300925. Distance: 0.03565588371874815
Total norm for 5 adversaries is: 13.908885920300925. distance: 0.03565588371874815
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 2.2413, Accuracy: 2176/8991 (24.2020%)
___Train Local_Simple,  epoch  13, local model 38, internal_epoch   1,  Average loss: 0.0425, Accuracy: 125/179 (69.8324%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 2.5922, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  13, local model 52, internal_epoch   1,  Average loss: 0.0121, Accuracy: 623/705 (88.3688%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 33.7825, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:7/10000(0.070)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 10, internal_epoch   1,  Average loss: 0.0273, Accuracy: 354/688 (51.4535%), train_poison_data_count: 688
Global model norm: 13.909697716045372.
Norm before scaling: 13.918809615351394. Distance: 1.0229970552098167
Total norm for 5 adversaries is: 13.918809615351394. distance: 1.0229970552098167
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 5.8217, Accuracy: 1219/8991 (13.5580%)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 11, internal_epoch   1,  Average loss: 0.0522, Accuracy: 44/84 (52.3810%), train_poison_data_count: 84
Global model norm: 13.909697716045372.
Norm before scaling: 13.908460257110878. Distance: 0.09369378590061776
Total norm for 5 adversaries is: 13.908460257110878. distance: 0.09369378590061776
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 2.2457, Accuracy: 982/8991 (10.9220%)
___Train Local_Simple,  epoch  13, local model 76, internal_epoch   1,  Average loss: 0.0529, Accuracy: 16/87 (18.3908%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 2.2660, Accuracy: 1721/10000 (17.2100%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch  13, local model 97, internal_epoch   1,  Average loss: 0.4131, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 2.2749, Accuracy: 1061/10000 (10.6100%), Attack Success Rate:9/10000(0.090)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 7, internal_epoch   1,  Average loss: 0.0500, Accuracy: 37/86 (43.0233%), train_poison_data_count: 86
Global model norm: 13.909697716045372.
Norm before scaling: 13.909142628401888. Distance: 0.10833567013497446
Total norm for 5 adversaries is: 13.909142628401888. distance: 0.10833567013497446
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 2.2576, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  13, local model 70, internal_epoch   1,  Average loss: 0.0411, Accuracy: 201/569 (35.3251%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 3.2606, Accuracy: 1056/10000 (10.5600%), Attack Success Rate:9/10000(0.090)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 14, internal_epoch   1,  Average loss: 0.0463, Accuracy: 1/48 (2.0833%), train_poison_data_count: 48
Global model norm: 13.909697716045372.
Norm before scaling: 13.909337350404. Distance: 0.03792772535273602
Total norm for 5 adversaries is: 13.909337350404. distance: 0.03792772535273602
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 2.2453, Accuracy: 2784/8991 (30.9643%)
time spent on training: 42.99206471443176
[foolsgold agg] training data poison_ratio: 0.370928338762215  data num: [5, 179, 705, 688, 84, 87, 5, 86, 569, 48]
[foolsgold agg] considering poison per batch poison_fraction: 0.370928338762215
[foolsgold agg] wv: [0.33319643 0.         0.         1.         0.         0.
 0.10402899 1.         0.33319643 0.        ]
___Test Target_Simple poisoned: False, epoch: 13: Average loss: 2.2650, Accuracy: 2349/10000 (23.4900%), Attack Success Rate:21/10000(0.210)
___Test Target_Simple poisoned: True, epoch: 13: Average loss: 2.2407, Accuracy: 2335/8991 (25.9704%)
Done in 131.70180130004883 sec.
Server Epoch:14 choose agents : [95, 97, 12, 89, 25, 34, 55, 67, 56, 2].
___Train Local_Simple,  epoch  14, local model 95, internal_epoch   1,  Average loss: 0.0711, Accuracy: 18/29 (62.0690%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 2.2679, Accuracy: 1748/10000 (17.4800%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  14, local model 97, internal_epoch   1,  Average loss: 0.4111, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 2.2734, Accuracy: 1073/10000 (10.7300%), Attack Success Rate:12/10000(0.120)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  14, local model 12, internal_epoch   1,  Average loss: 0.0265, Accuracy: 437/648 (67.4383%), train_poison_data_count: 648
Global model norm: 13.909233681846422.
Norm before scaling: 13.918792075002358. Distance: 0.8518127633615756
Total norm for 3 adversaries is: 13.918792075002358. distance: 0.8518127633615756
___Test Local_Simple poisoned: True, epoch: 14: Average loss: 4.4466, Accuracy: 1898/8991 (21.1100%)
___Train Local_Simple,  epoch  14, local model 89, internal_epoch   1,  Average loss: 0.0680, Accuracy: 2/69 (2.8986%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 2.2619, Accuracy: 1714/10000 (17.1400%), Attack Success Rate:34/10000(0.340)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  14, local model 25, internal_epoch   1,  Average loss: 0.0533, Accuracy: 30/128 (23.4375%), train_poison_data_count: 128
Global model norm: 13.909233681846422.
Norm before scaling: 13.905794629131345. Distance: 0.12244750303593128
Total norm for 3 adversaries is: 13.905794629131345. distance: 0.12244750303593128
___Test Local_Simple poisoned: True, epoch: 14: Average loss: 2.2253, Accuracy: 2510/8991 (27.9168%)
___Train Local_Simple,  epoch  14, local model 34, internal_epoch   1,  Average loss: 0.0289, Accuracy: 713/1203 (59.2685%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 4.7822, Accuracy: 2599/10000 (25.9900%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  14, local model 55, internal_epoch   1,  Average loss: 0.0210, Accuracy: 1783/2803 (63.6104%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 4.4818, Accuracy: 4479/10000 (44.7900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  14, local model 67, internal_epoch   1,  Average loss: 0.0362, Accuracy: 277/568 (48.7676%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 3.3428, Accuracy: 982/10000 (9.8200%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  14, local model 56, internal_epoch   1,  Average loss: 0.0165, Accuracy: 596/704 (84.6591%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 15.3212, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  14, local model 2, internal_epoch   1,  Average loss: 0.0553, Accuracy: 32/119 (26.8908%), train_poison_data_count: 119
Global model norm: 13.909233681846422.
Norm before scaling: 13.906861161078572. Distance: 0.1749827580813691
Total norm for 3 adversaries is: 13.906861161078572. distance: 0.1749827580813691
___Test Local_Simple poisoned: True, epoch: 14: Average loss: 2.2504, Accuracy: 1041/8991 (11.5782%)
time spent on training: 42.99453783035278
[foolsgold agg] training data poison_ratio: 0.14260675589547483  data num: [29, 5, 648, 69, 128, 1203, 2803, 568, 704, 119]
[foolsgold agg] considering poison per batch poison_fraction: 0.14260675589547483
[foolsgold agg] wv: [0.95696832 0.42971404 0.42971404 1.         0.41639192 0.95696832
 1.         1.         0.         0.        ]
___Test Target_Simple poisoned: False, epoch: 14: Average loss: 2.2559, Accuracy: 2604/10000 (26.0400%), Attack Success Rate:12/10000(0.120)
___Test Target_Simple poisoned: True, epoch: 14: Average loss: 2.2329, Accuracy: 2590/8991 (28.8066%)
Done in 131.00285840034485 sec.
Server Epoch:15 choose agents : [4, 1, 20, 48, 55, 98, 27, 42, 0, 44].
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 4, internal_epoch   1,  Average loss: 0.0206, Accuracy: 405/463 (87.4730%), train_poison_data_count: 463
Global model norm: 13.911361200794996.
Norm before scaling: 13.960976300134947. Distance: 1.1680612176633673
Total norm for 4 adversaries is: 13.960976300134947. distance: 1.1680612176633673
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 17.6197, Accuracy: 892/8991 (9.9210%)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 1, internal_epoch   1,  Average loss: 0.0522, Accuracy: 25/84 (29.7619%), train_poison_data_count: 84
Global model norm: 13.911361200794996.
Norm before scaling: 13.910202870428755. Distance: 0.07571719254447823
Total norm for 4 adversaries is: 13.910202870428755. distance: 0.07571719254447823
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 2.2350, Accuracy: 1722/8991 (19.1525%)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 20, internal_epoch   1,  Average loss: 0.0105, Accuracy: 1900/2180 (87.1560%), train_poison_data_count: 2180
Global model norm: 13.911361200794996.
Norm before scaling: 13.838745590428402. Distance: 1.7723139762378566
Total norm for 4 adversaries is: 13.838745590428402. distance: 1.7723139762378566
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 6.7767, Accuracy: 1985/8991 (22.0776%)
___Train Local_Simple,  epoch  15, local model 48, internal_epoch   1,  Average loss: 0.0502, Accuracy: 46/128 (35.9375%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 2.3081, Accuracy: 901/10000 (9.0100%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  15, local model 55, internal_epoch   1,  Average loss: 0.0189, Accuracy: 1895/2803 (67.6061%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 5.6353, Accuracy: 4518/10000 (45.1800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  15, local model 98, internal_epoch   1,  Average loss: 0.3370, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 2.2597, Accuracy: 1966/10000 (19.6600%), Attack Success Rate:23/10000(0.230)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 27, internal_epoch   1,  Average loss: 0.0192, Accuracy: 593/678 (87.4631%), train_poison_data_count: 678
Global model norm: 13.911361200794996.
Norm before scaling: 13.904862992627795. Distance: 1.0042094207040673
Total norm for 4 adversaries is: 13.904862992627795. distance: 1.0042094207040673
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 4.5902, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  15, local model 42, internal_epoch   1,  Average loss: 0.0609, Accuracy: 60/63 (95.2381%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 2.3225, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  15, local model 0, internal_epoch   1,  Average loss: 0.0330, Accuracy: 216/300 (72.0000%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 4.4325, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  15, local model 44, internal_epoch   1,  Average loss: 0.0523, Accuracy: 0/47 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 2.2516, Accuracy: 2557/10000 (25.5700%), Attack Success Rate:16/10000(0.160)
time spent on training: 44.26168251037598
[foolsgold agg] training data poison_ratio: 0.5042950236966824  data num: [463, 84, 2180, 128, 2803, 6, 678, 63, 300, 47]
[foolsgold agg] considering poison per batch poison_fraction: 0.5042950236966824
[foolsgold agg] wv: [0.         0.39605767 1.         0.         1.         1.
 1.         1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 15: Average loss: 2.2490, Accuracy: 2640/10000 (26.4000%), Attack Success Rate:6/10000(0.060)
___Test Target_Simple poisoned: True, epoch: 15: Average loss: 2.2194, Accuracy: 2627/8991 (29.2181%)
Done in 132.16663575172424 sec.
Server Epoch:16 choose agents : [25, 8, 12, 99, 53, 26, 60, 63, 52, 90].
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 25, internal_epoch   1,  Average loss: 0.0533, Accuracy: 37/128 (28.9062%), train_poison_data_count: 128
Global model norm: 13.913603546438319.
Norm before scaling: 13.909967572786666. Distance: 0.13034800350004971
Total norm for 4 adversaries is: 13.909967572786666. distance: 0.13034800350004971
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 2.2016, Accuracy: 2883/8991 (32.0654%)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 8, internal_epoch   1,  Average loss: 0.0386, Accuracy: 134/171 (78.3626%), train_poison_data_count: 171
Global model norm: 13.913603546438319.
Norm before scaling: 13.921818554353866. Distance: 0.38270532314395195
Total norm for 4 adversaries is: 13.921818554353866. distance: 0.38270532314395195
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 3.0485, Accuracy: 1010/8991 (11.2335%)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 12, internal_epoch   1,  Average loss: 0.0264, Accuracy: 423/648 (65.2778%), train_poison_data_count: 648
Global model norm: 13.913603546438319.
Norm before scaling: 13.92069836234906. Distance: 0.8203218005425142
Total norm for 4 adversaries is: 13.92069836234906. distance: 0.8203218005425142
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 3.8406, Accuracy: 1512/8991 (16.8168%)
___Train Local_Simple,  epoch  16, local model 99, internal_epoch   1,  Average loss: 0.0147, Accuracy: 394/411 (95.8637%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 14.3358, Accuracy: 980/10000 (9.8000%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  16, local model 53, internal_epoch   1,  Average loss: 0.0289, Accuracy: 337/456 (73.9035%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 9.3474, Accuracy: 1697/10000 (16.9700%), Attack Success Rate:28/10000(0.280)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 26, internal_epoch   1,  Average loss: 0.0162, Accuracy: 919/1311 (70.0992%), train_poison_data_count: 1311
Global model norm: 13.913603546438319.
Norm before scaling: 13.914994617149965. Distance: 1.6961656524444264
Total norm for 4 adversaries is: 13.914994617149965. distance: 1.6961656524444264
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 4.4704, Accuracy: 1911/8991 (21.2546%)
___Train Local_Simple,  epoch  16, local model 60, internal_epoch   1,  Average loss: 0.0316, Accuracy: 179/399 (44.8622%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 5.5851, Accuracy: 1322/10000 (13.2200%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  16, local model 63, internal_epoch   1,  Average loss: 0.0087, Accuracy: 2776/3022 (91.8597%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 5.2535, Accuracy: 982/10000 (9.8200%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  16, local model 52, internal_epoch   1,  Average loss: 0.0134, Accuracy: 601/705 (85.2482%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 30.2841, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  16, local model 90, internal_epoch   1,  Average loss: 0.0193, Accuracy: 656/768 (85.4167%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 3.9666, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:5/10000(0.050)
time spent on training: 46.843613386154175
[foolsgold agg] training data poison_ratio: 0.2815812445442075  data num: [128, 171, 648, 411, 456, 1311, 399, 3022, 705, 768]
[foolsgold agg] considering poison per batch poison_fraction: 0.2815812445442075
[foolsgold agg] wv: [0.1434636 0.        1.        1.        0.        0.        1.
 1.        0.        0.       ]
___Test Target_Simple poisoned: False, epoch: 16: Average loss: 2.2422, Accuracy: 2055/10000 (20.5500%), Attack Success Rate:32/10000(0.320)
___Test Target_Simple poisoned: True, epoch: 16: Average loss: 2.2165, Accuracy: 2048/8991 (22.7783%)
Done in 135.49011778831482 sec.
Server Epoch:17 choose agents : [66, 33, 56, 97, 10, 13, 77, 37, 90, 59].
___Train Local_Simple,  epoch  17, local model 66, internal_epoch   1,  Average loss: 0.0229, Accuracy: 470/681 (69.0162%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 4.3530, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:6/10000(0.060)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  17, local model 33, internal_epoch   1,  Average loss: 0.0276, Accuracy: 369/644 (57.2981%), train_poison_data_count: 644
Global model norm: 13.914487991809787.
Norm before scaling: 13.936744019400827. Distance: 1.0076310933398183
Total norm for 3 adversaries is: 13.936744019400827. distance: 1.0076310933398183
___Test Local_Simple poisoned: True, epoch: 17: Average loss: 6.8585, Accuracy: 2087/8991 (23.2121%)
___Train Local_Simple,  epoch  17, local model 56, internal_epoch   1,  Average loss: 0.0175, Accuracy: 582/704 (82.6705%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 11.3570, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  17, local model 97, internal_epoch   1,  Average loss: 0.3932, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 2.2550, Accuracy: 1513/10000 (15.1300%), Attack Success Rate:23/10000(0.230)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  17, local model 10, internal_epoch   1,  Average loss: 0.0250, Accuracy: 367/688 (53.3430%), train_poison_data_count: 688
Global model norm: 13.914487991809787.
Norm before scaling: 13.931897324539952. Distance: 1.000749426402019
Total norm for 3 adversaries is: 13.931897324539952. distance: 1.000749426402019
___Test Local_Simple poisoned: True, epoch: 17: Average loss: 6.8531, Accuracy: 982/8991 (10.9220%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  17, local model 13, internal_epoch   1,  Average loss: 0.4825, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 13.914487991809787.
Norm before scaling: 13.913493877874402. Distance: 0.03405545853367457
Total norm for 3 adversaries is: 13.913493877874402. distance: 0.03405545853367457
___Test Local_Simple poisoned: True, epoch: 17: Average loss: 2.2108, Accuracy: 2076/8991 (23.0898%)
___Train Local_Simple,  epoch  17, local model 77, internal_epoch   1,  Average loss: 0.0211, Accuracy: 1057/1544 (68.4585%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 4.5379, Accuracy: 1956/10000 (19.5600%), Attack Success Rate:33/10000(0.330)
___Train Local_Simple,  epoch  17, local model 37, internal_epoch   1,  Average loss: 0.0302, Accuracy: 271/578 (46.8858%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 4.6967, Accuracy: 2118/10000 (21.1800%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch  17, local model 90, internal_epoch   1,  Average loss: 0.0195, Accuracy: 643/768 (83.7240%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 4.7880, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  17, local model 59, internal_epoch   1,  Average loss: 0.0768, Accuracy: 21/27 (77.7778%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 2.2498, Accuracy: 1652/10000 (16.5200%), Attack Success Rate:34/10000(0.340)
time spent on training: 42.01042938232422
[foolsgold agg] training data poison_ratio: 0.23688873139617292  data num: [681, 644, 704, 5, 688, 5, 1544, 578, 768, 27]
[foolsgold agg] considering poison per batch poison_fraction: 0.23688873139617292
[foolsgold agg] wv: [0.90091571 0.38291706 1.         0.         0.83364649 0.38291706
 0.80197666 1.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 17: Average loss: 2.2353, Accuracy: 1929/10000 (19.2900%), Attack Success Rate:31/10000(0.310)
___Test Target_Simple poisoned: True, epoch: 17: Average loss: 2.2047, Accuracy: 1942/8991 (21.5994%)
Done in 130.20416855812073 sec.
Server Epoch:18 choose agents : [55, 58, 88, 23, 39, 75, 82, 61, 95, 93].
___Train Local_Simple,  epoch  18, local model 55, internal_epoch   1,  Average loss: 0.0183, Accuracy: 1884/2803 (67.2137%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 5.0611, Accuracy: 4555/10000 (45.5500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  18, local model 58, internal_epoch   1,  Average loss: 0.0293, Accuracy: 493/1015 (48.5714%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 4.6347, Accuracy: 1755/10000 (17.5500%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  18, local model 88, internal_epoch   1,  Average loss: 0.0450, Accuracy: 30/96 (31.2500%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 2.2647, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  18, local model 23, internal_epoch   1,  Average loss: 0.0226, Accuracy: 341/428 (79.6729%), train_poison_data_count: 428
Global model norm: 13.914914018897864.
Norm before scaling: 13.960075672021075. Distance: 0.8998353781081334
Total norm for 1 adversaries is: 13.960075672021075. distance: 0.8998353781081334
___Test Local_Simple poisoned: True, epoch: 18: Average loss: 9.1034, Accuracy: 1948/8991 (21.6661%)
___Train Local_Simple,  epoch  18, local model 39, internal_epoch   1,  Average loss: 0.0170, Accuracy: 1007/1259 (79.9841%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 4.1610, Accuracy: 958/10000 (9.5800%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  18, local model 75, internal_epoch   1,  Average loss: 0.0188, Accuracy: 452/497 (90.9457%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 12.2636, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  18, local model 82, internal_epoch   1,  Average loss: 0.0563, Accuracy: 19/114 (16.6667%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 2.2981, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  18, local model 61, internal_epoch   1,  Average loss: 0.0229, Accuracy: 560/767 (73.0117%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 5.6688, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  18, local model 95, internal_epoch   1,  Average loss: 0.0662, Accuracy: 15/29 (51.7241%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 2.2423, Accuracy: 1264/10000 (12.6400%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch  18, local model 93, internal_epoch   1,  Average loss: 0.0736, Accuracy: 1/30 (3.3333%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 2.2368, Accuracy: 2636/10000 (26.3600%), Attack Success Rate:12/10000(0.120)
time spent on training: 40.170086145401
[foolsgold agg] training data poison_ratio: 0.06081273088945723  data num: [2803, 1015, 96, 428, 1259, 497, 114, 767, 29, 30]
[foolsgold agg] considering poison per batch poison_fraction: 0.06081273088945723
[foolsgold agg] wv: [1.         0.58536249 1.         0.         0.58536249 1.
 1.         0.         0.         0.54693555]
___Test Target_Simple poisoned: False, epoch: 18: Average loss: 2.2267, Accuracy: 1983/10000 (19.8300%), Attack Success Rate:30/10000(0.300)
___Test Target_Simple poisoned: True, epoch: 18: Average loss: 2.1908, Accuracy: 1978/8991 (21.9998%)
Done in 127.99020409584045 sec.
Server Epoch:19 choose agents : [37, 43, 50, 84, 25, 28, 8, 16, 6, 3].
___Train Local_Simple,  epoch  19, local model 37, internal_epoch   1,  Average loss: 0.0289, Accuracy: 297/578 (51.3841%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 5.4302, Accuracy: 1452/10000 (14.5200%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  19, local model 43, internal_epoch   1,  Average loss: 0.3337, Accuracy: 4/6 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 2.2307, Accuracy: 1471/10000 (14.7100%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  19, local model 50, internal_epoch   1,  Average loss: 0.0277, Accuracy: 150/151 (99.3377%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 4.4521, Accuracy: 980/10000 (9.8000%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  19, local model 84, internal_epoch   1,  Average loss: 0.0837, Accuracy: 0/29 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 2.2214, Accuracy: 2518/10000 (25.1800%), Attack Success Rate:11/10000(0.110)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 25, internal_epoch   1,  Average loss: 0.0528, Accuracy: 23/128 (17.9688%), train_poison_data_count: 128
Global model norm: 13.916564819206911.
Norm before scaling: 13.913219154326871. Distance: 0.13973642125167585
Total norm for 6 adversaries is: 13.913219154326871. distance: 0.13973642125167585
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 2.1737, Accuracy: 2606/8991 (28.9845%)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 28, internal_epoch   1,  Average loss: 0.0387, Accuracy: 104/237 (43.8819%), train_poison_data_count: 237
Global model norm: 13.916564819206911.
Norm before scaling: 13.921229971554181. Distance: 0.4958769407116565
Total norm for 6 adversaries is: 13.921229971554181. distance: 0.4958769407116565
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 3.0611, Accuracy: 1032/8991 (11.4781%)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 8, internal_epoch   1,  Average loss: 0.0386, Accuracy: 105/171 (61.4035%), train_poison_data_count: 171
Global model norm: 13.916564819206911.
Norm before scaling: 13.924427419290106. Distance: 0.3966932075634412
Total norm for 6 adversaries is: 13.924427419290106. distance: 0.3966932075634412
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 3.0471, Accuracy: 1010/8991 (11.2335%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 16, internal_epoch   1,  Average loss: 0.0245, Accuracy: 626/994 (62.9779%), train_poison_data_count: 994
Global model norm: 13.916564819206911.
Norm before scaling: 13.921377941638728. Distance: 1.0538956106453392
Total norm for 6 adversaries is: 13.921377941638728. distance: 1.0538956106453392
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 2.6900, Accuracy: 1979/8991 (22.0109%)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 6, internal_epoch   1,  Average loss: 0.0156, Accuracy: 1457/1982 (73.5116%), train_poison_data_count: 1982
Global model norm: 13.916564819206911.
Norm before scaling: 13.89041738279881. Distance: 1.7820490333241763
Total norm for 6 adversaries is: 13.89041738279881. distance: 1.7820490333241763
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 4.9894, Accuracy: 2451/8991 (27.2606%)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 3, internal_epoch   1,  Average loss: 0.0271, Accuracy: 514/1010 (50.8911%), train_poison_data_count: 1010
Global model norm: 13.916564819206911.
Norm before scaling: 13.900616617042008. Distance: 1.187886426191301
Total norm for 6 adversaries is: 13.900616617042008. distance: 1.187886426191301
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 4.2407, Accuracy: 1857/8991 (20.6540%)
time spent on training: 46.49189209938049
[foolsgold agg] training data poison_ratio: 0.8554672720393492  data num: [578, 6, 151, 29, 128, 237, 171, 994, 1982, 1010]
[foolsgold agg] considering poison per batch poison_fraction: 0.8554672720393492
[foolsgold agg] wv: [1.         0.         0.         1.         0.         0.
 0.84885198 1.         0.84885198 1.        ]
___Test Target_Simple poisoned: False, epoch: 19: Average loss: 2.2167, Accuracy: 2331/10000 (23.3100%), Attack Success Rate:22/10000(0.220)
___Test Target_Simple poisoned: True, epoch: 19: Average loss: 2.1755, Accuracy: 2331/8991 (25.9259%)
Done in 135.45795154571533 sec.
Server Epoch:20 choose agents : [23, 43, 27, 82, 37, 35, 29, 47, 11, 42].
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 23, internal_epoch   1,  Average loss: 0.0216, Accuracy: 293/428 (68.4579%), train_poison_data_count: 428
Global model norm: 13.91890663500774.
Norm before scaling: 13.963557086705087. Distance: 0.8793264444226919
Total norm for 4 adversaries is: 13.963557086705087. distance: 0.8793264444226919
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 8.8634, Accuracy: 1670/8991 (18.5741%)
___Train Local_Simple,  epoch  20, local model 43, internal_epoch   1,  Average loss: 0.3286, Accuracy: 4/6 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 2.2221, Accuracy: 1251/10000 (12.5100%), Attack Success Rate:10/10000(0.100)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 27, internal_epoch   1,  Average loss: 0.0199, Accuracy: 578/678 (85.2507%), train_poison_data_count: 678
Global model norm: 13.91890663500774.
Norm before scaling: 13.904332403777126. Distance: 1.0010667713734114
Total norm for 4 adversaries is: 13.904332403777126. distance: 1.0010667713734114
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 3.4426, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  20, local model 82, internal_epoch   1,  Average loss: 0.0553, Accuracy: 30/114 (26.3158%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 2.3031, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  20, local model 37, internal_epoch   1,  Average loss: 0.0275, Accuracy: 317/578 (54.8443%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 5.6348, Accuracy: 1085/10000 (10.8500%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  20, local model 35, internal_epoch   1,  Average loss: 0.0175, Accuracy: 838/978 (85.6851%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 4.3572, Accuracy: 1137/10000 (11.3700%), Attack Success Rate:13/10000(0.130)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 29, internal_epoch   1,  Average loss: 0.0156, Accuracy: 1085/1232 (88.0682%), train_poison_data_count: 1232
Global model norm: 13.91890663500774.
Norm before scaling: 13.863272995031355. Distance: 1.1900919684766456
Total norm for 4 adversaries is: 13.863272995031355. distance: 1.1900919684766456
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 4.9634, Accuracy: 982/8991 (10.9220%)
___Train Local_Simple,  epoch  20, local model 47, internal_epoch   1,  Average loss: 0.0143, Accuracy: 2025/2519 (80.3890%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 3.7209, Accuracy: 3350/10000 (33.5000%), Attack Success Rate:2/10000(0.020)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 11, internal_epoch   1,  Average loss: 0.0510, Accuracy: 42/84 (50.0000%), train_poison_data_count: 84
Global model norm: 13.91890663500774.
Norm before scaling: 13.918097020879586. Distance: 0.10845482279052202
Total norm for 4 adversaries is: 13.918097020879586. distance: 0.10845482279052202
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 2.1841, Accuracy: 1238/8991 (13.7693%)
___Train Local_Simple,  epoch  20, local model 42, internal_epoch   1,  Average loss: 0.0578, Accuracy: 59/63 (93.6508%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 2.3310, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:10/10000(0.100)
time spent on training: 46.01204180717468
[foolsgold agg] training data poison_ratio: 0.3625748502994012  data num: [428, 6, 678, 114, 578, 978, 1232, 2519, 84, 63]
[foolsgold agg] considering poison per batch poison_fraction: 0.36257485029940123
[foolsgold agg] wv: [0.2394579  0.2394579  1.         1.         0.29131772 0.17948275
 0.         0.17948275 0.21461208 0.        ]
___Test Target_Simple poisoned: False, epoch: 20: Average loss: 2.2141, Accuracy: 2527/10000 (25.2700%), Attack Success Rate:13/10000(0.130)
___Test Target_Simple poisoned: True, epoch: 20: Average loss: 2.1706, Accuracy: 2540/8991 (28.2505%)
Done in 134.16023921966553 sec.
Server Epoch:21 choose agents : [33, 12, 93, 15, 41, 97, 20, 86, 54, 52].
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 33, internal_epoch   1,  Average loss: 0.0281, Accuracy: 305/644 (47.3602%), train_poison_data_count: 644
Global model norm: 13.918596388984527.
Norm before scaling: 13.940159018004982. Distance: 1.0123597695528173
Total norm for 4 adversaries is: 13.940159018004982. distance: 1.0123597695528173
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 6.4509, Accuracy: 1666/8991 (18.5296%)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 12, internal_epoch   1,  Average loss: 0.0241, Accuracy: 461/648 (71.1420%), train_poison_data_count: 648
Global model norm: 13.918596388984527.
Norm before scaling: 13.936947114524289. Distance: 0.85498845103757
Total norm for 4 adversaries is: 13.936947114524289. distance: 0.85498845103757
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 4.2517, Accuracy: 2404/8991 (26.7378%)
___Train Local_Simple,  epoch  21, local model 93, internal_epoch   1,  Average loss: 0.0712, Accuracy: 7/30 (23.3333%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 2.2179, Accuracy: 1996/10000 (19.9600%), Attack Success Rate:21/10000(0.210)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 15, internal_epoch   1,  Average loss: 0.0292, Accuracy: 499/1033 (48.3059%), train_poison_data_count: 1033
Global model norm: 13.918596388984527.
Norm before scaling: 13.933384582814657. Distance: 1.3289737906271935
Total norm for 4 adversaries is: 13.933384582814657. distance: 1.3289737906271935
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 5.6816, Accuracy: 2551/8991 (28.3728%)
___Train Local_Simple,  epoch  21, local model 41, internal_epoch   1,  Average loss: 0.0255, Accuracy: 316/509 (62.0825%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 6.8472, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  21, local model 97, internal_epoch   1,  Average loss: 0.3900, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 2.2272, Accuracy: 1771/10000 (17.7100%), Attack Success Rate:22/10000(0.220)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 20, internal_epoch   1,  Average loss: 0.0077, Accuracy: 1954/2180 (89.6330%), train_poison_data_count: 2180
Global model norm: 13.918596388984527.
Norm before scaling: 13.837400887814088. Distance: 1.5979243941868317
Total norm for 4 adversaries is: 13.837400887814088. distance: 1.5979243941868317
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 5.7768, Accuracy: 1995/8991 (22.1889%)
___Train Local_Simple,  epoch  21, local model 86, internal_epoch   1,  Average loss: 0.0648, Accuracy: 15/34 (44.1176%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 2.2132, Accuracy: 2215/10000 (22.1500%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  21, local model 54, internal_epoch   1,  Average loss: 0.0504, Accuracy: 13/91 (14.2857%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 2.2137, Accuracy: 3144/10000 (31.4400%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  21, local model 52, internal_epoch   1,  Average loss: 0.0137, Accuracy: 605/705 (85.8156%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 22.6118, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:8/10000(0.080)
time spent on training: 43.11361813545227
[foolsgold agg] training data poison_ratio: 0.766286783466576  data num: [644, 648, 30, 1033, 509, 5, 2180, 34, 91, 705]
[foolsgold agg] considering poison per batch poison_fraction: 0.766286783466576
[foolsgold agg] wv: [1.         0.88688384 1.         1.         1.         0.17078188
 1.         0.13867245 1.         0.13867245]
___Test Target_Simple poisoned: False, epoch: 21: Average loss: 2.2039, Accuracy: 3180/10000 (31.8000%), Attack Success Rate:3/10000(0.030)
___Test Target_Simple poisoned: True, epoch: 21: Average loss: 2.1522, Accuracy: 3195/8991 (35.5355%)
Done in 132.54947137832642 sec.
Server Epoch:22 choose agents : [24, 38, 42, 32, 60, 8, 35, 92, 27, 96].
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 24, internal_epoch   1,  Average loss: 0.4254, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 13.920440223134445.
Norm before scaling: 13.920235791018019. Distance: 0.04116307022176963
Total norm for 4 adversaries is: 13.920235791018019. distance: 0.04116307022176963
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 2.1530, Accuracy: 3813/8991 (42.4091%)
___Train Local_Simple,  epoch  22, local model 38, internal_epoch   1,  Average loss: 0.0386, Accuracy: 127/179 (70.9497%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 2.8430, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  22, local model 42, internal_epoch   1,  Average loss: 0.0572, Accuracy: 57/63 (90.4762%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 2.3231, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:8/10000(0.080)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 32, internal_epoch   1,  Average loss: 0.0686, Accuracy: 27/28 (96.4286%), train_poison_data_count: 28
Global model norm: 13.920440223134445.
Norm before scaling: 13.920847982250287. Distance: 0.058583258643267765
Total norm for 4 adversaries is: 13.920847982250287. distance: 0.058583258643267765
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 2.1609, Accuracy: 1712/8991 (19.0413%)
___Train Local_Simple,  epoch  22, local model 60, internal_epoch   1,  Average loss: 0.0280, Accuracy: 260/399 (65.1629%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 6.7389, Accuracy: 1794/10000 (17.9400%), Attack Success Rate:35/10000(0.350)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 8, internal_epoch   1,  Average loss: 0.0358, Accuracy: 133/171 (77.7778%), train_poison_data_count: 171
Global model norm: 13.920440223134445.
Norm before scaling: 13.930504655644658. Distance: 0.40995956427938
Total norm for 4 adversaries is: 13.930504655644658. distance: 0.40995956427938
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 3.3331, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  22, local model 35, internal_epoch   1,  Average loss: 0.0180, Accuracy: 844/978 (86.2986%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 4.1195, Accuracy: 1178/10000 (11.7800%), Attack Success Rate:18/10000(0.180)
___Train Local_Simple,  epoch  22, local model 92, internal_epoch   1,  Average loss: 0.0395, Accuracy: 101/202 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 4.3886, Accuracy: 958/10000 (9.5800%), Attack Success Rate:6/10000(0.060)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 27, internal_epoch   1,  Average loss: 0.0190, Accuracy: 586/678 (86.4307%), train_poison_data_count: 678
Global model norm: 13.920440223134445.
Norm before scaling: 13.911133600879673. Distance: 0.9968149304602794
Total norm for 4 adversaries is: 13.911133600879673. distance: 0.9968149304602794
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 4.0489, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  22, local model 96, internal_epoch   1,  Average loss: 0.0318, Accuracy: 230/505 (45.5446%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 4.9009, Accuracy: 1946/10000 (19.4600%), Attack Success Rate:33/10000(0.330)
time spent on training: 42.21858310699463
[foolsgold agg] training data poison_ratio: 0.27493765586034913  data num: [5, 179, 63, 28, 399, 171, 978, 202, 678, 505]
[foolsgold agg] considering poison per batch poison_fraction: 0.27493765586034913
[foolsgold agg] wv: [1.         0.         0.         0.         0.         0.65875434
 0.         0.         0.65875434 1.        ]
___Test Target_Simple poisoned: False, epoch: 22: Average loss: 2.2012, Accuracy: 3248/10000 (32.4800%), Attack Success Rate:5/10000(0.050)
___Test Target_Simple poisoned: True, epoch: 22: Average loss: 2.1517, Accuracy: 3296/8991 (36.6589%)
Done in 130.2637655735016 sec.
Server Epoch:23 choose agents : [56, 82, 85, 17, 76, 61, 26, 86, 89, 75].
___Train Local_Simple,  epoch  23, local model 56, internal_epoch   1,  Average loss: 0.0164, Accuracy: 593/704 (84.2330%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 12.5448, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  23, local model 82, internal_epoch   1,  Average loss: 0.0524, Accuracy: 56/114 (49.1228%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 2.3419, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  23, local model 85, internal_epoch   1,  Average loss: 0.4779, Accuracy: 2/4 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 2.2082, Accuracy: 2143/10000 (21.4300%), Attack Success Rate:20/10000(0.200)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  23, local model 17, internal_epoch   1,  Average loss: 0.0401, Accuracy: 81/94 (86.1702%), train_poison_data_count: 94
Global model norm: 13.92053777949374.
Norm before scaling: 13.921820198405047. Distance: 0.14129848931809977
Total norm for 2 adversaries is: 13.921820198405047. distance: 0.14129848931809977
___Test Local_Simple poisoned: True, epoch: 23: Average loss: 2.2134, Accuracy: 1036/8991 (11.5226%)
___Train Local_Simple,  epoch  23, local model 76, internal_epoch   1,  Average loss: 0.0531, Accuracy: 13/87 (14.9425%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 2.1988, Accuracy: 2488/10000 (24.8800%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  23, local model 61, internal_epoch   1,  Average loss: 0.0222, Accuracy: 567/767 (73.9244%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 5.1761, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:6/10000(0.060)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  23, local model 26, internal_epoch   1,  Average loss: 0.0131, Accuracy: 1023/1311 (78.0320%), train_poison_data_count: 1311
Global model norm: 13.92053777949374.
Norm before scaling: 13.953595229338521. Distance: 1.7791429739929754
Total norm for 2 adversaries is: 13.953595229338521. distance: 1.7791429739929754
___Test Local_Simple poisoned: True, epoch: 23: Average loss: 10.1570, Accuracy: 1911/8991 (21.2546%)
___Train Local_Simple,  epoch  23, local model 86, internal_epoch   1,  Average loss: 0.0647, Accuracy: 18/34 (52.9412%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 2.1997, Accuracy: 2803/10000 (28.0300%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  23, local model 89, internal_epoch   1,  Average loss: 0.0649, Accuracy: 16/69 (23.1884%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 2.2050, Accuracy: 1833/10000 (18.3300%), Attack Success Rate:35/10000(0.350)
___Train Local_Simple,  epoch  23, local model 75, internal_epoch   1,  Average loss: 0.0180, Accuracy: 448/497 (90.1408%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 11.6232, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:10/10000(0.100)
time spent on training: 37.67883920669556
[foolsgold agg] training data poison_ratio: 0.3816897582178756  data num: [704, 114, 4, 94, 87, 767, 1311, 34, 69, 497]
[foolsgold agg] considering poison per batch poison_fraction: 0.3816897582178756
[foolsgold agg] wv: [0.         1.         1.         0.33841004 0.         1.
 0.87917046 0.87917046 1.         0.33841004]
___Test Target_Simple poisoned: False, epoch: 23: Average loss: 2.1967, Accuracy: 2984/10000 (29.8400%), Attack Success Rate:1/10000(0.010)
___Test Target_Simple poisoned: True, epoch: 23: Average loss: 2.1461, Accuracy: 2980/8991 (33.1443%)
Done in 125.859454870224 sec.
Server Epoch:24 choose agents : [36, 65, 96, 83, 63, 30, 94, 25, 52, 50].
___Train Local_Simple,  epoch  24, local model 36, internal_epoch   1,  Average loss: 0.0201, Accuracy: 251/304 (82.5658%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 10.6878, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  24, local model 65, internal_epoch   1,  Average loss: 0.0175, Accuracy: 1015/1326 (76.5460%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 3.6316, Accuracy: 1869/10000 (18.6900%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  24, local model 96, internal_epoch   1,  Average loss: 0.0339, Accuracy: 239/505 (47.3267%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 4.9587, Accuracy: 1922/10000 (19.2200%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  24, local model 83, internal_epoch   1,  Average loss: 0.0260, Accuracy: 475/750 (63.3333%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 3.2285, Accuracy: 958/10000 (9.5800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  24, local model 63, internal_epoch   1,  Average loss: 0.0090, Accuracy: 2778/3022 (91.9259%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 4.1575, Accuracy: 982/10000 (9.8200%), Attack Success Rate:7/10000(0.070)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  24, local model 30, internal_epoch   1,  Average loss: 0.0272, Accuracy: 421/818 (51.4670%), train_poison_data_count: 818
Global model norm: 13.92134067524709.
Norm before scaling: 13.919116019758022. Distance: 1.185598909596728
Total norm for 2 adversaries is: 13.919116019758022. distance: 1.185598909596728
___Test Local_Simple poisoned: True, epoch: 24: Average loss: 4.3941, Accuracy: 1850/8991 (20.5761%)
___Train Local_Simple,  epoch  24, local model 94, internal_epoch   1,  Average loss: 0.0259, Accuracy: 518/607 (85.3377%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 6.0363, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:12/10000(0.120)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  24, local model 25, internal_epoch   1,  Average loss: 0.0520, Accuracy: 36/128 (28.1250%), train_poison_data_count: 128
Global model norm: 13.92134067524709.
Norm before scaling: 13.918339307093458. Distance: 0.15154819740570347
Total norm for 2 adversaries is: 13.918339307093458. distance: 0.15154819740570347
___Test Local_Simple poisoned: True, epoch: 24: Average loss: 2.1283, Accuracy: 2936/8991 (32.6549%)
___Train Local_Simple,  epoch  24, local model 52, internal_epoch   1,  Average loss: 0.0118, Accuracy: 627/705 (88.9362%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 25.7220, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  24, local model 50, internal_epoch   1,  Average loss: 0.0248, Accuracy: 149/151 (98.6755%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 4.8366, Accuracy: 980/10000 (9.8000%), Attack Success Rate:3/10000(0.030)
time spent on training: 44.66183662414551
[foolsgold agg] training data poison_ratio: 0.11375661375661375  data num: [304, 1326, 505, 750, 3022, 818, 607, 128, 705, 151]
[foolsgold agg] considering poison per batch poison_fraction: 0.11375661375661375
[foolsgold agg] wv: [1.         0.87334485 0.74091926 0.78532039 0.74091926 1.
 1.         0.         0.         0.84746718]
___Test Target_Simple poisoned: False, epoch: 24: Average loss: 2.1824, Accuracy: 3133/10000 (31.3300%), Attack Success Rate:3/10000(0.030)
___Test Target_Simple poisoned: True, epoch: 24: Average loss: 2.1393, Accuracy: 3167/8991 (35.2241%)
Done in 133.14914989471436 sec.
Server Epoch:25 choose agents : [45, 6, 35, 17, 20, 73, 43, 8, 74, 3].
___Train Local_Simple,  epoch  25, local model 45, internal_epoch   1,  Average loss: 0.0265, Accuracy: 244/388 (62.8866%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 5.6879, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:6/10000(0.060)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 6, internal_epoch   1,  Average loss: 0.0149, Accuracy: 1459/1982 (73.6125%), train_poison_data_count: 1982
Global model norm: 13.92168264545145.
Norm before scaling: 13.919402137282153. Distance: 1.8586448710507744
Total norm for 5 adversaries is: 13.919402137282153. distance: 1.8586448710507744
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 4.9380, Accuracy: 2376/8991 (26.4264%)
___Train Local_Simple,  epoch  25, local model 35, internal_epoch   1,  Average loss: 0.0173, Accuracy: 841/978 (85.9918%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 4.6077, Accuracy: 1142/10000 (11.4200%), Attack Success Rate:12/10000(0.120)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 17, internal_epoch   1,  Average loss: 0.0392, Accuracy: 81/94 (86.1702%), train_poison_data_count: 94
Global model norm: 13.92168264545145.
Norm before scaling: 13.923298669841474. Distance: 0.143089546441365
Total norm for 5 adversaries is: 13.923298669841474. distance: 0.143089546441365
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 2.2083, Accuracy: 1056/8991 (11.7451%)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 20, internal_epoch   1,  Average loss: 0.0079, Accuracy: 1945/2180 (89.2202%), train_poison_data_count: 2180
Global model norm: 13.92168264545145.
Norm before scaling: 13.845698579003697. Distance: 1.636371657684202
Total norm for 5 adversaries is: 13.845698579003697. distance: 1.636371657684202
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 4.3628, Accuracy: 2000/8991 (22.2445%)
___Train Local_Simple,  epoch  25, local model 73, internal_epoch   1,  Average loss: 0.0189, Accuracy: 917/1205 (76.0996%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 5.0450, Accuracy: 958/10000 (9.5800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  25, local model 43, internal_epoch   1,  Average loss: 0.3216, Accuracy: 4/6 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 2.1867, Accuracy: 1547/10000 (15.4700%), Attack Success Rate:26/10000(0.260)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 8, internal_epoch   1,  Average loss: 0.0358, Accuracy: 122/171 (71.3450%), train_poison_data_count: 171
Global model norm: 13.92168264545145.
Norm before scaling: 13.931998086373358. Distance: 0.4172032556880419
Total norm for 5 adversaries is: 13.931998086373358. distance: 0.4172032556880419
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 3.3491, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  25, local model 74, internal_epoch   1,  Average loss: 0.0303, Accuracy: 421/762 (55.2493%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 3.7478, Accuracy: 966/10000 (9.6600%), Attack Success Rate:4/10000(0.040)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 3, internal_epoch   1,  Average loss: 0.0237, Accuracy: 642/1010 (63.5644%), train_poison_data_count: 1010
Global model norm: 13.92168264545145.
Norm before scaling: 13.930425790165659. Distance: 1.1929843144628698
Total norm for 5 adversaries is: 13.930425790165659. distance: 1.1929843144628698
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 5.5668, Accuracy: 2031/8991 (22.5893%)
time spent on training: 48.29457354545593
[foolsgold agg] training data poison_ratio: 0.6195305378304466  data num: [388, 1982, 978, 94, 2180, 1205, 6, 171, 762, 1010]
[foolsgold agg] considering poison per batch poison_fraction: 0.6195305378304466
[foolsgold agg] wv: [1.        1.        1.        1.        0.7196454 0.        0.7196454
 1.        0.        1.       ]
___Test Target_Simple poisoned: False, epoch: 25: Average loss: 2.1728, Accuracy: 3742/10000 (37.4200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 25: Average loss: 2.1193, Accuracy: 3755/8991 (41.7640%)
Done in 136.86977005004883 sec.
Server Epoch:26 choose agents : [39, 14, 32, 4, 30, 63, 23, 3, 94, 84].
___Train Local_Simple,  epoch  26, local model 39, internal_epoch   1,  Average loss: 0.0150, Accuracy: 1034/1259 (82.1287%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 4.2070, Accuracy: 958/10000 (9.5800%), Attack Success Rate:5/10000(0.050)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 14, internal_epoch   1,  Average loss: 0.0443, Accuracy: 2/48 (4.1667%), train_poison_data_count: 48
Global model norm: 13.924874510276677.
Norm before scaling: 13.924770409490824. Distance: 0.04762743015922539
Total norm for 6 adversaries is: 13.924770409490824. distance: 0.04762743015922539
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 2.1184, Accuracy: 4205/8991 (46.7690%)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 32, internal_epoch   1,  Average loss: 0.0662, Accuracy: 28/28 (100.0000%), train_poison_data_count: 28
Global model norm: 13.924874510276677.
Norm before scaling: 13.925466226275537. Distance: 0.06227732269702128
Total norm for 6 adversaries is: 13.925466226275537. distance: 0.06227732269702128
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 2.1315, Accuracy: 1780/8991 (19.7976%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 4, internal_epoch   1,  Average loss: 0.0196, Accuracy: 358/463 (77.3218%), train_poison_data_count: 463
Global model norm: 13.924874510276677.
Norm before scaling: 13.973774460777019. Distance: 1.267719795762428
Total norm for 6 adversaries is: 13.973774460777019. distance: 1.267719795762428
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 16.9717, Accuracy: 892/8991 (9.9210%)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 30, internal_epoch   1,  Average loss: 0.0249, Accuracy: 491/818 (60.0244%), train_poison_data_count: 818
Global model norm: 13.924874510276677.
Norm before scaling: 13.939426716601368. Distance: 1.1920377464782441
Total norm for 6 adversaries is: 13.939426716601368. distance: 1.1920377464782441
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 5.5925, Accuracy: 2845/8991 (31.6428%)
___Train Local_Simple,  epoch  26, local model 63, internal_epoch   1,  Average loss: 0.0086, Accuracy: 2787/3022 (92.2237%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 4.7172, Accuracy: 982/10000 (9.8200%), Attack Success Rate:10/10000(0.100)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 23, internal_epoch   1,  Average loss: 0.0201, Accuracy: 392/428 (91.5888%), train_poison_data_count: 428
Global model norm: 13.924874510276677.
Norm before scaling: 13.972566155880914. Distance: 0.8779214385496957
Total norm for 6 adversaries is: 13.972566155880914. distance: 0.8779214385496957
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 9.0094, Accuracy: 1903/8991 (21.1656%)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 3, internal_epoch   1,  Average loss: 0.0240, Accuracy: 612/1010 (60.5941%), train_poison_data_count: 1010
Global model norm: 13.924874510276677.
Norm before scaling: 13.929470606135306. Distance: 1.1808521509028427
Total norm for 6 adversaries is: 13.929470606135306. distance: 1.1808521509028427
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 5.3022, Accuracy: 2021/8991 (22.4780%)
___Train Local_Simple,  epoch  26, local model 94, internal_epoch   1,  Average loss: 0.0201, Accuracy: 538/607 (88.6326%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 9.4206, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch  26, local model 84, internal_epoch   1,  Average loss: 0.0849, Accuracy: 1/29 (3.4483%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 2.1639, Accuracy: 4740/10000 (47.4000%), Attack Success Rate:0/10000(0.000)
time spent on training: 51.88447189331055
[foolsgold agg] training data poison_ratio: 0.36242219917012447  data num: [1259, 48, 28, 463, 818, 3022, 428, 1010, 607, 29]
[foolsgold agg] considering poison per batch poison_fraction: 0.36242219917012447
[foolsgold agg] wv: [1.         0.         0.65790704 0.24236409 0.24236409 0.
 1.         1.         0.         0.        ]
___Test Target_Simple poisoned: False, epoch: 26: Average loss: 2.1652, Accuracy: 3647/10000 (36.4700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 26: Average loss: 2.1057, Accuracy: 3672/8991 (40.8408%)
Done in 140.7170970439911 sec.
Server Epoch:27 choose agents : [69, 2, 42, 25, 17, 37, 45, 54, 30, 0].
___Train Local_Simple,  epoch  27, local model 69, internal_epoch   1,  Average loss: 0.0171, Accuracy: 515/586 (87.8840%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 6.0429, Accuracy: 1793/10000 (17.9300%), Attack Success Rate:30/10000(0.300)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 2, internal_epoch   1,  Average loss: 0.0512, Accuracy: 46/119 (38.6555%), train_poison_data_count: 119
Global model norm: 13.926206931607512.
Norm before scaling: 13.92599546206213. Distance: 0.2194675275015456
Total norm for 4 adversaries is: 13.92599546206213. distance: 0.2194675275015456
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 2.1763, Accuracy: 1365/8991 (15.1818%)
___Train Local_Simple,  epoch  27, local model 42, internal_epoch   1,  Average loss: 0.0548, Accuracy: 57/63 (90.4762%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 2.3412, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:5/10000(0.050)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 25, internal_epoch   1,  Average loss: 0.0520, Accuracy: 38/128 (29.6875%), train_poison_data_count: 128
Global model norm: 13.926206931607512.
Norm before scaling: 13.923414288675804. Distance: 0.16007578968636446
Total norm for 4 adversaries is: 13.923414288675804. distance: 0.16007578968636446
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 2.0873, Accuracy: 3073/8991 (34.1786%)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 17, internal_epoch   1,  Average loss: 0.0379, Accuracy: 82/94 (87.2340%), train_poison_data_count: 94
Global model norm: 13.926206931607512.
Norm before scaling: 13.92828255937217. Distance: 0.15247311967857438
Total norm for 4 adversaries is: 13.92828255937217. distance: 0.15247311967857438
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 2.2072, Accuracy: 1042/8991 (11.5894%)
___Train Local_Simple,  epoch  27, local model 37, internal_epoch   1,  Average loss: 0.0258, Accuracy: 357/578 (61.7647%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 6.0373, Accuracy: 1364/10000 (13.6400%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  27, local model 45, internal_epoch   1,  Average loss: 0.0243, Accuracy: 270/388 (69.5876%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 5.9555, Accuracy: 1904/10000 (19.0400%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch  27, local model 54, internal_epoch   1,  Average loss: 0.0500, Accuracy: 21/91 (23.0769%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 2.1655, Accuracy: 2927/10000 (29.2700%), Attack Success Rate:7/10000(0.070)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 30, internal_epoch   1,  Average loss: 0.0242, Accuracy: 501/818 (61.2469%), train_poison_data_count: 818
Global model norm: 13.926206931607512.
Norm before scaling: 13.945802687463216. Distance: 1.2069528795002915
Total norm for 4 adversaries is: 13.945802687463216. distance: 1.2069528795002915
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 6.6129, Accuracy: 1879/8991 (20.8987%)
___Train Local_Simple,  epoch  27, local model 0, internal_epoch   1,  Average loss: 0.0289, Accuracy: 216/300 (72.0000%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 5.5099, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:7/10000(0.070)
time spent on training: 42.26018929481506
[foolsgold agg] training data poison_ratio: 0.3661927330173776  data num: [586, 119, 63, 128, 94, 578, 388, 91, 818, 300]
[foolsgold agg] considering poison per batch poison_fraction: 0.36619273301737754
[foolsgold agg] wv: [1. 0. 0. 0. 0. 1. 1. 1. 1. 1.]
___Test Target_Simple poisoned: False, epoch: 27: Average loss: 2.1581, Accuracy: 4054/10000 (40.5400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 27: Average loss: 2.0896, Accuracy: 4071/8991 (45.2786%)
Done in 130.5979082584381 sec.
Server Epoch:28 choose agents : [33, 51, 17, 63, 6, 24, 82, 35, 80, 81].
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 33, internal_epoch   1,  Average loss: 0.0256, Accuracy: 361/644 (56.0559%), train_poison_data_count: 644
Global model norm: 13.927711231093168.
Norm before scaling: 13.956452898736428. Distance: 1.0243811297509673
Total norm for 4 adversaries is: 13.956452898736428. distance: 1.0243811297509673
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 6.6892, Accuracy: 1533/8991 (17.0504%)
___Train Local_Simple,  epoch  28, local model 51, internal_epoch   1,  Average loss: 0.0257, Accuracy: 204/259 (78.7645%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 4.8189, Accuracy: 980/10000 (9.8000%), Attack Success Rate:7/10000(0.070)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 17, internal_epoch   1,  Average loss: 0.0367, Accuracy: 85/94 (90.4255%), train_poison_data_count: 94
Global model norm: 13.927711231093168.
Norm before scaling: 13.93015632974353. Distance: 0.15505769724790333
Total norm for 4 adversaries is: 13.93015632974353. distance: 0.15505769724790333
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 2.2155, Accuracy: 1016/8991 (11.3002%)
___Train Local_Simple,  epoch  28, local model 63, internal_epoch   1,  Average loss: 0.0077, Accuracy: 2779/3022 (91.9590%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 4.1035, Accuracy: 982/10000 (9.8200%), Attack Success Rate:9/10000(0.090)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 6, internal_epoch   1,  Average loss: 0.0127, Accuracy: 1563/1982 (78.8597%), train_poison_data_count: 1982
Global model norm: 13.927711231093168.
Norm before scaling: 13.933591012229897. Distance: 1.7822021482702781
Total norm for 4 adversaries is: 13.933591012229897. distance: 1.7822021482702781
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 8.9334, Accuracy: 2461/8991 (27.3718%)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 24, internal_epoch   1,  Average loss: 0.4094, Accuracy: 1/5 (20.0000%), train_poison_data_count: 5
Global model norm: 13.927711231093168.
Norm before scaling: 13.927712326663588. Distance: 0.04641486368128329
Total norm for 4 adversaries is: 13.927712326663588. distance: 0.04641486368128329
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 2.0923, Accuracy: 4447/8991 (49.4606%)
___Train Local_Simple,  epoch  28, local model 82, internal_epoch   1,  Average loss: 0.0485, Accuracy: 59/114 (51.7544%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 2.4230, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  28, local model 35, internal_epoch   1,  Average loss: 0.0147, Accuracy: 873/978 (89.2638%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 4.6147, Accuracy: 1236/10000 (12.3600%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  28, local model 80, internal_epoch   1,  Average loss: 0.0534, Accuracy: 21/84 (25.0000%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 2.2010, Accuracy: 1048/10000 (10.4800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  28, local model 81, internal_epoch   1,  Average loss: 0.0698, Accuracy: 3/68 (4.4118%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 2.1562, Accuracy: 1725/10000 (17.2500%), Attack Success Rate:29/10000(0.290)
time spent on training: 46.85768151283264
[foolsgold agg] training data poison_ratio: 0.3758620689655172  data num: [644, 259, 94, 3022, 1982, 5, 114, 978, 84, 68]
[foolsgold agg] considering poison per batch poison_fraction: 0.3758620689655172
[foolsgold agg] wv: [0.91229198 0.         0.26509521 1.         0.26509521 0.
 0.         1.         0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 28: Average loss: 2.1457, Accuracy: 4110/10000 (41.1000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 28: Average loss: 2.0856, Accuracy: 4104/8991 (45.6456%)
Done in 135.277104139328 sec.
Server Epoch:29 choose agents : [58, 90, 30, 72, 41, 25, 16, 91, 50, 57].
___Train Local_Simple,  epoch  29, local model 58, internal_epoch   1,  Average loss: 0.0253, Accuracy: 632/1015 (62.2660%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 6.4415, Accuracy: 1410/10000 (14.1000%), Attack Success Rate:22/10000(0.220)
___Train Local_Simple,  epoch  29, local model 90, internal_epoch   1,  Average loss: 0.0159, Accuracy: 662/768 (86.1979%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 5.2042, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:7/10000(0.070)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  29, local model 30, internal_epoch   1,  Average loss: 0.0244, Accuracy: 525/818 (64.1809%), train_poison_data_count: 818
Global model norm: 13.928071121340988.
Norm before scaling: 13.943730214855977. Distance: 1.162729767683431
Total norm for 3 adversaries is: 13.943730214855977. distance: 1.162729767683431
___Test Local_Simple poisoned: True, epoch: 29: Average loss: 5.6361, Accuracy: 1843/8991 (20.4983%)
___Train Local_Simple,  epoch  29, local model 72, internal_epoch   1,  Average loss: 0.2095, Accuracy: 6/10 (60.0000%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 2.1498, Accuracy: 2585/10000 (25.8500%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  29, local model 41, internal_epoch   1,  Average loss: 0.0235, Accuracy: 321/509 (63.0648%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 6.4843, Accuracy: 974/10000 (9.7400%), Attack Success Rate:7/10000(0.070)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  29, local model 25, internal_epoch   1,  Average loss: 0.0513, Accuracy: 37/128 (28.9062%), train_poison_data_count: 128
Global model norm: 13.928071121340988.
Norm before scaling: 13.925593332357625. Distance: 0.1641831068236064
Total norm for 3 adversaries is: 13.925593332357625. distance: 0.1641831068236064
___Test Local_Simple poisoned: True, epoch: 29: Average loss: 2.0693, Accuracy: 3442/8991 (38.2827%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  29, local model 16, internal_epoch   1,  Average loss: 0.0212, Accuracy: 696/994 (70.0201%), train_poison_data_count: 994
Global model norm: 13.928071121340988.
Norm before scaling: 13.95320264361096. Distance: 1.1068392504320568
Total norm for 3 adversaries is: 13.95320264361096. distance: 1.1068392504320568
___Test Local_Simple poisoned: True, epoch: 29: Average loss: 2.7053, Accuracy: 2041/8991 (22.7005%)
___Train Local_Simple,  epoch  29, local model 91, internal_epoch   1,  Average loss: 0.0418, Accuracy: 92/182 (50.5495%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 2.5530, Accuracy: 958/10000 (9.5800%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  29, local model 50, internal_epoch   1,  Average loss: 0.0226, Accuracy: 149/151 (98.6755%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 4.9008, Accuracy: 980/10000 (9.8000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  29, local model 57, internal_epoch   1,  Average loss: 0.0174, Accuracy: 1074/1437 (74.7390%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 6.5737, Accuracy: 3058/10000 (30.5800%), Attack Success Rate:2/10000(0.020)
time spent on training: 43.803823471069336
[foolsgold agg] training data poison_ratio: 0.3226879574184963  data num: [1015, 768, 818, 10, 509, 128, 994, 182, 151, 1437]
[foolsgold agg] considering poison per batch poison_fraction: 0.3226879574184963
[foolsgold agg] wv: [0.12938226 0.18717189 1.         0.18717189 0.12938226 0.60308458
 0.89368066 0.54460146 1.         0.89368066]
___Test Target_Simple poisoned: False, epoch: 29: Average loss: 2.1309, Accuracy: 3792/10000 (37.9200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 29: Average loss: 2.0616, Accuracy: 3782/8991 (42.0643%)
Done in 132.19997835159302 sec.
Server Epoch:30 choose agents : [50, 77, 73, 21, 10, 8, 40, 52, 45, 30].
___Train Local_Simple,  epoch  30, local model 50, internal_epoch   1,  Average loss: 0.0199, Accuracy: 149/151 (98.6755%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 5.2061, Accuracy: 980/10000 (9.8000%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  30, local model 77, internal_epoch   1,  Average loss: 0.0164, Accuracy: 1197/1544 (77.5259%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 4.8770, Accuracy: 2915/10000 (29.1500%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  30, local model 73, internal_epoch   1,  Average loss: 0.0189, Accuracy: 880/1205 (73.0290%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 2.8346, Accuracy: 958/10000 (9.5800%), Attack Success Rate:5/10000(0.050)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 21, internal_epoch   1,  Average loss: 0.0113, Accuracy: 1725/2072 (83.2529%), train_poison_data_count: 2072
Global model norm: 13.930707841731506.
Norm before scaling: 13.919606033537955. Distance: 2.005410386511663
Total norm for 4 adversaries is: 13.919606033537955. distance: 2.005410386511663
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 7.4414, Accuracy: 2598/8991 (28.8956%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 10, internal_epoch   1,  Average loss: 0.0214, Accuracy: 423/688 (61.4826%), train_poison_data_count: 688
Global model norm: 13.930707841731506.
Norm before scaling: 13.955828055645785. Distance: 0.991437733828915
Total norm for 4 adversaries is: 13.955828055645785. distance: 0.991437733828915
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 6.0446, Accuracy: 2482/8991 (27.6054%)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 8, internal_epoch   1,  Average loss: 0.0319, Accuracy: 139/171 (81.2865%), train_poison_data_count: 171
Global model norm: 13.930707841731506.
Norm before scaling: 13.943358691036893. Distance: 0.433651980364841
Total norm for 4 adversaries is: 13.943358691036893. distance: 0.433651980364841
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 3.8958, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  30, local model 40, internal_epoch   1,  Average loss: 0.0312, Accuracy: 211/436 (48.3945%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 4.4327, Accuracy: 1947/10000 (19.4700%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  30, local model 52, internal_epoch   1,  Average loss: 0.0108, Accuracy: 637/705 (90.3546%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 21.3420, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  30, local model 45, internal_epoch   1,  Average loss: 0.0233, Accuracy: 268/388 (69.0722%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 6.1338, Accuracy: 1927/10000 (19.2700%), Attack Success Rate:37/10000(0.370)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 30, internal_epoch   1,  Average loss: 0.0228, Accuracy: 519/818 (63.4474%), train_poison_data_count: 818
Global model norm: 13.930707841731506.
Norm before scaling: 13.952005134231603. Distance: 1.178155877394243
Total norm for 4 adversaries is: 13.952005134231603. distance: 1.178155877394243
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 6.0496, Accuracy: 2840/8991 (31.5871%)
time spent on training: 47.51188039779663
[foolsgold agg] training data poison_ratio: 0.45842504279775004  data num: [151, 1544, 1205, 2072, 688, 171, 436, 705, 388, 818]
[foolsgold agg] considering poison per batch poison_fraction: 0.4584250427977501
[foolsgold agg] wv: [0.49117635 1.         0.66382366 0.66382366 0.49117635 0.87838459
 1.         1.         0.87838459 1.        ]
___Test Target_Simple poisoned: False, epoch: 30: Average loss: 2.1015, Accuracy: 4234/10000 (42.3400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 30: Average loss: 2.0361, Accuracy: 4230/8991 (47.0470%)
Done in 136.37962007522583 sec.
Server Epoch:31 choose agents : [74, 9, 99, 85, 4, 11, 24, 42, 23, 25].
___Train Local_Simple,  epoch  31, local model 74, internal_epoch   1,  Average loss: 0.0294, Accuracy: 448/762 (58.7927%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 3.9283, Accuracy: 958/10000 (9.5800%), Attack Success Rate:3/10000(0.030)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 9, internal_epoch   1,  Average loss: 0.0297, Accuracy: 181/263 (68.8213%), train_poison_data_count: 263
Global model norm: 13.933703260363039.
Norm before scaling: 13.956447432164024. Distance: 0.6567316331491461
Total norm for 6 adversaries is: 13.956447432164024. distance: 0.6567316331491461
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 5.4382, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  31, local model 99, internal_epoch   1,  Average loss: 0.0102, Accuracy: 397/411 (96.5937%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 12.8003, Accuracy: 980/10000 (9.8000%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  31, local model 85, internal_epoch   1,  Average loss: 0.4701, Accuracy: 3/4 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 2.1065, Accuracy: 3086/10000 (30.8600%), Attack Success Rate:3/10000(0.030)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 4, internal_epoch   1,  Average loss: 0.0147, Accuracy: 396/463 (85.5292%), train_poison_data_count: 463
Global model norm: 13.933703260363039.
Norm before scaling: 13.986243437505443. Distance: 1.2620573740913492
Total norm for 6 adversaries is: 13.986243437505443. distance: 1.2620573740913492
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 19.2897, Accuracy: 892/8991 (9.9210%)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 11, internal_epoch   1,  Average loss: 0.0453, Accuracy: 47/84 (55.9524%), train_poison_data_count: 84
Global model norm: 13.933703260363039.
Norm before scaling: 13.93464337142045. Distance: 0.1301753471235633
Total norm for 6 adversaries is: 13.93464337142045. distance: 0.1301753471235633
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 2.0866, Accuracy: 1705/8991 (18.9634%)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 24, internal_epoch   1,  Average loss: 0.4026, Accuracy: 1/5 (20.0000%), train_poison_data_count: 5
Global model norm: 13.933703260363039.
Norm before scaling: 13.933817697772769. Distance: 0.04996628816896848
Total norm for 6 adversaries is: 13.933817697772769. distance: 0.04996628816896848
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 2.0391, Accuracy: 3949/8991 (43.9217%)
___Train Local_Simple,  epoch  31, local model 42, internal_epoch   1,  Average loss: 0.0496, Accuracy: 61/63 (96.8254%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 2.4186, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:3/10000(0.030)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 23, internal_epoch   1,  Average loss: 0.0176, Accuracy: 404/428 (94.3925%), train_poison_data_count: 428
Global model norm: 13.933703260363039.
Norm before scaling: 13.985538097581596. Distance: 0.8954474076227301
Total norm for 6 adversaries is: 13.985538097581596. distance: 0.8954474076227301
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 9.6621, Accuracy: 1952/8991 (21.7106%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 25, internal_epoch   1,  Average loss: 0.0484, Accuracy: 47/128 (36.7188%), train_poison_data_count: 128
Global model norm: 13.933703260363039.
Norm before scaling: 13.933133797076183. Distance: 0.16998301973459215
Total norm for 6 adversaries is: 13.933133797076183. distance: 0.16998301973459215
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 2.0442, Accuracy: 1810/8991 (20.1312%)
time spent on training: 45.7033634185791
[foolsgold agg] training data poison_ratio: 0.5250861738797395  data num: [762, 263, 411, 4, 463, 84, 5, 63, 428, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.5250861738797395
[foolsgold agg] wv: [1.         0.         0.55036655 0.         0.         0.
 1.         0.         0.         0.68791581]
___Test Target_Simple poisoned: False, epoch: 31: Average loss: 2.0921, Accuracy: 4378/10000 (43.7800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 31: Average loss: 2.0286, Accuracy: 4381/8991 (48.7265%)
Done in 133.94371676445007 sec.
Server Epoch:32 choose agents : [93, 87, 55, 70, 15, 90, 91, 86, 67, 20].
___Train Local_Simple,  epoch  32, local model 93, internal_epoch   1,  Average loss: 0.0666, Accuracy: 16/30 (53.3333%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 2.1026, Accuracy: 2538/10000 (25.3800%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  32, local model 87, internal_epoch   1,  Average loss: 0.0581, Accuracy: 28/33 (84.8485%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 2.0904, Accuracy: 4512/10000 (45.1200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  32, local model 55, internal_epoch   1,  Average loss: 0.0138, Accuracy: 2199/2803 (78.4517%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 4.0824, Accuracy: 4623/10000 (46.2300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  32, local model 70, internal_epoch   1,  Average loss: 0.0360, Accuracy: 235/569 (41.3005%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 3.2596, Accuracy: 1820/10000 (18.2000%), Attack Success Rate:36/10000(0.360)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  32, local model 15, internal_epoch   1,  Average loss: 0.0243, Accuracy: 604/1033 (58.4705%), train_poison_data_count: 1033
Global model norm: 13.933727352527404.
Norm before scaling: 13.987613648199218. Distance: 1.4293269969250542
Total norm for 2 adversaries is: 13.987613648199218. distance: 1.4293269969250542
___Test Local_Simple poisoned: True, epoch: 32: Average loss: 7.6216, Accuracy: 2766/8991 (30.7641%)
___Train Local_Simple,  epoch  32, local model 90, internal_epoch   1,  Average loss: 0.0152, Accuracy: 667/768 (86.8490%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 4.9009, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  32, local model 91, internal_epoch   1,  Average loss: 0.0381, Accuracy: 109/182 (59.8901%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 2.7696, Accuracy: 958/10000 (9.5800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  32, local model 86, internal_epoch   1,  Average loss: 0.0605, Accuracy: 15/34 (44.1176%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 2.0944, Accuracy: 2981/10000 (29.8100%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  32, local model 67, internal_epoch   1,  Average loss: 0.0318, Accuracy: 312/568 (54.9296%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 2.8584, Accuracy: 2524/10000 (25.2400%), Attack Success Rate:19/10000(0.190)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  32, local model 20, internal_epoch   1,  Average loss: 0.0063, Accuracy: 2008/2180 (92.1101%), train_poison_data_count: 2180
Global model norm: 13.933727352527404.
Norm before scaling: 13.855985241994421. Distance: 1.5536695818908837
Total norm for 2 adversaries is: 13.855985241994421. distance: 1.5536695818908837
___Test Local_Simple poisoned: True, epoch: 32: Average loss: 5.1801, Accuracy: 2163/8991 (24.0574%)
time spent on training: 43.37620162963867
[foolsgold agg] training data poison_ratio: 0.39182926829268294  data num: [30, 33, 2803, 569, 1033, 768, 182, 34, 568, 2180]
[foolsgold agg] considering poison per batch poison_fraction: 0.39182926829268294
[foolsgold agg] wv: [0.         0.73308882 1.         0.55176677 0.55176677 0.
 1.         1.         1.         0.73308882]
___Test Target_Simple poisoned: False, epoch: 32: Average loss: 2.0674, Accuracy: 4634/10000 (46.3400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 32: Average loss: 2.0022, Accuracy: 4649/8991 (51.7073%)
Done in 133.03340601921082 sec.
Server Epoch:33 choose agents : [77, 57, 21, 67, 14, 97, 28, 22, 70, 93].
___Train Local_Simple,  epoch  33, local model 77, internal_epoch   1,  Average loss: 0.0153, Accuracy: 1220/1544 (79.0155%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 4.7167, Accuracy: 2819/10000 (28.1900%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  33, local model 57, internal_epoch   1,  Average loss: 0.0163, Accuracy: 1059/1437 (73.6952%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 3.5434, Accuracy: 2632/10000 (26.3200%), Attack Success Rate:15/10000(0.150)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 21, internal_epoch   1,  Average loss: 0.0108, Accuracy: 1765/2072 (85.1834%), train_poison_data_count: 2072
Global model norm: 13.937308408506576.
Norm before scaling: 13.921104469768306. Distance: 1.9513029831529924
Total norm for 4 adversaries is: 13.921104469768306. distance: 1.9513029831529924
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 5.6641, Accuracy: 2749/8991 (30.5750%)
___Train Local_Simple,  epoch  33, local model 67, internal_epoch   1,  Average loss: 0.0304, Accuracy: 326/568 (57.3944%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 3.1139, Accuracy: 2749/10000 (27.4900%), Attack Success Rate:8/10000(0.080)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 14, internal_epoch   1,  Average loss: 0.0421, Accuracy: 38/48 (79.1667%), train_poison_data_count: 48
Global model norm: 13.937308408506576.
Norm before scaling: 13.937511495405854. Distance: 0.05588805781068256
Total norm for 4 adversaries is: 13.937511495405854. distance: 0.05588805781068256
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 2.0020, Accuracy: 4266/8991 (47.4474%)
___Train Local_Simple,  epoch  33, local model 97, internal_epoch   1,  Average loss: 0.3602, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 2.0979, Accuracy: 1972/10000 (19.7200%), Attack Success Rate:30/10000(0.300)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 28, internal_epoch   1,  Average loss: 0.0308, Accuracy: 156/237 (65.8228%), train_poison_data_count: 237
Global model norm: 13.937308408506576.
Norm before scaling: 13.94942111656626. Distance: 0.5467996272870672
Total norm for 4 adversaries is: 13.94942111656626. distance: 0.5467996272870672
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 4.3538, Accuracy: 1032/8991 (11.4781%)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 22, internal_epoch   1,  Average loss: 0.0574, Accuracy: 25/34 (73.5294%), train_poison_data_count: 34
Global model norm: 13.937308408506576.
Norm before scaling: 13.937651081720379. Distance: 0.04962267528422884
Total norm for 4 adversaries is: 13.937651081720379. distance: 0.04962267528422884
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 2.0117, Accuracy: 2716/8991 (30.2080%)
___Train Local_Simple,  epoch  33, local model 70, internal_epoch   1,  Average loss: 0.0359, Accuracy: 277/569 (48.6819%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 3.1102, Accuracy: 2457/10000 (24.5700%), Attack Success Rate:18/10000(0.180)
___Train Local_Simple,  epoch  33, local model 93, internal_epoch   1,  Average loss: 0.0654, Accuracy: 19/30 (63.3333%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 2.0805, Accuracy: 2226/10000 (22.2600%), Attack Success Rate:26/10000(0.260)
time spent on training: 46.34464740753174
[foolsgold agg] training data poison_ratio: 0.3653728606356968  data num: [1544, 1437, 2072, 568, 48, 5, 237, 34, 569, 30]
[foolsgold agg] considering poison per batch poison_fraction: 0.3653728606356968
[foolsgold agg] wv: [1.         0.75817889 0.75817889 1.         1.         1.
 1.         0.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 33: Average loss: 2.0399, Accuracy: 4982/10000 (49.8200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 33: Average loss: 1.9775, Accuracy: 5060/8991 (56.2785%)
Done in 134.95350122451782 sec.
Server Epoch:34 choose agents : [37, 49, 41, 50, 71, 60, 42, 83, 26, 48].
___Train Local_Simple,  epoch  34, local model 37, internal_epoch   1,  Average loss: 0.0236, Accuracy: 349/578 (60.3806%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 5.7950, Accuracy: 1979/10000 (19.7900%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  34, local model 49, internal_epoch   1,  Average loss: 0.0223, Accuracy: 182/196 (92.8571%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 4.7571, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  34, local model 41, internal_epoch   1,  Average loss: 0.0225, Accuracy: 340/509 (66.7976%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 7.4162, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  34, local model 50, internal_epoch   1,  Average loss: 0.0182, Accuracy: 149/151 (98.6755%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 5.5056, Accuracy: 980/10000 (9.8000%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  34, local model 71, internal_epoch   1,  Average loss: 0.0364, Accuracy: 153/342 (44.7368%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 3.1628, Accuracy: 892/10000 (8.9200%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch  34, local model 60, internal_epoch   1,  Average loss: 0.0239, Accuracy: 296/399 (74.1855%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 8.5542, Accuracy: 1471/10000 (14.7100%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  34, local model 42, internal_epoch   1,  Average loss: 0.0525, Accuracy: 54/63 (85.7143%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 2.3141, Accuracy: 1019/10000 (10.1900%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  34, local model 83, internal_epoch   1,  Average loss: 0.0245, Accuracy: 525/750 (70.0000%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 2.9845, Accuracy: 2017/10000 (20.1700%), Attack Success Rate:35/10000(0.350)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  34, local model 26, internal_epoch   1,  Average loss: 0.0101, Accuracy: 1099/1311 (83.8291%), train_poison_data_count: 1311
Global model norm: 13.940462764025996.
Norm before scaling: 13.968215829761396. Distance: 1.6932522960981264
Total norm for 1 adversaries is: 13.968215829761396. distance: 1.6932522960981264
___Test Local_Simple poisoned: True, epoch: 34: Average loss: 7.3446, Accuracy: 1929/8991 (21.4548%)
___Train Local_Simple,  epoch  34, local model 48, internal_epoch   1,  Average loss: 0.0461, Accuracy: 73/128 (57.0312%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 2.1795, Accuracy: 1972/10000 (19.7200%), Attack Success Rate:28/10000(0.280)
time spent on training: 37.20997357368469
[foolsgold agg] training data poison_ratio: 0.296137339055794  data num: [578, 196, 509, 151, 342, 399, 63, 750, 1311, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.296137339055794
[foolsgold agg] wv: [0.         1.         0.05203869 1.         1.         0.
 0.89177904 0.32027335 0.89177904 1.        ]
___Test Target_Simple poisoned: False, epoch: 34: Average loss: 2.0307, Accuracy: 4934/10000 (49.3400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 34: Average loss: 1.9574, Accuracy: 4989/8991 (55.4888%)
Done in 125.50257420539856 sec.
Server Epoch:35 choose agents : [50, 36, 53, 79, 33, 25, 15, 1, 65, 98].
___Train Local_Simple,  epoch  35, local model 50, internal_epoch   1,  Average loss: 0.0175, Accuracy: 148/151 (98.0132%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 5.6542, Accuracy: 980/10000 (9.8000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  35, local model 36, internal_epoch   1,  Average loss: 0.0185, Accuracy: 246/304 (80.9211%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 11.4329, Accuracy: 974/10000 (9.7400%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch  35, local model 53, internal_epoch   1,  Average loss: 0.0218, Accuracy: 404/456 (88.5965%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 10.7886, Accuracy: 2054/10000 (20.5400%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  35, local model 79, internal_epoch   1,  Average loss: 0.0875, Accuracy: 6/25 (24.0000%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 2.0299, Accuracy: 4546/10000 (45.4600%), Attack Success Rate:0/10000(0.000)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 33, internal_epoch   1,  Average loss: 0.0210, Accuracy: 455/644 (70.6522%), train_poison_data_count: 644
Global model norm: 13.942596461697871.
Norm before scaling: 13.994506303011875. Distance: 1.0728366908416511
Total norm for 4 adversaries is: 13.994506303011875. distance: 1.0728366908416511
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 9.2953, Accuracy: 1837/8991 (20.4315%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 25, internal_epoch   1,  Average loss: 0.0457, Accuracy: 64/128 (50.0000%), train_poison_data_count: 128
Global model norm: 13.942596461697871.
Norm before scaling: 13.94389545496467. Distance: 0.18236419165993684
Total norm for 4 adversaries is: 13.94389545496467. distance: 0.18236419165993684
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 2.0048, Accuracy: 1339/8991 (14.8927%)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 15, internal_epoch   1,  Average loss: 0.0219, Accuracy: 646/1033 (62.5363%), train_poison_data_count: 1033
Global model norm: 13.942596461697871.
Norm before scaling: 14.007048875937095. Distance: 1.4249659885563868
Total norm for 4 adversaries is: 14.007048875937095. distance: 1.4249659885563868
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 7.6758, Accuracy: 2667/8991 (29.6630%)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 1, internal_epoch   1,  Average loss: 0.0487, Accuracy: 30/84 (35.7143%), train_poison_data_count: 84
Global model norm: 13.942596461697871.
Norm before scaling: 13.942789074912522. Distance: 0.11223611396670208
Total norm for 4 adversaries is: 13.942789074912522. distance: 0.11223611396670208
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 1.9829, Accuracy: 2781/8991 (30.9309%)
___Train Local_Simple,  epoch  35, local model 65, internal_epoch   1,  Average loss: 0.0139, Accuracy: 1108/1326 (83.5596%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 3.4831, Accuracy: 1947/10000 (19.4700%), Attack Success Rate:39/10000(0.390)
___Train Local_Simple,  epoch  35, local model 98, internal_epoch   1,  Average loss: 0.2812, Accuracy: 5/6 (83.3333%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 2.0392, Accuracy: 4013/10000 (40.1300%), Attack Success Rate:0/10000(0.000)
time spent on training: 42.88190960884094
[foolsgold agg] training data poison_ratio: 0.45441424103921096  data num: [151, 304, 456, 25, 644, 128, 1033, 84, 1326, 6]
[foolsgold agg] considering poison per batch poison_fraction: 0.4544142410392109
[foolsgold agg] wv: [1.         0.         0.         0.         0.17941237 1.
 0.         0.17941237 0.         0.        ]
___Test Target_Simple poisoned: False, epoch: 35: Average loss: 2.0265, Accuracy: 4881/10000 (48.8100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 35: Average loss: 1.9490, Accuracy: 4913/8991 (54.6435%)
Done in 132.16304993629456 sec.
Server Epoch:36 choose agents : [82, 4, 79, 32, 47, 44, 89, 48, 70, 77].
___Train Local_Simple,  epoch  36, local model 82, internal_epoch   1,  Average loss: 0.0401, Accuracy: 89/114 (78.0702%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 2.6764, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:13/10000(0.130)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  36, local model 4, internal_epoch   1,  Average loss: 0.0178, Accuracy: 399/463 (86.1771%), train_poison_data_count: 463
Global model norm: 13.942999195384758.
Norm before scaling: 13.984500479534812. Distance: 1.2338739657903477
Total norm for 2 adversaries is: 13.984500479534812. distance: 1.2338739657903477
___Test Local_Simple poisoned: True, epoch: 36: Average loss: 15.3125, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  36, local model 79, internal_epoch   1,  Average loss: 0.0883, Accuracy: 5/25 (20.0000%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 2.0247, Accuracy: 4434/10000 (44.3400%), Attack Success Rate:0/10000(0.000)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  36, local model 32, internal_epoch   1,  Average loss: 0.0596, Accuracy: 27/28 (96.4286%), train_poison_data_count: 28
Global model norm: 13.942999195384758.
Norm before scaling: 13.944156989942284. Distance: 0.0783436219686429
Total norm for 2 adversaries is: 13.944156989942284. distance: 0.0783436219686429
___Test Local_Simple poisoned: True, epoch: 36: Average loss: 1.9829, Accuracy: 1867/8991 (20.7652%)
___Train Local_Simple,  epoch  36, local model 47, internal_epoch   1,  Average loss: 0.0104, Accuracy: 2227/2519 (88.4081%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 4.3472, Accuracy: 3735/10000 (37.3500%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  36, local model 44, internal_epoch   1,  Average loss: 0.0442, Accuracy: 9/47 (19.1489%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 2.0422, Accuracy: 3075/10000 (30.7500%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  36, local model 89, internal_epoch   1,  Average loss: 0.0568, Accuracy: 38/69 (55.0725%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 2.0783, Accuracy: 1568/10000 (15.6800%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  36, local model 48, internal_epoch   1,  Average loss: 0.0453, Accuracy: 72/128 (56.2500%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 2.2091, Accuracy: 1963/10000 (19.6300%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  36, local model 70, internal_epoch   1,  Average loss: 0.0344, Accuracy: 287/569 (50.4394%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 3.2545, Accuracy: 2336/10000 (23.3600%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch  36, local model 77, internal_epoch   1,  Average loss: 0.0137, Accuracy: 1266/1544 (81.9948%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 4.9697, Accuracy: 3045/10000 (30.4500%), Attack Success Rate:6/10000(0.060)
time spent on training: 42.56549668312073
[foolsgold agg] training data poison_ratio: 0.08917544496912459  data num: [114, 463, 25, 28, 2519, 47, 69, 128, 569, 1544]
[foolsgold agg] considering poison per batch poison_fraction: 0.08917544496912459
[foolsgold agg] wv: [0.         0.         1.         1.         0.67507588 1.
 0.         0.         1.         0.7212431 ]
___Test Target_Simple poisoned: False, epoch: 36: Average loss: 2.0113, Accuracy: 5079/10000 (50.7900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 36: Average loss: 1.9303, Accuracy: 5125/8991 (57.0014%)
Done in 130.7466526031494 sec.
Server Epoch:37 choose agents : [27, 30, 33, 41, 5, 52, 84, 43, 62, 18].
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 27, internal_epoch   1,  Average loss: 0.0159, Accuracy: 591/678 (87.1681%), train_poison_data_count: 678
Global model norm: 13.944745699265638.
Norm before scaling: 13.936989265971496. Distance: 1.0670951881529707
Total norm for 5 adversaries is: 13.936989265971496. distance: 1.0670951881529707
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 4.2985, Accuracy: 1025/8991 (11.4003%)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 30, internal_epoch   1,  Average loss: 0.0204, Accuracy: 538/818 (65.7702%), train_poison_data_count: 818
Global model norm: 13.944745699265638.
Norm before scaling: 13.973419569589021. Distance: 1.1869761666827296
Total norm for 5 adversaries is: 13.973419569589021. distance: 1.1869761666827296
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 5.6174, Accuracy: 2678/8991 (29.7853%)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 33, internal_epoch   1,  Average loss: 0.0215, Accuracy: 447/644 (69.4099%), train_poison_data_count: 644
Global model norm: 13.944745699265638.
Norm before scaling: 13.98911788897082. Distance: 1.0427118334995684
Total norm for 5 adversaries is: 13.98911788897082. distance: 1.0427118334995684
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 7.9194, Accuracy: 1842/8991 (20.4872%)
___Train Local_Simple,  epoch  37, local model 41, internal_epoch   1,  Average loss: 0.0237, Accuracy: 328/509 (64.4401%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 6.7134, Accuracy: 974/10000 (9.7400%), Attack Success Rate:7/10000(0.070)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 5, internal_epoch   1,  Average loss: 0.0140, Accuracy: 928/1046 (88.7189%), train_poison_data_count: 1046
Global model norm: 13.944745699265638.
Norm before scaling: 13.919529846845638. Distance: 1.370900240988115
Total norm for 5 adversaries is: 13.919529846845638. distance: 1.370900240988115
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 6.0653, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  37, local model 52, internal_epoch   1,  Average loss: 0.0098, Accuracy: 669/705 (94.8936%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 18.0869, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  37, local model 84, internal_epoch   1,  Average loss: 0.0846, Accuracy: 8/29 (27.5862%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 1.9938, Accuracy: 4962/10000 (49.6200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  37, local model 43, internal_epoch   1,  Average loss: 0.2776, Accuracy: 5/6 (83.3333%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 2.0235, Accuracy: 3967/10000 (39.6700%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  37, local model 62, internal_epoch   1,  Average loss: 0.8945, Accuracy: 2/2 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 2.0440, Accuracy: 2239/10000 (22.3900%), Attack Success Rate:22/10000(0.220)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 18, internal_epoch   1,  Average loss: 0.0334, Accuracy: 153/264 (57.9545%), train_poison_data_count: 264
Global model norm: 13.944745699265638.
Norm before scaling: 13.957060221597414. Distance: 0.6173105720751771
Total norm for 5 adversaries is: 13.957060221597414. distance: 0.6173105720751771
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 4.4667, Accuracy: 892/8991 (9.9210%)
time spent on training: 44.950000524520874
[foolsgold agg] training data poison_ratio: 0.7338864071474155  data num: [678, 818, 644, 509, 1046, 705, 29, 6, 2, 264]
[foolsgold agg] considering poison per batch poison_fraction: 0.7338864071474156
[foolsgold agg] wv: [0.27475889 0.         0.         0.27475889 0.53991038 1.
 1.         1.         1.         0.77739307]
___Test Target_Simple poisoned: False, epoch: 37: Average loss: 2.0061, Accuracy: 5363/10000 (53.6300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 37: Average loss: 1.9258, Accuracy: 5431/8991 (60.4048%)
Done in 133.34825801849365 sec.
Server Epoch:38 choose agents : [39, 29, 87, 78, 53, 83, 19, 45, 52, 17].
___Train Local_Simple,  epoch  38, local model 39, internal_epoch   1,  Average loss: 0.0137, Accuracy: 1045/1259 (83.0024%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 3.6971, Accuracy: 1190/10000 (11.9000%), Attack Success Rate:18/10000(0.180)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  38, local model 29, internal_epoch   1,  Average loss: 0.0136, Accuracy: 1082/1232 (87.8247%), train_poison_data_count: 1232
Global model norm: 13.944662537374292.
Norm before scaling: 13.890252055771038. Distance: 1.1449080227886221
Total norm for 3 adversaries is: 13.890252055771038. distance: 1.1449080227886221
___Test Local_Simple poisoned: True, epoch: 38: Average loss: 4.4352, Accuracy: 982/8991 (10.9220%)
___Train Local_Simple,  epoch  38, local model 87, internal_epoch   1,  Average loss: 0.0541, Accuracy: 33/33 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 2.0037, Accuracy: 4742/10000 (47.4200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  38, local model 78, internal_epoch   1,  Average loss: 0.0131, Accuracy: 1908/2324 (82.0998%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 3.0282, Accuracy: 4449/10000 (44.4900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  38, local model 53, internal_epoch   1,  Average loss: 0.0218, Accuracy: 389/456 (85.3070%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 10.0090, Accuracy: 2076/10000 (20.7600%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  38, local model 83, internal_epoch   1,  Average loss: 0.0235, Accuracy: 544/750 (72.5333%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 3.2182, Accuracy: 1790/10000 (17.9000%), Attack Success Rate:22/10000(0.220)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  38, local model 19, internal_epoch   1,  Average loss: 0.0277, Accuracy: 150/244 (61.4754%), train_poison_data_count: 244
Global model norm: 13.944662537374292.
Norm before scaling: 13.957802529941587. Distance: 0.5426220507380144
Total norm for 3 adversaries is: 13.957802529941587. distance: 0.5426220507380144
___Test Local_Simple poisoned: True, epoch: 38: Average loss: 4.1502, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch  38, local model 45, internal_epoch   1,  Average loss: 0.0206, Accuracy: 298/388 (76.8041%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 6.5222, Accuracy: 1959/10000 (19.5900%), Attack Success Rate:37/10000(0.370)
___Train Local_Simple,  epoch  38, local model 52, internal_epoch   1,  Average loss: 0.0088, Accuracy: 682/705 (96.7376%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 24.1284, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:4/10000(0.040)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  38, local model 17, internal_epoch   1,  Average loss: 0.0340, Accuracy: 80/94 (85.1064%), train_poison_data_count: 94
Global model norm: 13.944662537374292.
Norm before scaling: 13.948099117590921. Distance: 0.18630999190988298
Total norm for 3 adversaries is: 13.948099117590921. distance: 0.18630999190988298
___Test Local_Simple poisoned: True, epoch: 38: Average loss: 2.1771, Accuracy: 1102/8991 (12.2567%)
time spent on training: 46.857566595077515
[foolsgold agg] training data poison_ratio: 0.20975283901135605  data num: [1259, 1232, 33, 2324, 456, 750, 244, 388, 705, 94]
[foolsgold agg] considering poison per batch poison_fraction: 0.20975283901135605
[foolsgold agg] wv: [0.         0.53256669 0.         1.         0.         0.
 0.10286338 1.         0.10286338 0.53256669]
___Test Target_Simple poisoned: False, epoch: 38: Average loss: 1.9964, Accuracy: 5213/10000 (52.1300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 38: Average loss: 1.9139, Accuracy: 5284/8991 (58.7699%)
Done in 135.89294505119324 sec.
Server Epoch:39 choose agents : [3, 34, 32, 5, 73, 14, 40, 88, 72, 13].
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 3, internal_epoch   1,  Average loss: 0.0210, Accuracy: 700/1010 (69.3069%), train_poison_data_count: 1010
Global model norm: 13.946275351914082.
Norm before scaling: 13.978296623310646. Distance: 1.308384209552809
Total norm for 5 adversaries is: 13.978296623310646. distance: 1.308384209552809
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 4.6621, Accuracy: 3283/8991 (36.5143%)
___Train Local_Simple,  epoch  39, local model 34, internal_epoch   1,  Average loss: 0.0185, Accuracy: 925/1203 (76.8911%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 4.8748, Accuracy: 3288/10000 (32.8800%), Attack Success Rate:1/10000(0.010)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 32, internal_epoch   1,  Average loss: 0.0591, Accuracy: 28/28 (100.0000%), train_poison_data_count: 28
Global model norm: 13.946275351914082.
Norm before scaling: 13.947464054086645. Distance: 0.07984743967321295
Total norm for 5 adversaries is: 13.947464054086645. distance: 0.07984743967321295
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 1.9499, Accuracy: 2090/8991 (23.2455%)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 5, internal_epoch   1,  Average loss: 0.0141, Accuracy: 924/1046 (88.3365%), train_poison_data_count: 1046
Global model norm: 13.946275351914082.
Norm before scaling: 13.92239122043774. Distance: 1.3897053109793227
Total norm for 5 adversaries is: 13.92239122043774. distance: 1.3897053109793227
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 6.1341, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  39, local model 73, internal_epoch   1,  Average loss: 0.0150, Accuracy: 970/1205 (80.4979%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 3.4764, Accuracy: 1231/10000 (12.3100%), Attack Success Rate:9/10000(0.090)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 14, internal_epoch   1,  Average loss: 0.0404, Accuracy: 41/48 (85.4167%), train_poison_data_count: 48
Global model norm: 13.946275351914082.
Norm before scaling: 13.94669821984227. Distance: 0.06204510525939222
Total norm for 5 adversaries is: 13.94669821984227. distance: 0.06204510525939222
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 1.9137, Accuracy: 4531/8991 (50.3948%)
___Train Local_Simple,  epoch  39, local model 40, internal_epoch   1,  Average loss: 0.0275, Accuracy: 265/436 (60.7798%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 4.7426, Accuracy: 1910/10000 (19.1000%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  39, local model 88, internal_epoch   1,  Average loss: 0.0429, Accuracy: 40/96 (41.6667%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 2.1704, Accuracy: 985/10000 (9.8500%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  39, local model 72, internal_epoch   1,  Average loss: 0.1846, Accuracy: 7/10 (70.0000%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 2.0143, Accuracy: 3206/10000 (32.0600%), Attack Success Rate:4/10000(0.040)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 13, internal_epoch   1,  Average loss: 0.4013, Accuracy: 1/5 (20.0000%), train_poison_data_count: 5
Global model norm: 13.946275351914082.
Norm before scaling: 13.946379839231298. Distance: 0.04598257034074279
Total norm for 5 adversaries is: 13.946379839231298. distance: 0.04598257034074279
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 1.9213, Accuracy: 5267/8991 (58.5808%)
time spent on training: 46.71638059616089
[foolsgold agg] training data poison_ratio: 0.42009042657755064  data num: [1010, 1203, 28, 1046, 1205, 48, 436, 96, 10, 5]
[foolsgold agg] considering poison per batch poison_fraction: 0.4200904265775506
[foolsgold agg] wv: [1.         1.         1.         0.88752766 0.88752766 1.
 1.         1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 39: Average loss: 1.9719, Accuracy: 5565/10000 (55.6500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 39: Average loss: 1.8871, Accuracy: 5614/8991 (62.4402%)
Done in 135.59297108650208 sec.
Server Epoch:40 choose agents : [12, 23, 87, 98, 51, 83, 52, 90, 71, 11].
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  40, local model 12, internal_epoch   1,  Average loss: 0.0162, Accuracy: 531/648 (81.9444%), train_poison_data_count: 648
Global model norm: 13.948829322833477.
Norm before scaling: 13.993253989925378. Distance: 0.9385897025384154
Total norm for 3 adversaries is: 13.993253989925378. distance: 0.9385897025384154
___Test Local_Simple poisoned: True, epoch: 40: Average loss: 4.5948, Accuracy: 2710/8991 (30.1413%)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  40, local model 23, internal_epoch   1,  Average loss: 0.0152, Accuracy: 406/428 (94.8598%), train_poison_data_count: 428
Global model norm: 13.948829322833477.
Norm before scaling: 14.002249945635132. Distance: 0.9176575153380429
Total norm for 3 adversaries is: 14.002249945635132. distance: 0.9176575153380429
___Test Local_Simple poisoned: True, epoch: 40: Average loss: 9.7965, Accuracy: 1946/8991 (21.6439%)
___Train Local_Simple,  epoch  40, local model 87, internal_epoch   1,  Average loss: 0.0533, Accuracy: 33/33 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 1.9664, Accuracy: 5059/10000 (50.5900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  40, local model 98, internal_epoch   1,  Average loss: 0.2687, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 1.9815, Accuracy: 3520/10000 (35.2000%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch  40, local model 51, internal_epoch   1,  Average loss: 0.0196, Accuracy: 212/259 (81.8533%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 4.9420, Accuracy: 980/10000 (9.8000%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  40, local model 83, internal_epoch   1,  Average loss: 0.0221, Accuracy: 560/750 (74.6667%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 3.3362, Accuracy: 1578/10000 (15.7800%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch  40, local model 52, internal_epoch   1,  Average loss: 0.0102, Accuracy: 687/705 (97.4468%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 21.0125, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  40, local model 90, internal_epoch   1,  Average loss: 0.0141, Accuracy: 683/768 (88.9323%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 5.1143, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  40, local model 71, internal_epoch   1,  Average loss: 0.0334, Accuracy: 170/342 (49.7076%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 3.1626, Accuracy: 892/10000 (8.9200%), Attack Success Rate:4/10000(0.040)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  40, local model 11, internal_epoch   1,  Average loss: 0.0410, Accuracy: 71/84 (84.5238%), train_poison_data_count: 84
Global model norm: 13.948829322833477.
Norm before scaling: 13.951291501000846. Distance: 0.14633030100078762
Total norm for 3 adversaries is: 13.951291501000846. distance: 0.14633030100078762
___Test Local_Simple poisoned: True, epoch: 40: Average loss: 1.9935, Accuracy: 2081/8991 (23.1454%)
time spent on training: 42.366013288497925
[foolsgold agg] training data poison_ratio: 0.28834203330847624  data num: [648, 428, 33, 6, 259, 750, 705, 768, 342, 84]
[foolsgold agg] considering poison per batch poison_fraction: 0.28834203330847624
[foolsgold agg] wv: [1.         0.         1.         0.         0.96921058 1.
 0.59759269 0.         1.         0.59759269]
___Test Target_Simple poisoned: False, epoch: 40: Average loss: 1.9585, Accuracy: 5510/10000 (55.1000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 40: Average loss: 1.8638, Accuracy: 5518/8991 (61.3725%)
Done in 131.4329206943512 sec.
Server Epoch:41 choose agents : [51, 28, 20, 95, 83, 18, 55, 42, 29, 46].
___Train Local_Simple,  epoch  41, local model 51, internal_epoch   1,  Average loss: 0.0189, Accuracy: 216/259 (83.3977%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 4.6620, Accuracy: 980/10000 (9.8000%), Attack Success Rate:7/10000(0.070)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 28, internal_epoch   1,  Average loss: 0.0259, Accuracy: 181/237 (76.3713%), train_poison_data_count: 237
Global model norm: 13.950571268614885.
Norm before scaling: 13.964749781152376. Distance: 0.4728083720408359
Total norm for 4 adversaries is: 13.964749781152376. distance: 0.4728083720408359
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 4.6284, Accuracy: 1032/8991 (11.4781%)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 20, internal_epoch   1,  Average loss: 0.0048, Accuracy: 2044/2180 (93.7615%), train_poison_data_count: 2180
Global model norm: 13.950571268614885.
Norm before scaling: 13.861826648645891. Distance: 1.4423048738305357
Total norm for 4 adversaries is: 13.861826648645891. distance: 1.4423048738305357
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 4.1373, Accuracy: 2760/8991 (30.6974%)
___Train Local_Simple,  epoch  41, local model 95, internal_epoch   1,  Average loss: 0.0568, Accuracy: 24/29 (82.7586%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 1.9623, Accuracy: 4758/10000 (47.5800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  41, local model 83, internal_epoch   1,  Average loss: 0.0210, Accuracy: 568/750 (75.7333%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 3.8952, Accuracy: 1015/10000 (10.1500%), Attack Success Rate:6/10000(0.060)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 18, internal_epoch   1,  Average loss: 0.0337, Accuracy: 165/264 (62.5000%), train_poison_data_count: 264
Global model norm: 13.950571268614885.
Norm before scaling: 13.963864694700893. Distance: 0.6054559521706934
Total norm for 4 adversaries is: 13.963864694700893. distance: 0.6054559521706934
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 4.4384, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  41, local model 55, internal_epoch   1,  Average loss: 0.0120, Accuracy: 2301/2803 (82.0906%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 4.2137, Accuracy: 4651/10000 (46.5100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  41, local model 42, internal_epoch   1,  Average loss: 0.0457, Accuracy: 56/63 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 2.4526, Accuracy: 1017/10000 (10.1700%), Attack Success Rate:7/10000(0.070)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 29, internal_epoch   1,  Average loss: 0.0142, Accuracy: 1087/1232 (88.2305%), train_poison_data_count: 1232
Global model norm: 13.950571268614885.
Norm before scaling: 13.900081475108282. Distance: 1.1053217058820286
Total norm for 4 adversaries is: 13.900081475108282. distance: 1.1053217058820286
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 4.3999, Accuracy: 982/8991 (10.9220%)
___Train Local_Simple,  epoch  41, local model 46, internal_epoch   1,  Average loss: 0.0373, Accuracy: 138/310 (44.5161%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 3.3885, Accuracy: 1216/10000 (12.1600%), Attack Success Rate:12/10000(0.120)
time spent on training: 48.0897376537323
[foolsgold agg] training data poison_ratio: 0.48148148148148145  data num: [259, 237, 2180, 29, 750, 264, 2803, 63, 1232, 310]
[foolsgold agg] considering poison per batch poison_fraction: 0.48148148148148145
[foolsgold agg] wv: [0.24319774 0.24319774 1.         0.54044502 1.         0.54044502
 1.         0.65295685 0.65295685 1.        ]
___Test Target_Simple poisoned: False, epoch: 41: Average loss: 1.9349, Accuracy: 5386/10000 (53.8600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 41: Average loss: 1.8375, Accuracy: 5391/8991 (59.9600%)
Done in 136.89475274085999 sec.
Server Epoch:42 choose agents : [87, 73, 89, 48, 81, 10, 92, 62, 26, 29].
___Train Local_Simple,  epoch  42, local model 87, internal_epoch   1,  Average loss: 0.0509, Accuracy: 30/33 (90.9091%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.9296, Accuracy: 5140/10000 (51.4000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  42, local model 73, internal_epoch   1,  Average loss: 0.0132, Accuracy: 987/1205 (81.9087%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 3.8457, Accuracy: 1527/10000 (15.2700%), Attack Success Rate:31/10000(0.310)
___Train Local_Simple,  epoch  42, local model 89, internal_epoch   1,  Average loss: 0.0557, Accuracy: 34/69 (49.2754%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.9834, Accuracy: 1751/10000 (17.5100%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  42, local model 48, internal_epoch   1,  Average loss: 0.0418, Accuracy: 90/128 (70.3125%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 2.1885, Accuracy: 1984/10000 (19.8400%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  42, local model 81, internal_epoch   1,  Average loss: 0.0567, Accuracy: 23/68 (33.8235%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 2.0318, Accuracy: 1507/10000 (15.0700%), Attack Success Rate:23/10000(0.230)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  42, local model 10, internal_epoch   1,  Average loss: 0.0177, Accuracy: 528/688 (76.7442%), train_poison_data_count: 688
Global model norm: 13.954285234866587.
Norm before scaling: 14.002481513124401. Distance: 1.1125504621569495
Total norm for 3 adversaries is: 14.002481513124401. distance: 1.1125504621569495
___Test Local_Simple poisoned: True, epoch: 42: Average loss: 7.9358, Accuracy: 2736/8991 (30.4304%)
___Train Local_Simple,  epoch  42, local model 92, internal_epoch   1,  Average loss: 0.0357, Accuracy: 145/202 (71.7822%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 5.3679, Accuracy: 958/10000 (9.5800%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  42, local model 62, internal_epoch   1,  Average loss: 0.8932, Accuracy: 2/2 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.9637, Accuracy: 3488/10000 (34.8800%), Attack Success Rate:1/10000(0.010)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  42, local model 26, internal_epoch   1,  Average loss: 0.0071, Accuracy: 1172/1311 (89.3974%), train_poison_data_count: 1311
Global model norm: 13.954285234866587.
Norm before scaling: 13.99686124221388. Distance: 1.5833090813770445
Total norm for 3 adversaries is: 13.99686124221388. distance: 1.5833090813770445
___Test Local_Simple poisoned: True, epoch: 42: Average loss: 17.5490, Accuracy: 1918/8991 (21.3324%)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  42, local model 29, internal_epoch   1,  Average loss: 0.0119, Accuracy: 1088/1232 (88.3117%), train_poison_data_count: 1232
Global model norm: 13.954285234866587.
Norm before scaling: 13.896689019267942. Distance: 0.970369001331434
Total norm for 3 adversaries is: 13.896689019267942. distance: 0.970369001331434
___Test Local_Simple poisoned: True, epoch: 42: Average loss: 4.1038, Accuracy: 982/8991 (10.9220%)
time spent on training: 41.65444302558899
[foolsgold agg] training data poison_ratio: 0.6543134872417983  data num: [33, 1205, 69, 128, 68, 688, 202, 2, 1311, 1232]
[foolsgold agg] considering poison per batch poison_fraction: 0.6543134872417983
[foolsgold agg] wv: [0.65843699 0.         0.         0.65843699 0.         1.
 0.         0.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 42: Average loss: 1.9305, Accuracy: 5145/10000 (51.4500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 42: Average loss: 1.8246, Accuracy: 5132/8991 (57.0793%)
Done in 130.1586468219757 sec.
Server Epoch:43 choose agents : [38, 78, 26, 18, 72, 75, 93, 39, 44, 90].
___Train Local_Simple,  epoch  43, local model 38, internal_epoch   1,  Average loss: 0.0257, Accuracy: 173/179 (96.6480%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 3.9910, Accuracy: 1218/10000 (12.1800%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  43, local model 78, internal_epoch   1,  Average loss: 0.0115, Accuracy: 1966/2324 (84.5955%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 3.3583, Accuracy: 4600/10000 (46.0000%), Attack Success Rate:0/10000(0.000)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  43, local model 26, internal_epoch   1,  Average loss: 0.0073, Accuracy: 1166/1311 (88.9397%), train_poison_data_count: 1311
Global model norm: 13.956108500493219.
Norm before scaling: 13.977865432386249. Distance: 1.4986237729378014
Total norm for 2 adversaries is: 13.977865432386249. distance: 1.4986237729378014
___Test Local_Simple poisoned: True, epoch: 43: Average loss: 11.6223, Accuracy: 1748/8991 (19.4417%)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  43, local model 18, internal_epoch   1,  Average loss: 0.0296, Accuracy: 163/264 (61.7424%), train_poison_data_count: 264
Global model norm: 13.956108500493219.
Norm before scaling: 13.97256724793432. Distance: 0.6350741296962323
Total norm for 2 adversaries is: 13.97256724793432. distance: 0.6350741296962323
___Test Local_Simple poisoned: True, epoch: 43: Average loss: 5.0406, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  43, local model 72, internal_epoch   1,  Average loss: 0.1813, Accuracy: 6/10 (60.0000%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 1.9448, Accuracy: 4688/10000 (46.8800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  43, local model 75, internal_epoch   1,  Average loss: 0.0101, Accuracy: 456/497 (91.7505%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 9.9978, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  43, local model 93, internal_epoch   1,  Average loss: 0.0605, Accuracy: 22/30 (73.3333%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 1.9469, Accuracy: 4413/10000 (44.1300%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  43, local model 39, internal_epoch   1,  Average loss: 0.0111, Accuracy: 1106/1259 (87.8475%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 3.7290, Accuracy: 1852/10000 (18.5200%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  43, local model 44, internal_epoch   1,  Average loss: 0.0389, Accuracy: 36/47 (76.5957%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 1.9690, Accuracy: 2808/10000 (28.0800%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  43, local model 90, internal_epoch   1,  Average loss: 0.0148, Accuracy: 660/768 (85.9375%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 4.1976, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:6/10000(0.060)
time spent on training: 43.63095307350159
[foolsgold agg] training data poison_ratio: 0.2354612049633727  data num: [179, 2324, 1311, 264, 10, 497, 30, 1259, 47, 768]
[foolsgold agg] considering poison per batch poison_fraction: 0.2354612049633727
[foolsgold agg] wv: [0.94464994 1.         0.         0.89170444 0.         0.94464994
 0.         1.         0.         0.02227254]
___Test Target_Simple poisoned: False, epoch: 43: Average loss: 1.9098, Accuracy: 4925/10000 (49.2500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 43: Average loss: 1.7987, Accuracy: 4920/8991 (54.7214%)
Done in 132.31639194488525 sec.
Server Epoch:44 choose agents : [31, 1, 38, 9, 6, 19, 65, 66, 73, 15].
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 31, internal_epoch   1,  Average loss: 0.0107, Accuracy: 1552/1839 (84.3937%), train_poison_data_count: 1839
Global model norm: 13.958861808831223.
Norm before scaling: 13.98027720164252. Distance: 1.6311895892770318
Total norm for 6 adversaries is: 13.98027720164252. distance: 1.6311895892770318
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 4.3395, Accuracy: 2852/8991 (31.7206%)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 1, internal_epoch   1,  Average loss: 0.0430, Accuracy: 40/84 (47.6190%), train_poison_data_count: 84
Global model norm: 13.958861808831223.
Norm before scaling: 13.960451669463625. Distance: 0.1179478416798341
Total norm for 6 adversaries is: 13.960451669463625. distance: 0.1179478416798341
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 1.8660, Accuracy: 3239/8991 (36.0249%)
___Train Local_Simple,  epoch  44, local model 38, internal_epoch   1,  Average loss: 0.0223, Accuracy: 174/179 (97.2067%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 4.2306, Accuracy: 1249/10000 (12.4900%), Attack Success Rate:15/10000(0.150)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 9, internal_epoch   1,  Average loss: 0.0250, Accuracy: 186/263 (70.7224%), train_poison_data_count: 263
Global model norm: 13.958861808831223.
Norm before scaling: 13.985861041853349. Distance: 0.6504149103069683
Total norm for 6 adversaries is: 13.985861041853349. distance: 0.6504149103069683
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 5.8053, Accuracy: 1823/8991 (20.2758%)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 6, internal_epoch   1,  Average loss: 0.0095, Accuracy: 1716/1982 (86.5792%), train_poison_data_count: 1982
Global model norm: 13.958861808831223.
Norm before scaling: 13.949447369311075. Distance: 1.602319529186189
Total norm for 6 adversaries is: 13.949447369311075. distance: 1.602319529186189
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 8.8104, Accuracy: 2716/8991 (30.2080%)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 19, internal_epoch   1,  Average loss: 0.0264, Accuracy: 151/244 (61.8852%), train_poison_data_count: 244
Global model norm: 13.958861808831223.
Norm before scaling: 13.972702661895243. Distance: 0.5600903343245945
Total norm for 6 adversaries is: 13.972702661895243. distance: 0.5600903343245945
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 4.2746, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch  44, local model 65, internal_epoch   1,  Average loss: 0.0122, Accuracy: 1141/1326 (86.0483%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 4.3805, Accuracy: 1936/10000 (19.3600%), Attack Success Rate:32/10000(0.320)
___Train Local_Simple,  epoch  44, local model 66, internal_epoch   1,  Average loss: 0.0136, Accuracy: 570/681 (83.7004%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 4.4437, Accuracy: 3017/10000 (30.1700%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  44, local model 73, internal_epoch   1,  Average loss: 0.0137, Accuracy: 971/1205 (80.5809%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 3.4730, Accuracy: 1196/10000 (11.9600%), Attack Success Rate:11/10000(0.110)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 15, internal_epoch   1,  Average loss: 0.0186, Accuracy: 718/1033 (69.5063%), train_poison_data_count: 1033
Global model norm: 13.958861808831223.
Norm before scaling: 14.046200949310046. Distance: 1.498075681406951
Total norm for 6 adversaries is: 14.046200949310046. distance: 1.498075681406951
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 10.3550, Accuracy: 3112/8991 (34.6124%)
time spent on training: 52.38755249977112
[foolsgold agg] training data poison_ratio: 0.6162290629244002  data num: [1839, 84, 179, 263, 1982, 244, 1326, 681, 1205, 1033]
[foolsgold agg] considering poison per batch poison_fraction: 0.6162290629244002
[foolsgold agg] wv: [1.        0.        1.        0.        0.1307105 0.        0.
 1.        1.        0.       ]
___Test Target_Simple poisoned: False, epoch: 44: Average loss: 1.8909, Accuracy: 5010/10000 (50.1000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 44: Average loss: 1.7718, Accuracy: 5013/8991 (55.7558%)
Done in 140.66483855247498 sec.
Server Epoch:45 choose agents : [53, 75, 1, 37, 94, 51, 29, 39, 60, 5].
___Train Local_Simple,  epoch  45, local model 53, internal_epoch   1,  Average loss: 0.0177, Accuracy: 416/456 (91.2281%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 10.3707, Accuracy: 2101/10000 (21.0100%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  45, local model 75, internal_epoch   1,  Average loss: 0.0111, Accuracy: 468/497 (94.1650%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 11.7003, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:5/10000(0.050)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  45, local model 1, internal_epoch   1,  Average loss: 0.0435, Accuracy: 41/84 (48.8095%), train_poison_data_count: 84
Global model norm: 13.961383421809646.
Norm before scaling: 13.962838033410888. Distance: 0.12239837812930056
Total norm for 3 adversaries is: 13.962838033410888. distance: 0.12239837812930056
___Test Local_Simple poisoned: True, epoch: 45: Average loss: 1.8349, Accuracy: 3624/8991 (40.3070%)
___Train Local_Simple,  epoch  45, local model 37, internal_epoch   1,  Average loss: 0.0193, Accuracy: 405/578 (70.0692%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 7.0296, Accuracy: 2604/10000 (26.0400%), Attack Success Rate:13/10000(0.130)
___Train Local_Simple,  epoch  45, local model 94, internal_epoch   1,  Average loss: 0.0151, Accuracy: 570/607 (93.9044%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 4.6357, Accuracy: 1136/10000 (11.3600%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  45, local model 51, internal_epoch   1,  Average loss: 0.0188, Accuracy: 211/259 (81.4672%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 3.9978, Accuracy: 1046/10000 (10.4600%), Attack Success Rate:6/10000(0.060)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  45, local model 29, internal_epoch   1,  Average loss: 0.0126, Accuracy: 1088/1232 (88.3117%), train_poison_data_count: 1232
Global model norm: 13.961383421809646.
Norm before scaling: 13.903185011600646. Distance: 0.9448117908379988
Total norm for 3 adversaries is: 13.903185011600646. distance: 0.9448117908379988
___Test Local_Simple poisoned: True, epoch: 45: Average loss: 3.4001, Accuracy: 982/8991 (10.9220%)
___Train Local_Simple,  epoch  45, local model 39, internal_epoch   1,  Average loss: 0.0106, Accuracy: 1095/1259 (86.9738%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 3.1098, Accuracy: 1875/10000 (18.7500%), Attack Success Rate:31/10000(0.310)
___Train Local_Simple,  epoch  45, local model 60, internal_epoch   1,  Average loss: 0.0213, Accuracy: 266/399 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 9.1478, Accuracy: 1077/10000 (10.7700%), Attack Success Rate:6/10000(0.060)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  45, local model 5, internal_epoch   1,  Average loss: 0.0132, Accuracy: 925/1046 (88.4321%), train_poison_data_count: 1046
Global model norm: 13.961383421809646.
Norm before scaling: 13.934836642071229. Distance: 1.3825610519504374
Total norm for 3 adversaries is: 13.934836642071229. distance: 1.3825610519504374
___Test Local_Simple poisoned: True, epoch: 45: Average loss: 5.4827, Accuracy: 892/8991 (9.9210%)
time spent on training: 45.003077268600464
[foolsgold agg] training data poison_ratio: 0.3680847748168926  data num: [456, 497, 84, 578, 607, 259, 1232, 1259, 399, 1046]
[foolsgold agg] considering poison per batch poison_fraction: 0.3680847748168926
[foolsgold agg] wv: [1. 1. 0. 0. 1. 1. 1. 0. 0. 0.]
___Test Target_Simple poisoned: False, epoch: 45: Average loss: 1.8903, Accuracy: 4735/10000 (47.3500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 45: Average loss: 1.7664, Accuracy: 4738/8991 (52.6971%)
Done in 133.7637276649475 sec.
Server Epoch:46 choose agents : [75, 78, 14, 39, 7, 10, 40, 2, 68, 54].
___Train Local_Simple,  epoch  46, local model 75, internal_epoch   1,  Average loss: 0.0112, Accuracy: 461/497 (92.7565%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 10.4000, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  46, local model 78, internal_epoch   1,  Average loss: 0.0104, Accuracy: 1989/2324 (85.5852%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 3.4358, Accuracy: 4343/10000 (43.4300%), Attack Success Rate:0/10000(0.000)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 14, internal_epoch   1,  Average loss: 0.0300, Accuracy: 48/48 (100.0000%), train_poison_data_count: 48
Global model norm: 13.962399807999967.
Norm before scaling: 13.963970689492019. Distance: 0.06260780261168966
Total norm for 4 adversaries is: 13.963970689492019. distance: 0.06260780261168966
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 1.7974, Accuracy: 3452/8991 (38.3939%)
___Train Local_Simple,  epoch  46, local model 39, internal_epoch   1,  Average loss: 0.0103, Accuracy: 1112/1259 (88.3241%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 3.8247, Accuracy: 1870/10000 (18.7000%), Attack Success Rate:23/10000(0.230)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 7, internal_epoch   1,  Average loss: 0.0382, Accuracy: 57/86 (66.2791%), train_poison_data_count: 86
Global model norm: 13.962399807999967.
Norm before scaling: 13.965407003501097. Distance: 0.17897866212077118
Total norm for 4 adversaries is: 13.965407003501097. distance: 0.17897866212077118
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 1.9914, Accuracy: 1076/8991 (11.9675%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 10, internal_epoch   1,  Average loss: 0.0164, Accuracy: 512/688 (74.4186%), train_poison_data_count: 688
Global model norm: 13.962399807999967.
Norm before scaling: 14.013625462684466. Distance: 1.1037755069399116
Total norm for 4 adversaries is: 14.013625462684466. distance: 1.1037755069399116
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 8.1593, Accuracy: 2494/8991 (27.7388%)
___Train Local_Simple,  epoch  46, local model 40, internal_epoch   1,  Average loss: 0.0246, Accuracy: 271/436 (62.1560%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 4.7350, Accuracy: 1925/10000 (19.2500%), Attack Success Rate:29/10000(0.290)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 2, internal_epoch   1,  Average loss: 0.0394, Accuracy: 75/119 (63.0252%), train_poison_data_count: 119
Global model norm: 13.962399807999967.
Norm before scaling: 13.968212552580322. Distance: 0.2741141665962459
Total norm for 4 adversaries is: 13.968212552580322. distance: 0.2741141665962459
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 2.2569, Accuracy: 1041/8991 (11.5782%)
___Train Local_Simple,  epoch  46, local model 68, internal_epoch   1,  Average loss: 0.0117, Accuracy: 1372/1591 (86.2351%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 4.5022, Accuracy: 1726/10000 (17.2600%), Attack Success Rate:38/10000(0.380)
___Train Local_Simple,  epoch  46, local model 54, internal_epoch   1,  Average loss: 0.0458, Accuracy: 20/91 (21.9780%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 1.9003, Accuracy: 5799/10000 (57.9900%), Attack Success Rate:0/10000(0.000)
time spent on training: 50.575265645980835
[foolsgold agg] training data poison_ratio: 0.1318111780361395  data num: [497, 2324, 48, 1259, 86, 688, 436, 119, 1591, 91]
[foolsgold agg] considering poison per batch poison_fraction: 0.1318111780361395
[foolsgold agg] wv: [0.77584203 1.         0.77584203 0.78355112 1.         0.24423834
 0.69494584 0.69494584 0.24423834 0.78355112]
___Test Target_Simple poisoned: False, epoch: 46: Average loss: 1.8610, Accuracy: 4964/10000 (49.6400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 46: Average loss: 1.7370, Accuracy: 4970/8991 (55.2775%)
Done in 139.11874270439148 sec.
Server Epoch:47 choose agents : [94, 48, 82, 25, 26, 16, 7, 90, 68, 43].
___Train Local_Simple,  epoch  47, local model 94, internal_epoch   1,  Average loss: 0.0148, Accuracy: 570/607 (93.9044%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 4.5460, Accuracy: 1178/10000 (11.7800%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  47, local model 48, internal_epoch   1,  Average loss: 0.0370, Accuracy: 76/128 (59.3750%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 2.2250, Accuracy: 1965/10000 (19.6500%), Attack Success Rate:36/10000(0.360)
___Train Local_Simple,  epoch  47, local model 82, internal_epoch   1,  Average loss: 0.0354, Accuracy: 78/114 (68.4211%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 2.7749, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:11/10000(0.110)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 25, internal_epoch   1,  Average loss: 0.0396, Accuracy: 80/128 (62.5000%), train_poison_data_count: 128
Global model norm: 13.965402633047319.
Norm before scaling: 13.969717790160214. Distance: 0.19688545078211162
Total norm for 4 adversaries is: 13.969717790160214. distance: 0.19688545078211162
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 1.8679, Accuracy: 2186/8991 (24.3132%)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 26, internal_epoch   1,  Average loss: 0.0072, Accuracy: 1155/1311 (88.1007%), train_poison_data_count: 1311
Global model norm: 13.965402633047319.
Norm before scaling: 13.99607685161553. Distance: 1.5920073013234082
Total norm for 4 adversaries is: 13.99607685161553. distance: 1.5920073013234082
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 11.1681, Accuracy: 1949/8991 (21.6772%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 16, internal_epoch   1,  Average loss: 0.0142, Accuracy: 826/994 (83.0986%), train_poison_data_count: 994
Global model norm: 13.965402633047319.
Norm before scaling: 14.001081697364995. Distance: 0.9698284360728432
Total norm for 4 adversaries is: 14.001081697364995. distance: 0.9698284360728432
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 2.2569, Accuracy: 3507/8991 (39.0057%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 7, internal_epoch   1,  Average loss: 0.0360, Accuracy: 62/86 (72.0930%), train_poison_data_count: 86
Global model norm: 13.965402633047319.
Norm before scaling: 13.969116479218037. Distance: 0.17936738150896125
Total norm for 4 adversaries is: 13.969116479218037. distance: 0.17936738150896125
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 2.0243, Accuracy: 1070/8991 (11.9008%)
___Train Local_Simple,  epoch  47, local model 90, internal_epoch   1,  Average loss: 0.0123, Accuracy: 676/768 (88.0208%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 4.5250, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  47, local model 68, internal_epoch   1,  Average loss: 0.0108, Accuracy: 1380/1591 (86.7379%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 4.5986, Accuracy: 1790/10000 (17.9000%), Attack Success Rate:37/10000(0.370)
___Train Local_Simple,  epoch  47, local model 43, internal_epoch   1,  Average loss: 0.2524, Accuracy: 3/6 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 1.8648, Accuracy: 4555/10000 (45.5500%), Attack Success Rate:0/10000(0.000)
time spent on training: 46.14506936073303
[foolsgold agg] training data poison_ratio: 0.43938601081458223  data num: [607, 128, 114, 128, 1311, 994, 86, 768, 1591, 6]
[foolsgold agg] considering poison per batch poison_fraction: 0.43938601081458223
[foolsgold agg] wv: [0.87617161 1.         1.         0.16087635 0.16087635 1.
 0.         0.         0.87617161 1.        ]
___Test Target_Simple poisoned: False, epoch: 47: Average loss: 1.8395, Accuracy: 5135/10000 (51.3500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 47: Average loss: 1.7086, Accuracy: 5151/8991 (57.2906%)
Done in 134.7353801727295 sec.
Server Epoch:48 choose agents : [74, 27, 75, 19, 58, 83, 91, 96, 17, 57].
___Train Local_Simple,  epoch  48, local model 74, internal_epoch   1,  Average loss: 0.0234, Accuracy: 469/762 (61.5486%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 4.3853, Accuracy: 1008/10000 (10.0800%), Attack Success Rate:7/10000(0.070)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  48, local model 27, internal_epoch   1,  Average loss: 0.0136, Accuracy: 594/678 (87.6106%), train_poison_data_count: 678
Global model norm: 13.96752432751931.
Norm before scaling: 13.95777028025211. Distance: 0.9893123088260268
Total norm for 3 adversaries is: 13.95777028025211. distance: 0.9893123088260268
___Test Local_Simple poisoned: True, epoch: 48: Average loss: 4.5346, Accuracy: 1027/8991 (11.4225%)
___Train Local_Simple,  epoch  48, local model 75, internal_epoch   1,  Average loss: 0.0120, Accuracy: 459/497 (92.3541%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 8.8374, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:9/10000(0.090)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  48, local model 19, internal_epoch   1,  Average loss: 0.0261, Accuracy: 136/244 (55.7377%), train_poison_data_count: 244
Global model norm: 13.96752432751931.
Norm before scaling: 13.98075142910641. Distance: 0.5632431102014677
Total norm for 3 adversaries is: 13.98075142910641. distance: 0.5632431102014677
___Test Local_Simple poisoned: True, epoch: 48: Average loss: 4.2062, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch  48, local model 58, internal_epoch   1,  Average loss: 0.0226, Accuracy: 622/1015 (61.2808%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 3.4150, Accuracy: 2482/10000 (24.8200%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  48, local model 83, internal_epoch   1,  Average loss: 0.0197, Accuracy: 549/750 (73.2000%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 3.5781, Accuracy: 1623/10000 (16.2300%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  48, local model 91, internal_epoch   1,  Average loss: 0.0309, Accuracy: 120/182 (65.9341%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 3.2150, Accuracy: 1038/10000 (10.3800%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  48, local model 96, internal_epoch   1,  Average loss: 0.0203, Accuracy: 350/505 (69.3069%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 6.9050, Accuracy: 2635/10000 (26.3500%), Attack Success Rate:8/10000(0.080)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  48, local model 17, internal_epoch   1,  Average loss: 0.0268, Accuracy: 80/94 (85.1064%), train_poison_data_count: 94
Global model norm: 13.96752432751931.
Norm before scaling: 13.972690103397625. Distance: 0.18985603198600176
Total norm for 3 adversaries is: 13.972690103397625. distance: 0.18985603198600176
___Test Local_Simple poisoned: True, epoch: 48: Average loss: 2.1050, Accuracy: 1377/8991 (15.3153%)
___Train Local_Simple,  epoch  48, local model 57, internal_epoch   1,  Average loss: 0.0122, Accuracy: 1179/1437 (82.0459%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 5.4549, Accuracy: 2957/10000 (29.5700%), Attack Success Rate:7/10000(0.070)
time spent on training: 46.42719078063965
[foolsgold agg] training data poison_ratio: 0.16482803374432187  data num: [762, 678, 497, 244, 1015, 750, 182, 505, 94, 1437]
[foolsgold agg] considering poison per batch poison_fraction: 0.16482803374432187
[foolsgold agg] wv: [1.         1.         0.94385813 1.         0.19042793 0.19042793
 0.44068843 1.         0.94385813 1.        ]
___Test Target_Simple poisoned: False, epoch: 48: Average loss: 1.8062, Accuracy: 5444/10000 (54.4400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 48: Average loss: 1.6805, Accuracy: 5449/8991 (60.6050%)
Done in 134.89888334274292 sec.
Server Epoch:49 choose agents : [77, 10, 78, 72, 91, 13, 98, 21, 82, 74].
___Train Local_Simple,  epoch  49, local model 77, internal_epoch   1,  Average loss: 0.0120, Accuracy: 1276/1544 (82.6425%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 4.1028, Accuracy: 3651/10000 (36.5100%), Attack Success Rate:0/10000(0.000)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  49, local model 10, internal_epoch   1,  Average loss: 0.0154, Accuracy: 520/688 (75.5814%), train_poison_data_count: 688
Global model norm: 13.97085917207168.
Norm before scaling: 14.024608782039442. Distance: 1.090015466212866
Total norm for 3 adversaries is: 14.024608782039442. distance: 1.090015466212866
___Test Local_Simple poisoned: True, epoch: 49: Average loss: 8.1002, Accuracy: 2589/8991 (28.7955%)
___Train Local_Simple,  epoch  49, local model 78, internal_epoch   1,  Average loss: 0.0100, Accuracy: 2000/2324 (86.0585%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 3.1472, Accuracy: 4599/10000 (45.9900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  49, local model 72, internal_epoch   1,  Average loss: 0.1739, Accuracy: 6/10 (60.0000%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 1.8241, Accuracy: 4881/10000 (48.8100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  49, local model 91, internal_epoch   1,  Average loss: 0.0286, Accuracy: 134/182 (73.6264%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 3.2864, Accuracy: 1094/10000 (10.9400%), Attack Success Rate:7/10000(0.070)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  49, local model 13, internal_epoch   1,  Average loss: 0.4158, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 13.97085917207168.
Norm before scaling: 13.970712272164278. Distance: 0.05686996332859972
Total norm for 3 adversaries is: 13.970712272164278. distance: 0.05686996332859972
___Test Local_Simple poisoned: True, epoch: 49: Average loss: 1.6743, Accuracy: 5851/8991 (65.0762%)
___Train Local_Simple,  epoch  49, local model 98, internal_epoch   1,  Average loss: 0.2253, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 1.8218, Accuracy: 4600/10000 (46.0000%), Attack Success Rate:0/10000(0.000)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  49, local model 21, internal_epoch   1,  Average loss: 0.0072, Accuracy: 1881/2072 (90.7819%), train_poison_data_count: 2072
Global model norm: 13.97085917207168.
Norm before scaling: 13.942725053201748. Distance: 1.729898742071817
Total norm for 3 adversaries is: 13.942725053201748. distance: 1.729898742071817
___Test Local_Simple poisoned: True, epoch: 49: Average loss: 7.1731, Accuracy: 2807/8991 (31.2201%)
___Train Local_Simple,  epoch  49, local model 82, internal_epoch   1,  Average loss: 0.0341, Accuracy: 86/114 (75.4386%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 2.6960, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  49, local model 74, internal_epoch   1,  Average loss: 0.0212, Accuracy: 507/762 (66.5354%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 4.2524, Accuracy: 2724/10000 (27.2400%), Attack Success Rate:8/10000(0.080)
time spent on training: 47.74478888511658
[foolsgold agg] training data poison_ratio: 0.35876475930971846  data num: [1544, 688, 2324, 10, 182, 5, 6, 2072, 114, 762]
[foolsgold agg] considering poison per batch poison_fraction: 0.3587647593097184
[foolsgold agg] wv: [0.71944587 1.         0.63231428 0.         0.81643644 0.
 0.         0.74270172 0.         0.63231428]
___Test Target_Simple poisoned: False, epoch: 49: Average loss: 1.7727, Accuracy: 5694/10000 (56.9400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 49: Average loss: 1.6493, Accuracy: 5693/8991 (63.3189%)
Done in 136.17016410827637 sec.
Server Epoch:50 choose agents : [75, 86, 51, 0, 31, 32, 67, 17, 29, 7].
___Train Local_Simple,  epoch  50, local model 75, internal_epoch   1,  Average loss: 0.0104, Accuracy: 456/497 (91.7505%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 8.5973, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  50, local model 86, internal_epoch   1,  Average loss: 0.0507, Accuracy: 19/34 (55.8824%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 1.7859, Accuracy: 5020/10000 (50.2000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  50, local model 51, internal_epoch   1,  Average loss: 0.0153, Accuracy: 214/259 (82.6255%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 3.8722, Accuracy: 1300/10000 (13.0000%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  50, local model 0, internal_epoch   1,  Average loss: 0.0167, Accuracy: 263/300 (87.6667%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 5.4673, Accuracy: 1136/10000 (11.3600%), Attack Success Rate:9/10000(0.090)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 31, internal_epoch   1,  Average loss: 0.0091, Accuracy: 1586/1839 (86.2425%), train_poison_data_count: 1839
Global model norm: 13.97484672339496.
Norm before scaling: 13.987136926106373. Distance: 1.521679925655385
Total norm for 5 adversaries is: 13.987136926106373. distance: 1.521679925655385
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 3.8840, Accuracy: 2869/8991 (31.9097%)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 32, internal_epoch   1,  Average loss: 0.0433, Accuracy: 28/28 (100.0000%), train_poison_data_count: 28
Global model norm: 13.97484672339496.
Norm before scaling: 13.976925499233829. Distance: 0.08359732263720504
Total norm for 5 adversaries is: 13.976925499233829. distance: 0.08359732263720504
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 1.7215, Accuracy: 3327/8991 (37.0037%)
___Train Local_Simple,  epoch  50, local model 67, internal_epoch   1,  Average loss: 0.0241, Accuracy: 379/568 (66.7254%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 2.9815, Accuracy: 3057/10000 (30.5700%), Attack Success Rate:3/10000(0.030)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 17, internal_epoch   1,  Average loss: 0.0239, Accuracy: 88/94 (93.6170%), train_poison_data_count: 94
Global model norm: 13.97484672339496.
Norm before scaling: 13.98066411570677. Distance: 0.18542491518561038
Total norm for 5 adversaries is: 13.98066411570677. distance: 0.18542491518561038
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 2.1096, Accuracy: 1381/8991 (15.3598%)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 29, internal_epoch   1,  Average loss: 0.0119, Accuracy: 1092/1232 (88.6364%), train_poison_data_count: 1232
Global model norm: 13.97484672339496.
Norm before scaling: 13.916904165712186. Distance: 0.9002944663246676
Total norm for 5 adversaries is: 13.916904165712186. distance: 0.9002944663246676
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 3.1602, Accuracy: 982/8991 (10.9220%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 7, internal_epoch   1,  Average loss: 0.0348, Accuracy: 70/86 (81.3953%), train_poison_data_count: 86
Global model norm: 13.97484672339496.
Norm before scaling: 13.978983226468886. Distance: 0.18757544430203843
Total norm for 5 adversaries is: 13.978983226468886. distance: 0.18757544430203843
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 1.9671, Accuracy: 1129/8991 (12.5570%)
time spent on training: 45.94876313209534
[foolsgold agg] training data poison_ratio: 0.6641685233947742  data num: [497, 34, 259, 300, 1839, 28, 568, 94, 1232, 86]
[foolsgold agg] considering poison per batch poison_fraction: 0.6641685233947742
[foolsgold agg] wv: [1.         0.58121109 0.68386916 0.78305145 1.         0.
 1.         0.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 50: Average loss: 1.7538, Accuracy: 5528/10000 (55.2800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 50: Average loss: 1.6323, Accuracy: 5531/8991 (61.5171%)
Done in 134.7197790145874 sec.
Server Epoch:51 choose agents : [36, 9, 6, 79, 4, 52, 48, 5, 87, 73].
___Train Local_Simple,  epoch  51, local model 36, internal_epoch   1,  Average loss: 0.0163, Accuracy: 242/304 (79.6053%)
___Test Local_Simple poisoned: False, epoch: 51: Average loss: 11.1903, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch  51, local model 9, internal_epoch   1,  Average loss: 0.0229, Accuracy: 178/263 (67.6806%), train_poison_data_count: 263
Global model norm: 13.97795712979765.
Norm before scaling: 14.005089515909308. Distance: 0.6901601996556015
Total norm for 4 adversaries is: 14.005089515909308. distance: 0.6901601996556015
___Test Local_Simple poisoned: True, epoch: 51: Average loss: 5.7210, Accuracy: 1831/8991 (20.3648%)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  51, local model 6, internal_epoch   1,  Average loss: 0.0093, Accuracy: 1702/1982 (85.8729%), train_poison_data_count: 1982
Global model norm: 13.97795712979765.
Norm before scaling: 13.963027089004779. Distance: 1.5983506910928273
Total norm for 4 adversaries is: 13.963027089004779. distance: 1.5983506910928273
___Test Local_Simple poisoned: True, epoch: 51: Average loss: 6.0804, Accuracy: 2565/8991 (28.5285%)
___Train Local_Simple,  epoch  51, local model 79, internal_epoch   1,  Average loss: 0.0827, Accuracy: 6/25 (24.0000%)
___Test Local_Simple poisoned: False, epoch: 51: Average loss: 1.7537, Accuracy: 5695/10000 (56.9500%), Attack Success Rate:0/10000(0.000)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  51, local model 4, internal_epoch   1,  Average loss: 0.0169, Accuracy: 403/463 (87.0410%), train_poison_data_count: 463
Global model norm: 13.97795712979765.
Norm before scaling: 14.018802006319328. Distance: 1.2408089335655546
Total norm for 4 adversaries is: 14.018802006319328. distance: 1.2408089335655546
___Test Local_Simple poisoned: True, epoch: 51: Average loss: 16.3564, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  51, local model 52, internal_epoch   1,  Average loss: 0.0144, Accuracy: 676/705 (95.8865%)
___Test Local_Simple poisoned: False, epoch: 51: Average loss: 13.8234, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  51, local model 48, internal_epoch   1,  Average loss: 0.0360, Accuracy: 77/128 (60.1562%)
___Test Local_Simple poisoned: False, epoch: 51: Average loss: 2.1363, Accuracy: 1966/10000 (19.6600%), Attack Success Rate:33/10000(0.330)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  51, local model 5, internal_epoch   1,  Average loss: 0.0133, Accuracy: 922/1046 (88.1453%), train_poison_data_count: 1046
Global model norm: 13.97795712979765.
Norm before scaling: 13.953633503122157. Distance: 1.4473978206167435
Total norm for 4 adversaries is: 13.953633503122157. distance: 1.4473978206167435
___Test Local_Simple poisoned: True, epoch: 51: Average loss: 4.8467, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  51, local model 87, internal_epoch   1,  Average loss: 0.0378, Accuracy: 30/33 (90.9091%)
___Test Local_Simple poisoned: False, epoch: 51: Average loss: 1.7602, Accuracy: 4833/10000 (48.3300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  51, local model 73, internal_epoch   1,  Average loss: 0.0114, Accuracy: 1032/1205 (85.6432%)
___Test Local_Simple poisoned: False, epoch: 51: Average loss: 4.3623, Accuracy: 1711/10000 (17.1100%), Attack Success Rate:28/10000(0.280)
time spent on training: 45.38165473937988
[foolsgold agg] training data poison_ratio: 0.6100097497562561  data num: [304, 263, 1982, 25, 463, 705, 128, 1046, 33, 1205]
[foolsgold agg] considering poison per batch poison_fraction: 0.6100097497562561
[foolsgold agg] wv: [0.         0.32402437 0.67939152 0.         0.         1.
 0.1209163  0.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 51: Average loss: 1.7482, Accuracy: 5675/10000 (56.7500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 51: Average loss: 1.6232, Accuracy: 5674/8991 (63.1076%)
Done in 133.7124843597412 sec.
Server Epoch:52 choose agents : [10, 31, 95, 82, 33, 30, 68, 11, 28, 70].
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  52, local model 10, internal_epoch   1,  Average loss: 0.0149, Accuracy: 532/688 (77.3256%), train_poison_data_count: 688
Global model norm: 13.978383951498392.
Norm before scaling: 14.032279811526863. Distance: 1.097248150858491
Total norm for 6 adversaries is: 14.032279811526863. distance: 1.097248150858491
___Test Local_Simple poisoned: True, epoch: 52: Average loss: 7.8746, Accuracy: 2751/8991 (30.5973%)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  52, local model 31, internal_epoch   1,  Average loss: 0.0090, Accuracy: 1568/1839 (85.2637%), train_poison_data_count: 1839
Global model norm: 13.978383951498392.
Norm before scaling: 13.987465287916322. Distance: 1.5138533944840382
Total norm for 6 adversaries is: 13.987465287916322. distance: 1.5138533944840382
___Test Local_Simple poisoned: True, epoch: 52: Average loss: 3.4148, Accuracy: 2912/8991 (32.3879%)
___Train Local_Simple,  epoch  52, local model 95, internal_epoch   1,  Average loss: 0.0469, Accuracy: 23/29 (79.3103%)
___Test Local_Simple poisoned: False, epoch: 52: Average loss: 1.7518, Accuracy: 5123/10000 (51.2300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  52, local model 82, internal_epoch   1,  Average loss: 0.0336, Accuracy: 82/114 (71.9298%)
___Test Local_Simple poisoned: False, epoch: 52: Average loss: 2.6454, Accuracy: 1056/10000 (10.5600%), Attack Success Rate:9/10000(0.090)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  52, local model 33, internal_epoch   1,  Average loss: 0.0159, Accuracy: 518/644 (80.4348%), train_poison_data_count: 644
Global model norm: 13.978383951498392.
Norm before scaling: 14.043352850275598. Distance: 1.0700770209569166
Total norm for 6 adversaries is: 14.043352850275598. distance: 1.0700770209569166
___Test Local_Simple poisoned: True, epoch: 52: Average loss: 9.0070, Accuracy: 2476/8991 (27.5386%)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  52, local model 30, internal_epoch   1,  Average loss: 0.0144, Accuracy: 634/818 (77.5061%), train_poison_data_count: 818
Global model norm: 13.978383951498392.
Norm before scaling: 14.035023069400127. Distance: 1.188103121135161
Total norm for 6 adversaries is: 14.035023069400127. distance: 1.188103121135161
___Test Local_Simple poisoned: True, epoch: 52: Average loss: 7.6321, Accuracy: 2898/8991 (32.2322%)
___Train Local_Simple,  epoch  52, local model 68, internal_epoch   1,  Average loss: 0.0102, Accuracy: 1387/1591 (87.1779%)
___Test Local_Simple poisoned: False, epoch: 52: Average loss: 4.4633, Accuracy: 1883/10000 (18.8300%), Attack Success Rate:34/10000(0.340)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  52, local model 11, internal_epoch   1,  Average loss: 0.0337, Accuracy: 66/84 (78.5714%), train_poison_data_count: 84
Global model norm: 13.978383951498392.
Norm before scaling: 13.982599071067817. Distance: 0.15323197194865368
Total norm for 6 adversaries is: 13.982599071067817. distance: 0.15323197194865368
___Test Local_Simple poisoned: True, epoch: 52: Average loss: 1.8026, Accuracy: 3166/8991 (35.2130%)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  52, local model 28, internal_epoch   1,  Average loss: 0.0214, Accuracy: 183/237 (77.2152%), train_poison_data_count: 237
Global model norm: 13.978383951498392.
Norm before scaling: 13.994361832035697. Distance: 0.4810603771423072
Total norm for 6 adversaries is: 13.994361832035697. distance: 0.4810603771423072
___Test Local_Simple poisoned: True, epoch: 52: Average loss: 4.5622, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch  52, local model 70, internal_epoch   1,  Average loss: 0.0291, Accuracy: 340/569 (59.7540%)
___Test Local_Simple poisoned: False, epoch: 52: Average loss: 3.0115, Accuracy: 2224/10000 (22.2400%), Attack Success Rate:23/10000(0.230)
time spent on training: 50.0427770614624
[foolsgold agg] training data poison_ratio: 0.6517465598064418  data num: [688, 1839, 29, 114, 644, 818, 1591, 84, 237, 569]
[foolsgold agg] considering poison per batch poison_fraction: 0.6517465598064418
[foolsgold agg] wv: [0.45472861 0.45472861 1.         1.         0.         0.
 1.         0.         0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 52: Average loss: 1.7222, Accuracy: 5877/10000 (58.7700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 52: Average loss: 1.5886, Accuracy: 5883/8991 (65.4321%)
Done in 138.43188667297363 sec.
Server Epoch:53 choose agents : [63, 99, 35, 31, 85, 62, 21, 81, 52, 26].
___Train Local_Simple,  epoch  53, local model 63, internal_epoch   1,  Average loss: 0.0063, Accuracy: 2779/3022 (91.9590%)
___Test Local_Simple poisoned: False, epoch: 53: Average loss: 3.8302, Accuracy: 1611/10000 (16.1100%), Attack Success Rate:31/10000(0.310)
___Train Local_Simple,  epoch  53, local model 99, internal_epoch   1,  Average loss: 0.0063, Accuracy: 402/411 (97.8102%)
___Test Local_Simple poisoned: False, epoch: 53: Average loss: 9.0281, Accuracy: 980/10000 (9.8000%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  53, local model 35, internal_epoch   1,  Average loss: 0.0091, Accuracy: 903/978 (92.3313%)
___Test Local_Simple poisoned: False, epoch: 53: Average loss: 3.9919, Accuracy: 1670/10000 (16.7000%), Attack Success Rate:25/10000(0.250)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  53, local model 31, internal_epoch   1,  Average loss: 0.0095, Accuracy: 1552/1839 (84.3937%), train_poison_data_count: 1839
Global model norm: 13.980963707534837.
Norm before scaling: 14.003819080969986. Distance: 1.56430140603762
Total norm for 3 adversaries is: 14.003819080969986. distance: 1.56430140603762
___Test Local_Simple poisoned: True, epoch: 53: Average loss: 3.2706, Accuracy: 2836/8991 (31.5427%)
___Train Local_Simple,  epoch  53, local model 85, internal_epoch   1,  Average loss: 0.3971, Accuracy: 3/4 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 53: Average loss: 1.7247, Accuracy: 5465/10000 (54.6500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  53, local model 62, internal_epoch   1,  Average loss: 0.8174, Accuracy: 2/2 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 53: Average loss: 1.7542, Accuracy: 4872/10000 (48.7200%), Attack Success Rate:0/10000(0.000)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  53, local model 21, internal_epoch   1,  Average loss: 0.0067, Accuracy: 1904/2072 (91.8919%), train_poison_data_count: 2072
Global model norm: 13.980963707534837.
Norm before scaling: 13.952074581646844. Distance: 1.691400259240798
Total norm for 3 adversaries is: 13.952074581646844. distance: 1.691400259240798
___Test Local_Simple poisoned: True, epoch: 53: Average loss: 5.5584, Accuracy: 2791/8991 (31.0422%)
___Train Local_Simple,  epoch  53, local model 81, internal_epoch   1,  Average loss: 0.0465, Accuracy: 55/68 (80.8824%)
___Test Local_Simple poisoned: False, epoch: 53: Average loss: 1.9647, Accuracy: 1936/10000 (19.3600%), Attack Success Rate:32/10000(0.320)
___Train Local_Simple,  epoch  53, local model 52, internal_epoch   1,  Average loss: 0.0069, Accuracy: 677/705 (96.0284%)
___Test Local_Simple poisoned: False, epoch: 53: Average loss: 20.2039, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:8/10000(0.080)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  53, local model 26, internal_epoch   1,  Average loss: 0.0061, Accuracy: 1195/1311 (91.1518%), train_poison_data_count: 1311
Global model norm: 13.980963707534837.
Norm before scaling: 14.008539048015164. Distance: 1.5151100463683163
Total norm for 3 adversaries is: 14.008539048015164. distance: 1.5151100463683163
___Test Local_Simple poisoned: True, epoch: 53: Average loss: 15.9787, Accuracy: 1494/8991 (16.6166%)
time spent on training: 50.23579549789429
[foolsgold agg] training data poison_ratio: 0.5015366884364195  data num: [3022, 411, 978, 1839, 4, 2, 2072, 68, 705, 1311]
[foolsgold agg] considering poison per batch poison_fraction: 0.5015366884364195
[foolsgold agg] wv: [1. 1. 1. 1. 1. 1. 0. 0. 0. 0.]
___Test Target_Simple poisoned: False, epoch: 53: Average loss: 1.6962, Accuracy: 5836/10000 (58.3600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 53: Average loss: 1.5788, Accuracy: 5856/8991 (65.1318%)
Done in 138.94634127616882 sec.
Server Epoch:54 choose agents : [27, 54, 48, 85, 16, 43, 52, 29, 93, 78].
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  54, local model 27, internal_epoch   1,  Average loss: 0.0143, Accuracy: 598/678 (88.2006%), train_poison_data_count: 678
Global model norm: 13.982970643521288.
Norm before scaling: 13.968964645477543. Distance: 0.9602934997645264
Total norm for 3 adversaries is: 13.968964645477543. distance: 0.9602934997645264
___Test Local_Simple poisoned: True, epoch: 54: Average loss: 4.0005, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  54, local model 54, internal_epoch   1,  Average loss: 0.0417, Accuracy: 38/91 (41.7582%)
___Test Local_Simple poisoned: False, epoch: 54: Average loss: 1.7357, Accuracy: 6052/10000 (60.5200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  54, local model 48, internal_epoch   1,  Average loss: 0.0346, Accuracy: 86/128 (67.1875%)
___Test Local_Simple poisoned: False, epoch: 54: Average loss: 2.0809, Accuracy: 1999/10000 (19.9900%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  54, local model 85, internal_epoch   1,  Average loss: 0.3871, Accuracy: 3/4 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 54: Average loss: 1.7016, Accuracy: 5470/10000 (54.7000%), Attack Success Rate:0/10000(0.000)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  54, local model 16, internal_epoch   1,  Average loss: 0.0118, Accuracy: 835/994 (84.0040%), train_poison_data_count: 994
Global model norm: 13.982970643521288.
Norm before scaling: 14.031618109209477. Distance: 0.9529578265558402
Total norm for 3 adversaries is: 14.031618109209477. distance: 0.9529578265558402
___Test Local_Simple poisoned: True, epoch: 54: Average loss: 2.5111, Accuracy: 3789/8991 (42.1421%)
___Train Local_Simple,  epoch  54, local model 43, internal_epoch   1,  Average loss: 0.2215, Accuracy: 4/6 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 54: Average loss: 1.7064, Accuracy: 5228/10000 (52.2800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  54, local model 52, internal_epoch   1,  Average loss: 0.0062, Accuracy: 672/705 (95.3191%)
___Test Local_Simple poisoned: False, epoch: 54: Average loss: 25.3346, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:12/10000(0.120)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  54, local model 29, internal_epoch   1,  Average loss: 0.0123, Accuracy: 1086/1232 (88.1494%), train_poison_data_count: 1232
Global model norm: 13.982970643521288.
Norm before scaling: 13.928995180496017. Distance: 0.9171992871438511
Total norm for 3 adversaries is: 13.928995180496017. distance: 0.9171992871438511
___Test Local_Simple poisoned: True, epoch: 54: Average loss: 2.8433, Accuracy: 1011/8991 (11.2446%)
___Train Local_Simple,  epoch  54, local model 93, internal_epoch   1,  Average loss: 0.0560, Accuracy: 22/30 (73.3333%)
___Test Local_Simple poisoned: False, epoch: 54: Average loss: 1.7164, Accuracy: 5083/10000 (50.8300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  54, local model 78, internal_epoch   1,  Average loss: 0.0091, Accuracy: 2009/2324 (86.4458%)
___Test Local_Simple poisoned: False, epoch: 54: Average loss: 3.0929, Accuracy: 4829/10000 (48.2900%), Attack Success Rate:0/10000(0.000)
time spent on training: 44.60005331039429
[foolsgold agg] training data poison_ratio: 0.4689922480620155  data num: [678, 91, 128, 4, 994, 6, 705, 1232, 30, 2324]
[foolsgold agg] considering poison per batch poison_fraction: 0.4689922480620155
[foolsgold agg] wv: [0.         1.         0.60716755 0.         1.         1.
 1.         1.         0.         0.60716755]
___Test Target_Simple poisoned: False, epoch: 54: Average loss: 1.6733, Accuracy: 6077/10000 (60.7700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 54: Average loss: 1.5474, Accuracy: 6096/8991 (67.8011%)
Done in 136.44899034500122 sec.
Server Epoch:55 choose agents : [5, 85, 24, 0, 35, 65, 46, 29, 45, 69].
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  55, local model 5, internal_epoch   1,  Average loss: 0.0147, Accuracy: 929/1046 (88.8145%), train_poison_data_count: 1046
Global model norm: 13.986042694729237.
Norm before scaling: 13.967598067540717. Distance: 1.4083611641716582
Total norm for 3 adversaries is: 13.967598067540717. distance: 1.4083611641716582
___Test Local_Simple poisoned: True, epoch: 55: Average loss: 6.1655, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  55, local model 85, internal_epoch   1,  Average loss: 0.3885, Accuracy: 3/4 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 55: Average loss: 1.6770, Accuracy: 5648/10000 (56.4800%), Attack Success Rate:0/10000(0.000)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  55, local model 24, internal_epoch   1,  Average loss: 0.3086, Accuracy: 4/5 (80.0000%), train_poison_data_count: 5
Global model norm: 13.986042694729237.
Norm before scaling: 13.987255835426192. Distance: 0.0657364252696504
Total norm for 3 adversaries is: 13.987255835426192. distance: 0.0657364252696504
___Test Local_Simple poisoned: True, epoch: 55: Average loss: 1.5482, Accuracy: 5899/8991 (65.6101%)
___Train Local_Simple,  epoch  55, local model 0, internal_epoch   1,  Average loss: 0.0138, Accuracy: 267/300 (89.0000%)
___Test Local_Simple poisoned: False, epoch: 55: Average loss: 5.4981, Accuracy: 1137/10000 (11.3700%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  55, local model 35, internal_epoch   1,  Average loss: 0.0096, Accuracy: 908/978 (92.8425%)
___Test Local_Simple poisoned: False, epoch: 55: Average loss: 3.8273, Accuracy: 1632/10000 (16.3200%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  55, local model 65, internal_epoch   1,  Average loss: 0.0100, Accuracy: 1145/1326 (86.3499%)
___Test Local_Simple poisoned: False, epoch: 55: Average loss: 4.4712, Accuracy: 1940/10000 (19.4000%), Attack Success Rate:36/10000(0.360)
___Train Local_Simple,  epoch  55, local model 46, internal_epoch   1,  Average loss: 0.0349, Accuracy: 143/310 (46.1290%)
___Test Local_Simple poisoned: False, epoch: 55: Average loss: 2.8856, Accuracy: 1978/10000 (19.7800%), Attack Success Rate:24/10000(0.240)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  55, local model 29, internal_epoch   1,  Average loss: 0.0109, Accuracy: 1089/1232 (88.3929%), train_poison_data_count: 1232
Global model norm: 13.986042694729237.
Norm before scaling: 13.934425459652974. Distance: 0.8924054869928955
Total norm for 3 adversaries is: 13.934425459652974. distance: 0.8924054869928955
___Test Local_Simple poisoned: True, epoch: 55: Average loss: 2.8591, Accuracy: 1025/8991 (11.4003%)
___Train Local_Simple,  epoch  55, local model 45, internal_epoch   1,  Average loss: 0.0154, Accuracy: 315/388 (81.1856%)
___Test Local_Simple poisoned: False, epoch: 55: Average loss: 7.4334, Accuracy: 1922/10000 (19.2200%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch  55, local model 69, internal_epoch   1,  Average loss: 0.0109, Accuracy: 524/586 (89.4198%)
___Test Local_Simple poisoned: False, epoch: 55: Average loss: 6.1790, Accuracy: 1692/10000 (16.9200%), Attack Success Rate:20/10000(0.200)
time spent on training: 44.91799974441528
[foolsgold agg] training data poison_ratio: 0.3697165991902834  data num: [1046, 4, 5, 300, 978, 1326, 310, 1232, 388, 586]
[foolsgold agg] considering poison per batch poison_fraction: 0.3697165991902834
[foolsgold agg] wv: [1.         0.09966872 1.         0.1122774  0.1122774  1.
 0.38340504 1.         0.09966872 0.38340504]
___Test Target_Simple poisoned: False, epoch: 55: Average loss: 1.6646, Accuracy: 6272/10000 (62.7200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 55: Average loss: 1.5321, Accuracy: 6287/8991 (69.9255%)
Done in 133.3144748210907 sec.
Server Epoch:56 choose agents : [10, 16, 41, 45, 65, 81, 24, 64, 48, 29].
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  56, local model 10, internal_epoch   1,  Average loss: 0.0164, Accuracy: 490/688 (71.2209%), train_poison_data_count: 688
Global model norm: 13.987593466929676.
Norm before scaling: 14.027388893167403. Distance: 1.006679341434323
Total norm for 4 adversaries is: 14.027388893167403. distance: 1.006679341434323
___Test Local_Simple poisoned: True, epoch: 56: Average loss: 5.1439, Accuracy: 2423/8991 (26.9492%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  56, local model 16, internal_epoch   1,  Average loss: 0.0110, Accuracy: 856/994 (86.1167%), train_poison_data_count: 994
Global model norm: 13.987593466929676.
Norm before scaling: 14.0283238135764. Distance: 0.9039729879234238
Total norm for 4 adversaries is: 14.0283238135764. distance: 0.9039729879234238
___Test Local_Simple poisoned: True, epoch: 56: Average loss: 2.3478, Accuracy: 3957/8991 (44.0107%)
___Train Local_Simple,  epoch  56, local model 41, internal_epoch   1,  Average loss: 0.0188, Accuracy: 361/509 (70.9234%)
___Test Local_Simple poisoned: False, epoch: 56: Average loss: 8.7632, Accuracy: 974/10000 (9.7400%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  56, local model 45, internal_epoch   1,  Average loss: 0.0167, Accuracy: 296/388 (76.2887%)
___Test Local_Simple poisoned: False, epoch: 56: Average loss: 6.0277, Accuracy: 1790/10000 (17.9000%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  56, local model 65, internal_epoch   1,  Average loss: 0.0098, Accuracy: 1158/1326 (87.3303%)
___Test Local_Simple poisoned: False, epoch: 56: Average loss: 3.6039, Accuracy: 2028/10000 (20.2800%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  56, local model 81, internal_epoch   1,  Average loss: 0.0450, Accuracy: 50/68 (73.5294%)
___Test Local_Simple poisoned: False, epoch: 56: Average loss: 1.8829, Accuracy: 2547/10000 (25.4700%), Attack Success Rate:14/10000(0.140)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  56, local model 24, internal_epoch   1,  Average loss: 0.2959, Accuracy: 4/5 (80.0000%), train_poison_data_count: 5
Global model norm: 13.987593466929676.
Norm before scaling: 13.988907370446961. Distance: 0.06398110874512017
Total norm for 4 adversaries is: 13.988907370446961. distance: 0.06398110874512017
___Test Local_Simple poisoned: True, epoch: 56: Average loss: 1.5370, Accuracy: 5914/8991 (65.7769%)
___Train Local_Simple,  epoch  56, local model 64, internal_epoch   1,  Average loss: 0.0242, Accuracy: 151/216 (69.9074%)
___Test Local_Simple poisoned: False, epoch: 56: Average loss: 5.9799, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  56, local model 48, internal_epoch   1,  Average loss: 0.0325, Accuracy: 107/128 (83.5938%)
___Test Local_Simple poisoned: False, epoch: 56: Average loss: 2.1419, Accuracy: 1987/10000 (19.8700%), Attack Success Rate:39/10000(0.390)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  56, local model 29, internal_epoch   1,  Average loss: 0.0120, Accuracy: 1091/1232 (88.5552%), train_poison_data_count: 1232
Global model norm: 13.987593466929676.
Norm before scaling: 13.942916570264329. Distance: 0.9111517508645226
Total norm for 4 adversaries is: 13.942916570264329. distance: 0.9111517508645226
___Test Local_Simple poisoned: True, epoch: 56: Average loss: 3.3847, Accuracy: 995/8991 (11.0666%)
time spent on training: 45.56563758850098
[foolsgold agg] training data poison_ratio: 0.5255671588044653  data num: [688, 994, 509, 388, 1326, 68, 5, 216, 128, 1232]
[foolsgold agg] considering poison per batch poison_fraction: 0.5255671588044653
[foolsgold agg] wv: [1.         0.82776811 0.01361631 0.80258553 1.         0.95512536
 0.98243081 0.01361631 1.         0.95512536]
___Test Target_Simple poisoned: False, epoch: 56: Average loss: 1.6442, Accuracy: 6461/10000 (64.6100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 56: Average loss: 1.4989, Accuracy: 6476/8991 (72.0276%)
Done in 134.22109723091125 sec.
Server Epoch:57 choose agents : [43, 96, 61, 70, 67, 8, 68, 93, 30, 71].
___Train Local_Simple,  epoch  57, local model 43, internal_epoch   1,  Average loss: 0.2143, Accuracy: 3/6 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 1.6489, Accuracy: 5717/10000 (57.1700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  57, local model 96, internal_epoch   1,  Average loss: 0.0179, Accuracy: 394/505 (78.0198%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 8.6499, Accuracy: 1049/10000 (10.4900%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  57, local model 61, internal_epoch   1,  Average loss: 0.0114, Accuracy: 657/767 (85.6584%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 5.6301, Accuracy: 2866/10000 (28.6600%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  57, local model 70, internal_epoch   1,  Average loss: 0.0271, Accuracy: 356/569 (62.5659%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 2.8699, Accuracy: 2185/10000 (21.8500%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch  57, local model 67, internal_epoch   1,  Average loss: 0.0234, Accuracy: 396/568 (69.7183%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 2.8165, Accuracy: 3410/10000 (34.1000%), Attack Success Rate:1/10000(0.010)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  57, local model 8, internal_epoch   1,  Average loss: 0.0221, Accuracy: 140/171 (81.8713%), train_poison_data_count: 171
Global model norm: 13.991436110129229.
Norm before scaling: 14.006071136707947. Distance: 0.4629170374034744
Total norm for 2 adversaries is: 14.006071136707947. distance: 0.4629170374034744
___Test Local_Simple poisoned: True, epoch: 57: Average loss: 4.6588, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  57, local model 68, internal_epoch   1,  Average loss: 0.0100, Accuracy: 1394/1591 (87.6179%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 4.2934, Accuracy: 1907/10000 (19.0700%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch  57, local model 93, internal_epoch   1,  Average loss: 0.0536, Accuracy: 24/30 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 1.6637, Accuracy: 5565/10000 (55.6500%), Attack Success Rate:0/10000(0.000)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  57, local model 30, internal_epoch   1,  Average loss: 0.0138, Accuracy: 638/818 (77.9951%), train_poison_data_count: 818
Global model norm: 13.991436110129229.
Norm before scaling: 14.048576005879342. Distance: 1.1410073462541477
Total norm for 2 adversaries is: 14.048576005879342. distance: 1.1410073462541477
___Test Local_Simple poisoned: True, epoch: 57: Average loss: 7.7632, Accuracy: 2819/8991 (31.3536%)
___Train Local_Simple,  epoch  57, local model 71, internal_epoch   1,  Average loss: 0.0276, Accuracy: 185/342 (54.0936%)
___Test Local_Simple poisoned: False, epoch: 57: Average loss: 2.6275, Accuracy: 3460/10000 (34.6000%), Attack Success Rate:0/10000(0.000)
time spent on training: 43.7715368270874
[foolsgold agg] training data poison_ratio: 0.18427426867896404  data num: [6, 505, 767, 569, 568, 171, 1591, 30, 818, 342]
[foolsgold agg] considering poison per batch poison_fraction: 0.18427426867896404
[foolsgold agg] wv: [0.27485167 0.27485167 1.         1.         1.         0.
 1.         0.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 57: Average loss: 1.6050, Accuracy: 6556/10000 (65.5600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 57: Average loss: 1.4664, Accuracy: 6572/8991 (73.0953%)
Done in 132.4431540966034 sec.
Server Epoch:58 choose agents : [77, 32, 80, 30, 53, 41, 13, 49, 17, 31].
___Train Local_Simple,  epoch  58, local model 77, internal_epoch   1,  Average loss: 0.0088, Accuracy: 1353/1544 (87.6295%)
___Test Local_Simple poisoned: False, epoch: 58: Average loss: 4.0068, Accuracy: 3694/10000 (36.9400%), Attack Success Rate:0/10000(0.000)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  58, local model 32, internal_epoch   1,  Average loss: 0.0370, Accuracy: 28/28 (100.0000%), train_poison_data_count: 28
Global model norm: 13.995912772692616.
Norm before scaling: 13.998186266441806. Distance: 0.08084762218312615
Total norm for 5 adversaries is: 13.998186266441806. distance: 0.08084762218312615
___Test Local_Simple poisoned: True, epoch: 58: Average loss: 1.5189, Accuracy: 4640/8991 (51.6072%)
___Train Local_Simple,  epoch  58, local model 80, internal_epoch   1,  Average loss: 0.0320, Accuracy: 63/84 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 58: Average loss: 2.2004, Accuracy: 1236/10000 (12.3600%), Attack Success Rate:13/10000(0.130)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  58, local model 30, internal_epoch   1,  Average loss: 0.0132, Accuracy: 640/818 (78.2396%), train_poison_data_count: 818
Global model norm: 13.995912772692616.
Norm before scaling: 14.056032583981624. Distance: 1.1700185694402816
Total norm for 5 adversaries is: 14.056032583981624. distance: 1.1700185694402816
___Test Local_Simple poisoned: True, epoch: 58: Average loss: 8.6801, Accuracy: 2475/8991 (27.5275%)
___Train Local_Simple,  epoch  58, local model 53, internal_epoch   1,  Average loss: 0.0129, Accuracy: 420/456 (92.1053%)
___Test Local_Simple poisoned: False, epoch: 58: Average loss: 9.8734, Accuracy: 2104/10000 (21.0400%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  58, local model 41, internal_epoch   1,  Average loss: 0.0189, Accuracy: 374/509 (73.4774%)
___Test Local_Simple poisoned: False, epoch: 58: Average loss: 7.6982, Accuracy: 1508/10000 (15.0800%), Attack Success Rate:19/10000(0.190)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  58, local model 13, internal_epoch   1,  Average loss: 0.3596, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 13.995912772692616.
Norm before scaling: 13.996449156455999. Distance: 0.05853366353814508
Total norm for 5 adversaries is: 13.996449156455999. distance: 0.05853366353814508
___Test Local_Simple poisoned: True, epoch: 58: Average loss: 1.4705, Accuracy: 6620/8991 (73.6292%)
___Train Local_Simple,  epoch  58, local model 49, internal_epoch   1,  Average loss: 0.0129, Accuracy: 184/196 (93.8776%)
___Test Local_Simple poisoned: False, epoch: 58: Average loss: 4.9027, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:7/10000(0.070)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  58, local model 17, internal_epoch   1,  Average loss: 0.0221, Accuracy: 82/94 (87.2340%), train_poison_data_count: 94
Global model norm: 13.995912772692616.
Norm before scaling: 14.001586824133541. Distance: 0.18593373374971361
Total norm for 5 adversaries is: 14.001586824133541. distance: 0.18593373374971361
___Test Local_Simple poisoned: True, epoch: 58: Average loss: 1.8888, Accuracy: 1752/8991 (19.4862%)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  58, local model 31, internal_epoch   1,  Average loss: 0.0078, Accuracy: 1644/1839 (89.3964%), train_poison_data_count: 1839
Global model norm: 13.995912772692616.
Norm before scaling: 13.997843440033172. Distance: 1.3669028721580998
Total norm for 5 adversaries is: 13.997843440033172. distance: 1.3669028721580998
___Test Local_Simple poisoned: True, epoch: 58: Average loss: 3.7091, Accuracy: 3630/8991 (40.3737%)
time spent on training: 48.639187812805176
[foolsgold agg] training data poison_ratio: 0.499551408577068  data num: [1544, 28, 84, 818, 456, 509, 5, 196, 94, 1839]
[foolsgold agg] considering poison per batch poison_fraction: 0.4995514085770679
[foolsgold agg] wv: [0.86172238 0.         1.         1.         1.         1.
 1.         0.86172238 0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 58: Average loss: 1.5716, Accuracy: 6559/10000 (65.5900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 58: Average loss: 1.4227, Accuracy: 6609/8991 (73.5068%)
Done in 136.96268939971924 sec.
Server Epoch:59 choose agents : [46, 56, 12, 72, 79, 17, 71, 70, 74, 27].
___Train Local_Simple,  epoch  59, local model 46, internal_epoch   1,  Average loss: 0.0320, Accuracy: 158/310 (50.9677%)
___Test Local_Simple poisoned: False, epoch: 59: Average loss: 2.9852, Accuracy: 1973/10000 (19.7300%), Attack Success Rate:32/10000(0.320)
___Train Local_Simple,  epoch  59, local model 56, internal_epoch   1,  Average loss: 0.0094, Accuracy: 664/704 (94.3182%)
___Test Local_Simple poisoned: False, epoch: 59: Average loss: 7.5785, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  59, local model 12, internal_epoch   1,  Average loss: 0.0093, Accuracy: 589/648 (90.8951%), train_poison_data_count: 648
Global model norm: 14.001284949054117.
Norm before scaling: 14.042604198154116. Distance: 0.7754724493021125
Total norm for 3 adversaries is: 14.042604198154116. distance: 0.7754724493021125
___Test Local_Simple poisoned: True, epoch: 59: Average loss: 4.1636, Accuracy: 3169/8991 (35.2464%)
___Train Local_Simple,  epoch  59, local model 72, internal_epoch   1,  Average loss: 0.1514, Accuracy: 8/10 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 59: Average loss: 1.5980, Accuracy: 5496/10000 (54.9600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  59, local model 79, internal_epoch   1,  Average loss: 0.0736, Accuracy: 9/25 (36.0000%)
___Test Local_Simple poisoned: False, epoch: 59: Average loss: 1.5851, Accuracy: 5840/10000 (58.4000%), Attack Success Rate:0/10000(0.000)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  59, local model 17, internal_epoch   1,  Average loss: 0.0221, Accuracy: 86/94 (91.4894%), train_poison_data_count: 94
Global model norm: 14.001284949054117.
Norm before scaling: 14.007030356719532. Distance: 0.19240789685606324
Total norm for 3 adversaries is: 14.007030356719532. distance: 0.19240789685606324
___Test Local_Simple poisoned: True, epoch: 59: Average loss: 1.8439, Accuracy: 2006/8991 (22.3112%)
___Train Local_Simple,  epoch  59, local model 71, internal_epoch   1,  Average loss: 0.0259, Accuracy: 212/342 (61.9883%)
___Test Local_Simple poisoned: False, epoch: 59: Average loss: 2.5318, Accuracy: 4720/10000 (47.2000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  59, local model 70, internal_epoch   1,  Average loss: 0.0243, Accuracy: 385/569 (67.6626%)
___Test Local_Simple poisoned: False, epoch: 59: Average loss: 2.9646, Accuracy: 3450/10000 (34.5000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  59, local model 74, internal_epoch   1,  Average loss: 0.0188, Accuracy: 511/762 (67.0604%)
___Test Local_Simple poisoned: False, epoch: 59: Average loss: 3.4096, Accuracy: 3661/10000 (36.6100%), Attack Success Rate:0/10000(0.000)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  59, local model 27, internal_epoch   1,  Average loss: 0.0122, Accuracy: 604/678 (89.0855%), train_poison_data_count: 678
Global model norm: 14.001284949054117.
Norm before scaling: 13.990175342129048. Distance: 0.9222185820069786
Total norm for 3 adversaries is: 13.990175342129048. distance: 0.9222185820069786
___Test Local_Simple poisoned: True, epoch: 59: Average loss: 4.9731, Accuracy: 1010/8991 (11.2335%)
time spent on training: 42.89763045310974
[foolsgold agg] training data poison_ratio: 0.34282955094157413  data num: [310, 704, 648, 10, 25, 94, 342, 569, 762, 678]
[foolsgold agg] considering poison per batch poison_fraction: 0.34282955094157413
[foolsgold agg] wv: [0.9627702  1.         0.39068686 0.         1.         0.39068686
 0.8612372  0.8612372  1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 59: Average loss: 1.5483, Accuracy: 6642/10000 (66.4200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 59: Average loss: 1.4070, Accuracy: 6678/8991 (74.2743%)
Done in 131.26884293556213 sec.
Server Epoch:60 choose agents : [4, 49, 74, 6, 16, 59, 46, 66, 84, 63].
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  60, local model 4, internal_epoch   1,  Average loss: 0.0095, Accuracy: 426/463 (92.0086%), train_poison_data_count: 463
Global model norm: 14.003751524598519.
Norm before scaling: 14.042084247179362. Distance: 1.101184753147802
Total norm for 3 adversaries is: 14.042084247179362. distance: 1.101184753147802
___Test Local_Simple poisoned: True, epoch: 60: Average loss: 17.3896, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  60, local model 49, internal_epoch   1,  Average loss: 0.0110, Accuracy: 183/196 (93.3673%)
___Test Local_Simple poisoned: False, epoch: 60: Average loss: 4.6551, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  60, local model 74, internal_epoch   1,  Average loss: 0.0167, Accuracy: 569/762 (74.6719%)
___Test Local_Simple poisoned: False, epoch: 60: Average loss: 4.3688, Accuracy: 3687/10000 (36.8700%), Attack Success Rate:0/10000(0.000)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  60, local model 6, internal_epoch   1,  Average loss: 0.0077, Accuracy: 1763/1982 (88.9506%), train_poison_data_count: 1982
Global model norm: 14.003751524598519.
Norm before scaling: 13.978666672763973. Distance: 1.4641021885983394
Total norm for 3 adversaries is: 13.978666672763973. distance: 1.4641021885983394
___Test Local_Simple poisoned: True, epoch: 60: Average loss: 8.4030, Accuracy: 2528/8991 (28.1170%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  60, local model 16, internal_epoch   1,  Average loss: 0.0098, Accuracy: 864/994 (86.9215%), train_poison_data_count: 994
Global model norm: 14.003751524598519.
Norm before scaling: 14.046587133799507. Distance: 0.8974470567096773
Total norm for 3 adversaries is: 14.046587133799507. distance: 0.8974470567096773
___Test Local_Simple poisoned: True, epoch: 60: Average loss: 2.0985, Accuracy: 4290/8991 (47.7144%)
___Train Local_Simple,  epoch  60, local model 59, internal_epoch   1,  Average loss: 0.0472, Accuracy: 24/27 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 60: Average loss: 1.6135, Accuracy: 5426/10000 (54.2600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  60, local model 46, internal_epoch   1,  Average loss: 0.0310, Accuracy: 165/310 (53.2258%)
___Test Local_Simple poisoned: False, epoch: 60: Average loss: 2.9576, Accuracy: 2023/10000 (20.2300%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch  60, local model 66, internal_epoch   1,  Average loss: 0.0080, Accuracy: 610/681 (89.5742%)
___Test Local_Simple poisoned: False, epoch: 60: Average loss: 4.6530, Accuracy: 3076/10000 (30.7600%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  60, local model 84, internal_epoch   1,  Average loss: 0.0764, Accuracy: 8/29 (27.5862%)
___Test Local_Simple poisoned: False, epoch: 60: Average loss: 1.5128, Accuracy: 6565/10000 (65.6500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  60, local model 63, internal_epoch   1,  Average loss: 0.0059, Accuracy: 2798/3022 (92.5877%)
___Test Local_Simple poisoned: False, epoch: 60: Average loss: 4.5663, Accuracy: 1238/10000 (12.3800%), Attack Success Rate:13/10000(0.130)
time spent on training: 49.60964012145996
[foolsgold agg] training data poison_ratio: 0.40621308764469644  data num: [463, 196, 762, 1982, 994, 27, 310, 681, 29, 3022]
[foolsgold agg] considering poison per batch poison_fraction: 0.40621308764469644
[foolsgold agg] wv: [1. 0. 1. 0. 1. 1. 0. 0. 0. 0.]
___Test Target_Simple poisoned: False, epoch: 60: Average loss: 1.5342, Accuracy: 6748/10000 (67.4800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 60: Average loss: 1.3935, Accuracy: 6779/8991 (75.3976%)
Done in 137.92529249191284 sec.
Server Epoch:61 choose agents : [23, 92, 22, 91, 70, 58, 35, 12, 55, 94].
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  61, local model 23, internal_epoch   1,  Average loss: 0.0087, Accuracy: 407/428 (95.0935%), train_poison_data_count: 428
Global model norm: 14.005970363046856.
Norm before scaling: 14.050786136884055. Distance: 0.8106171726857729
Total norm for 3 adversaries is: 14.050786136884055. distance: 0.8106171726857729
___Test Local_Simple poisoned: True, epoch: 61: Average loss: 8.2685, Accuracy: 1963/8991 (21.8329%)
___Train Local_Simple,  epoch  61, local model 92, internal_epoch   1,  Average loss: 0.0164, Accuracy: 178/202 (88.1188%)
___Test Local_Simple poisoned: False, epoch: 61: Average loss: 7.1847, Accuracy: 958/10000 (9.5800%), Attack Success Rate:7/10000(0.070)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch  61, local model 22, internal_epoch   1,  Average loss: 0.0465, Accuracy: 19/34 (55.8824%), train_poison_data_count: 34
Global model norm: 14.005970363046856.
Norm before scaling: 14.007049420619593. Distance: 0.0698457231285566
Total norm for 3 adversaries is: 14.007049420619593. distance: 0.0698457231285566
___Test Local_Simple poisoned: True, epoch: 61: Average loss: 1.4218, Accuracy: 5426/8991 (60.3492%)
___Train Local_Simple,  epoch  61, local model 91, internal_epoch   1,  Average loss: 0.0238, Accuracy: 155/182 (85.1648%)
___Test Local_Simple poisoned: False, epoch: 61: Average loss: 3.2514, Accuracy: 1710/10000 (17.1000%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch  61, local model 70, internal_epoch   1,  Average loss: 0.0243, Accuracy: 357/569 (62.7417%)
___Test Local_Simple poisoned: False, epoch: 61: Average loss: 3.0159, Accuracy: 2251/10000 (22.5100%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch  61, local model 58, internal_epoch   1,  Average loss: 0.0162, Accuracy: 769/1015 (75.7635%)
___Test Local_Simple poisoned: False, epoch: 61: Average loss: 5.3283, Accuracy: 3961/10000 (39.6100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  61, local model 35, internal_epoch   1,  Average loss: 0.0078, Accuracy: 912/978 (93.2515%)
___Test Local_Simple poisoned: False, epoch: 61: Average loss: 3.5833, Accuracy: 2477/10000 (24.7700%), Attack Success Rate:12/10000(0.120)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  61, local model 12, internal_epoch   1,  Average loss: 0.0093, Accuracy: 584/648 (90.1235%), train_poison_data_count: 648
Global model norm: 14.005970363046856.
Norm before scaling: 14.052147882349583. Distance: 0.800891068534476
Total norm for 3 adversaries is: 14.052147882349583. distance: 0.800891068534476
___Test Local_Simple poisoned: True, epoch: 61: Average loss: 4.3575, Accuracy: 3082/8991 (34.2787%)
___Train Local_Simple,  epoch  61, local model 55, internal_epoch   1,  Average loss: 0.0096, Accuracy: 2412/2803 (86.0507%)
___Test Local_Simple poisoned: False, epoch: 61: Average loss: 3.8342, Accuracy: 4612/10000 (46.1200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  61, local model 94, internal_epoch   1,  Average loss: 0.0117, Accuracy: 569/607 (93.7397%)
___Test Local_Simple poisoned: False, epoch: 61: Average loss: 3.0471, Accuracy: 1959/10000 (19.5900%), Attack Success Rate:26/10000(0.260)
time spent on training: 50.83382320404053
[foolsgold agg] training data poison_ratio: 0.14867398874899546  data num: [428, 202, 34, 182, 569, 1015, 978, 648, 2803, 607]
[foolsgold agg] considering poison per batch poison_fraction: 0.14867398874899546
[foolsgold agg] wv: [0.05622417 0.         0.05622417 0.         1.         1.
 1.         1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 61: Average loss: 1.5021, Accuracy: 6823/10000 (68.2300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 61: Average loss: 1.3491, Accuracy: 6859/8991 (76.2874%)
Done in 139.25522136688232 sec.
Server Epoch:62 choose agents : [60, 54, 79, 77, 63, 99, 67, 88, 28, 37].
___Train Local_Simple,  epoch  62, local model 60, internal_epoch   1,  Average loss: 0.0156, Accuracy: 317/399 (79.4486%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 10.1202, Accuracy: 1826/10000 (18.2600%), Attack Success Rate:31/10000(0.310)
___Train Local_Simple,  epoch  62, local model 54, internal_epoch   1,  Average loss: 0.0363, Accuracy: 57/91 (62.6374%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 1.5693, Accuracy: 5831/10000 (58.3100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  62, local model 79, internal_epoch   1,  Average loss: 0.0728, Accuracy: 8/25 (32.0000%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 1.5115, Accuracy: 6359/10000 (63.5900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  62, local model 77, internal_epoch   1,  Average loss: 0.0075, Accuracy: 1387/1544 (89.8316%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 4.5377, Accuracy: 3752/10000 (37.5200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  62, local model 63, internal_epoch   1,  Average loss: 0.0058, Accuracy: 2802/3022 (92.7201%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 3.9588, Accuracy: 1501/10000 (15.0100%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  62, local model 99, internal_epoch   1,  Average loss: 0.0052, Accuracy: 400/411 (97.3236%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 8.2285, Accuracy: 980/10000 (9.8000%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  62, local model 67, internal_epoch   1,  Average loss: 0.0194, Accuracy: 408/568 (71.8310%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 3.1570, Accuracy: 3274/10000 (32.7400%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  62, local model 88, internal_epoch   1,  Average loss: 0.0342, Accuracy: 49/96 (51.0417%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 2.0572, Accuracy: 1421/10000 (14.2100%), Attack Success Rate:22/10000(0.220)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  62, local model 28, internal_epoch   1,  Average loss: 0.0222, Accuracy: 186/237 (78.4810%), train_poison_data_count: 237
Global model norm: 14.01148134556337.
Norm before scaling: 14.025252863870506. Distance: 0.45310770199084466
Total norm for 1 adversaries is: 14.025252863870506. distance: 0.45310770199084466
___Test Local_Simple poisoned: True, epoch: 62: Average loss: 3.9379, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch  62, local model 37, internal_epoch   1,  Average loss: 0.0150, Accuracy: 482/578 (83.3910%)
___Test Local_Simple poisoned: False, epoch: 62: Average loss: 6.6155, Accuracy: 2750/10000 (27.5000%), Attack Success Rate:9/10000(0.090)
time spent on training: 46.68037700653076
[foolsgold agg] training data poison_ratio: 0.03399799167981638  data num: [399, 91, 25, 1544, 3022, 411, 568, 96, 237, 578]
[foolsgold agg] considering poison per batch poison_fraction: 0.03399799167981638
[foolsgold agg] wv: [0.         0.31664917 0.         1.         0.         1.
 0.         0.         1.         0.2274309 ]
___Test Target_Simple poisoned: False, epoch: 62: Average loss: 1.4832, Accuracy: 6755/10000 (67.5500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 62: Average loss: 1.3332, Accuracy: 6800/8991 (75.6312%)
Done in 135.17314743995667 sec.
Server Epoch:63 choose agents : [4, 88, 6, 99, 49, 69, 66, 79, 36, 64].
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  63, local model 4, internal_epoch   1,  Average loss: 0.0101, Accuracy: 433/463 (93.5205%), train_poison_data_count: 463
Global model norm: 14.013172492190996.
Norm before scaling: 14.040209655935241. Distance: 1.0072610218603009
Total norm for 2 adversaries is: 14.040209655935241. distance: 1.0072610218603009
___Test Local_Simple poisoned: True, epoch: 63: Average loss: 13.8056, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  63, local model 88, internal_epoch   1,  Average loss: 0.0342, Accuracy: 53/96 (55.2083%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 2.0130, Accuracy: 1550/10000 (15.5000%), Attack Success Rate:29/10000(0.290)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  63, local model 6, internal_epoch   1,  Average loss: 0.0074, Accuracy: 1769/1982 (89.2533%), train_poison_data_count: 1982
Global model norm: 14.013172492190996.
Norm before scaling: 13.98546827081261. Distance: 1.4475776037519636
Total norm for 2 adversaries is: 13.98546827081261. distance: 1.4475776037519636
___Test Local_Simple poisoned: True, epoch: 63: Average loss: 9.1245, Accuracy: 2400/8991 (26.6934%)
___Train Local_Simple,  epoch  63, local model 99, internal_epoch   1,  Average loss: 0.0045, Accuracy: 401/411 (97.5669%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 8.0315, Accuracy: 980/10000 (9.8000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  63, local model 49, internal_epoch   1,  Average loss: 0.0105, Accuracy: 182/196 (92.8571%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 4.4534, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  63, local model 69, internal_epoch   1,  Average loss: 0.0092, Accuracy: 524/586 (89.4198%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 6.9976, Accuracy: 1713/10000 (17.1300%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  63, local model 66, internal_epoch   1,  Average loss: 0.0072, Accuracy: 613/681 (90.0147%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 4.9733, Accuracy: 3089/10000 (30.8900%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  63, local model 79, internal_epoch   1,  Average loss: 0.0732, Accuracy: 8/25 (32.0000%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 1.4921, Accuracy: 6438/10000 (64.3800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  63, local model 36, internal_epoch   1,  Average loss: 0.0135, Accuracy: 252/304 (82.8947%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 11.7494, Accuracy: 974/10000 (9.7400%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  63, local model 64, internal_epoch   1,  Average loss: 0.0278, Accuracy: 146/216 (67.5926%)
___Test Local_Simple poisoned: False, epoch: 63: Average loss: 5.0350, Accuracy: 974/10000 (9.7400%), Attack Success Rate:5/10000(0.050)
time spent on training: 40.7288773059845
[foolsgold agg] training data poison_ratio: 0.49294354838709675  data num: [463, 96, 1982, 411, 196, 586, 681, 25, 304, 216]
[foolsgold agg] considering poison per batch poison_fraction: 0.49294354838709675
[foolsgold agg] wv: [1.         0.         0.32450572 1.         0.         0.32450572
 0.         0.         0.         0.        ]
___Test Target_Simple poisoned: False, epoch: 63: Average loss: 1.4839, Accuracy: 6687/10000 (66.8700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 63: Average loss: 1.3291, Accuracy: 6729/8991 (74.8415%)
Done in 128.21055698394775 sec.
Server Epoch:64 choose agents : [33, 90, 7, 26, 13, 51, 24, 40, 35, 98].
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  64, local model 33, internal_epoch   1,  Average loss: 0.0121, Accuracy: 560/644 (86.9565%), train_poison_data_count: 644
Global model norm: 14.013773001595052.
Norm before scaling: 14.070026740053493. Distance: 0.9202705580993682
Total norm for 5 adversaries is: 14.070026740053493. distance: 0.9202705580993682
___Test Local_Simple poisoned: True, epoch: 64: Average loss: 8.1469, Accuracy: 2609/8991 (29.0179%)
___Train Local_Simple,  epoch  64, local model 90, internal_epoch   1,  Average loss: 0.0094, Accuracy: 680/768 (88.5417%)
___Test Local_Simple poisoned: False, epoch: 64: Average loss: 3.8416, Accuracy: 1825/10000 (18.2500%), Attack Success Rate:29/10000(0.290)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  64, local model 7, internal_epoch   1,  Average loss: 0.0278, Accuracy: 73/86 (84.8837%), train_poison_data_count: 86
Global model norm: 14.013773001595052.
Norm before scaling: 14.018810169704802. Distance: 0.1920502494339886
Total norm for 5 adversaries is: 14.018810169704802. distance: 0.1920502494339886
___Test Local_Simple poisoned: True, epoch: 64: Average loss: 1.7547, Accuracy: 1805/8991 (20.0756%)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  64, local model 26, internal_epoch   1,  Average loss: 0.0056, Accuracy: 1196/1311 (91.2281%), train_poison_data_count: 1311
Global model norm: 14.013773001595052.
Norm before scaling: 14.02177642930447. Distance: 1.4363220198114826
Total norm for 5 adversaries is: 14.02177642930447. distance: 1.4363220198114826
___Test Local_Simple poisoned: True, epoch: 64: Average loss: 8.9771, Accuracy: 1951/8991 (21.6995%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  64, local model 13, internal_epoch   1,  Average loss: 0.3131, Accuracy: 4/5 (80.0000%), train_poison_data_count: 5
Global model norm: 14.013773001595052.
Norm before scaling: 14.014782322075368. Distance: 0.05946837560159473
Total norm for 5 adversaries is: 14.014782322075368. distance: 0.05946837560159473
___Test Local_Simple poisoned: True, epoch: 64: Average loss: 1.3481, Accuracy: 6508/8991 (72.3835%)
___Train Local_Simple,  epoch  64, local model 51, internal_epoch   1,  Average loss: 0.0104, Accuracy: 231/259 (89.1892%)
___Test Local_Simple poisoned: False, epoch: 64: Average loss: 3.6417, Accuracy: 1674/10000 (16.7400%), Attack Success Rate:21/10000(0.210)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  64, local model 24, internal_epoch   1,  Average loss: 0.2381, Accuracy: 4/5 (80.0000%), train_poison_data_count: 5
Global model norm: 14.013773001595052.
Norm before scaling: 14.015440464399711. Distance: 0.06377346587492977
Total norm for 5 adversaries is: 14.015440464399711. distance: 0.06377346587492977
___Test Local_Simple poisoned: True, epoch: 64: Average loss: 1.3379, Accuracy: 6503/8991 (72.3279%)
___Train Local_Simple,  epoch  64, local model 40, internal_epoch   1,  Average loss: 0.0190, Accuracy: 315/436 (72.2477%)
___Test Local_Simple poisoned: False, epoch: 64: Average loss: 5.1363, Accuracy: 1900/10000 (19.0000%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  64, local model 35, internal_epoch   1,  Average loss: 0.0067, Accuracy: 914/978 (93.4560%)
___Test Local_Simple poisoned: False, epoch: 64: Average loss: 4.6138, Accuracy: 2212/10000 (22.1200%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch  64, local model 98, internal_epoch   1,  Average loss: 0.1677, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 64: Average loss: 1.5093, Accuracy: 5631/10000 (56.3100%), Attack Success Rate:0/10000(0.000)
time spent on training: 47.64967489242554
[foolsgold agg] training data poison_ratio: 0.45598043574922187  data num: [644, 768, 86, 1311, 5, 259, 5, 436, 978, 6]
[foolsgold agg] considering poison per batch poison_fraction: 0.45598043574922187
[foolsgold agg] wv: [0.76723506 0.         0.         0.         0.76723506 0.
 1.         0.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 64: Average loss: 1.4828, Accuracy: 6652/10000 (66.5200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 64: Average loss: 1.3215, Accuracy: 6704/8991 (74.5635%)
Done in 136.31370091438293 sec.
Server Epoch:65 choose agents : [46, 27, 26, 85, 41, 77, 52, 61, 3, 82].
___Train Local_Simple,  epoch  65, local model 46, internal_epoch   1,  Average loss: 0.0304, Accuracy: 156/310 (50.3226%)
___Test Local_Simple poisoned: False, epoch: 65: Average loss: 2.7601, Accuracy: 1978/10000 (19.7800%), Attack Success Rate:21/10000(0.210)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  65, local model 27, internal_epoch   1,  Average loss: 0.0124, Accuracy: 601/678 (88.6431%), train_poison_data_count: 678
Global model norm: 14.014892831175555.
Norm before scaling: 13.999374375669658. Distance: 0.9312947588923545
Total norm for 3 adversaries is: 13.999374375669658. distance: 0.9312947588923545
___Test Local_Simple poisoned: True, epoch: 65: Average loss: 4.2082, Accuracy: 1023/8991 (11.3780%)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  65, local model 26, internal_epoch   1,  Average loss: 0.0059, Accuracy: 1237/1311 (94.3555%), train_poison_data_count: 1311
Global model norm: 14.014892831175555.
Norm before scaling: 14.026753068181609. Distance: 1.447714299758618
Total norm for 3 adversaries is: 14.026753068181609. distance: 1.447714299758618
___Test Local_Simple poisoned: True, epoch: 65: Average loss: 15.7442, Accuracy: 1740/8991 (19.3527%)
___Train Local_Simple,  epoch  65, local model 85, internal_epoch   1,  Average loss: 0.3647, Accuracy: 2/4 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 65: Average loss: 1.4769, Accuracy: 6211/10000 (62.1100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  65, local model 41, internal_epoch   1,  Average loss: 0.0166, Accuracy: 374/509 (73.4774%)
___Test Local_Simple poisoned: False, epoch: 65: Average loss: 8.3286, Accuracy: 1515/10000 (15.1500%), Attack Success Rate:33/10000(0.330)
___Train Local_Simple,  epoch  65, local model 77, internal_epoch   1,  Average loss: 0.0069, Accuracy: 1412/1544 (91.4508%)
___Test Local_Simple poisoned: False, epoch: 65: Average loss: 4.2884, Accuracy: 3785/10000 (37.8500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  65, local model 52, internal_epoch   1,  Average loss: 0.0074, Accuracy: 676/705 (95.8865%)
___Test Local_Simple poisoned: False, epoch: 65: Average loss: 16.2369, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  65, local model 61, internal_epoch   1,  Average loss: 0.0113, Accuracy: 630/767 (82.1382%)
___Test Local_Simple poisoned: False, epoch: 65: Average loss: 4.0519, Accuracy: 2767/10000 (27.6700%), Attack Success Rate:10/10000(0.100)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  65, local model 3, internal_epoch   1,  Average loss: 0.0136, Accuracy: 794/1010 (78.6139%), train_poison_data_count: 1010
Global model norm: 14.014892831175555.
Norm before scaling: 14.06008334269451. Distance: 1.140687862388449
Total norm for 3 adversaries is: 14.06008334269451. distance: 1.140687862388449
___Test Local_Simple poisoned: True, epoch: 65: Average loss: 4.9005, Accuracy: 3182/8991 (35.3909%)
___Train Local_Simple,  epoch  65, local model 82, internal_epoch   1,  Average loss: 0.0230, Accuracy: 98/114 (85.9649%)
___Test Local_Simple poisoned: False, epoch: 65: Average loss: 2.3742, Accuracy: 1748/10000 (17.4800%), Attack Success Rate:32/10000(0.320)
time spent on training: 47.05300974845886
[foolsgold agg] training data poison_ratio: 0.4313866513233602  data num: [310, 678, 1311, 4, 509, 1544, 705, 767, 1010, 114]
[foolsgold agg] considering poison per batch poison_fraction: 0.4313866513233602
[foolsgold agg] wv: [0.98796404 0.         0.         0.         0.         1.
 0.         1.         0.36566739 0.36566739]
___Test Target_Simple poisoned: False, epoch: 65: Average loss: 1.4659, Accuracy: 6535/10000 (65.3500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 65: Average loss: 1.3151, Accuracy: 6587/8991 (73.2622%)
Done in 135.3215320110321 sec.
Server Epoch:66 choose agents : [78, 9, 54, 62, 26, 53, 28, 22, 94, 70].
___Train Local_Simple,  epoch  66, local model 78, internal_epoch   1,  Average loss: 0.0078, Accuracy: 2073/2324 (89.1997%)
___Test Local_Simple poisoned: False, epoch: 66: Average loss: 2.3171, Accuracy: 5104/10000 (51.0400%), Attack Success Rate:0/10000(0.000)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch  66, local model 9, internal_epoch   1,  Average loss: 0.0139, Accuracy: 240/263 (91.2548%), train_poison_data_count: 263
Global model norm: 14.017013021779439.
Norm before scaling: 14.048743271196894. Distance: 0.6083472461502979
Total norm for 4 adversaries is: 14.048743271196894. distance: 0.6083472461502979
___Test Local_Simple poisoned: True, epoch: 66: Average loss: 6.1146, Accuracy: 1836/8991 (20.4204%)
___Train Local_Simple,  epoch  66, local model 54, internal_epoch   1,  Average loss: 0.0360, Accuracy: 56/91 (61.5385%)
___Test Local_Simple poisoned: False, epoch: 66: Average loss: 1.5137, Accuracy: 5933/10000 (59.3300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  66, local model 62, internal_epoch   1,  Average loss: 0.5299, Accuracy: 2/2 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 66: Average loss: 1.5421, Accuracy: 5196/10000 (51.9600%), Attack Success Rate:0/10000(0.000)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  66, local model 26, internal_epoch   1,  Average loss: 0.0054, Accuracy: 1224/1311 (93.3638%), train_poison_data_count: 1311
Global model norm: 14.017013021779439.
Norm before scaling: 14.021613739347863. Distance: 1.4331402386114283
Total norm for 4 adversaries is: 14.021613739347863. distance: 1.4331402386114283
___Test Local_Simple poisoned: True, epoch: 66: Average loss: 14.4449, Accuracy: 1932/8991 (21.4882%)
___Train Local_Simple,  epoch  66, local model 53, internal_epoch   1,  Average loss: 0.0116, Accuracy: 427/456 (93.6404%)
___Test Local_Simple poisoned: False, epoch: 66: Average loss: 8.0434, Accuracy: 2118/10000 (21.1800%), Attack Success Rate:28/10000(0.280)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  66, local model 28, internal_epoch   1,  Average loss: 0.0182, Accuracy: 184/237 (77.6371%), train_poison_data_count: 237
Global model norm: 14.017013021779439.
Norm before scaling: 14.032773485289825. Distance: 0.46780303033228054
Total norm for 4 adversaries is: 14.032773485289825. distance: 0.46780303033228054
___Test Local_Simple poisoned: True, epoch: 66: Average loss: 4.2046, Accuracy: 1032/8991 (11.4781%)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch  66, local model 22, internal_epoch   1,  Average loss: 0.0432, Accuracy: 21/34 (61.7647%), train_poison_data_count: 34
Global model norm: 14.017013021779439.
Norm before scaling: 14.018260491133185. Distance: 0.06984861987906173
Total norm for 4 adversaries is: 14.018260491133185. distance: 0.06984861987906173
___Test Local_Simple poisoned: True, epoch: 66: Average loss: 1.3503, Accuracy: 5454/8991 (60.6607%)
___Train Local_Simple,  epoch  66, local model 94, internal_epoch   1,  Average loss: 0.0083, Accuracy: 569/607 (93.7397%)
___Test Local_Simple poisoned: False, epoch: 66: Average loss: 3.1628, Accuracy: 2169/10000 (21.6900%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  66, local model 70, internal_epoch   1,  Average loss: 0.0225, Accuracy: 376/569 (66.0808%)
___Test Local_Simple poisoned: False, epoch: 66: Average loss: 2.8595, Accuracy: 2786/10000 (27.8600%), Attack Success Rate:13/10000(0.130)
time spent on training: 48.66590356826782
[foolsgold agg] training data poison_ratio: 0.3130302002035969  data num: [2324, 263, 91, 2, 1311, 456, 237, 34, 607, 569]
[foolsgold agg] considering poison per batch poison_fraction: 0.3130302002035969
[foolsgold agg] wv: [1.         1.         1.         1.         0.31378122 0.
 0.31378122 0.         0.94314322 1.        ]
___Test Target_Simple poisoned: False, epoch: 66: Average loss: 1.4491, Accuracy: 6557/10000 (65.5700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 66: Average loss: 1.2851, Accuracy: 6609/8991 (73.5068%)
Done in 136.93147134780884 sec.
Server Epoch:67 choose agents : [68, 69, 90, 8, 66, 70, 0, 14, 40, 45].
___Train Local_Simple,  epoch  67, local model 68, internal_epoch   1,  Average loss: 0.0094, Accuracy: 1400/1591 (87.9950%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 5.0772, Accuracy: 1909/10000 (19.0900%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  67, local model 69, internal_epoch   1,  Average loss: 0.0074, Accuracy: 537/586 (91.6382%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 7.5480, Accuracy: 1616/10000 (16.1600%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  67, local model 90, internal_epoch   1,  Average loss: 0.0093, Accuracy: 687/768 (89.4531%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 4.2772, Accuracy: 1755/10000 (17.5500%), Attack Success Rate:40/10000(0.400)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  67, local model 8, internal_epoch   1,  Average loss: 0.0180, Accuracy: 145/171 (84.7953%), train_poison_data_count: 171
Global model norm: 14.0214711800415.
Norm before scaling: 14.034855640567255. Distance: 0.41796678916970326
Total norm for 2 adversaries is: 14.034855640567255. distance: 0.41796678916970326
___Test Local_Simple poisoned: True, epoch: 67: Average loss: 4.4240, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  67, local model 66, internal_epoch   1,  Average loss: 0.0069, Accuracy: 622/681 (91.3363%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 4.5145, Accuracy: 3083/10000 (30.8300%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  67, local model 70, internal_epoch   1,  Average loss: 0.0217, Accuracy: 388/569 (68.1898%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 2.5239, Accuracy: 4150/10000 (41.5000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  67, local model 0, internal_epoch   1,  Average loss: 0.0101, Accuracy: 269/300 (89.6667%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 4.4062, Accuracy: 1270/10000 (12.7000%), Attack Success Rate:27/10000(0.270)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  67, local model 14, internal_epoch   1,  Average loss: 0.0214, Accuracy: 48/48 (100.0000%), train_poison_data_count: 48
Global model norm: 14.0214711800415.
Norm before scaling: 14.023599624759218. Distance: 0.06991208823137514
Total norm for 2 adversaries is: 14.023599624759218. distance: 0.06991208823137514
___Test Local_Simple poisoned: True, epoch: 67: Average loss: 1.3040, Accuracy: 5993/8991 (66.6555%)
___Train Local_Simple,  epoch  67, local model 40, internal_epoch   1,  Average loss: 0.0190, Accuracy: 338/436 (77.5229%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 4.9044, Accuracy: 1957/10000 (19.5700%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  67, local model 45, internal_epoch   1,  Average loss: 0.0123, Accuracy: 330/388 (85.0515%)
___Test Local_Simple poisoned: False, epoch: 67: Average loss: 6.4182, Accuracy: 1973/10000 (19.7300%), Attack Success Rate:30/10000(0.300)
time spent on training: 46.2486674785614
[foolsgold agg] training data poison_ratio: 0.03954496208017335  data num: [1591, 586, 768, 171, 681, 569, 300, 48, 436, 388]
[foolsgold agg] considering poison per batch poison_fraction: 0.03954496208017335
[foolsgold agg] wv: [1.         0.77911681 0.22278932 0.         1.         1.
 0.11567381 0.11567381 1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 67: Average loss: 1.4114, Accuracy: 6693/10000 (66.9300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 67: Average loss: 1.2540, Accuracy: 6751/8991 (75.0862%)
Done in 134.34052562713623 sec.
Server Epoch:68 choose agents : [23, 19, 72, 15, 37, 80, 27, 95, 1, 46].
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  68, local model 23, internal_epoch   1,  Average loss: 0.0082, Accuracy: 409/428 (95.5607%), train_poison_data_count: 428
Global model norm: 14.024202951776518.
Norm before scaling: 14.062532552045658. Distance: 0.7506213395968845
Total norm for 5 adversaries is: 14.062532552045658. distance: 0.7506213395968845
___Test Local_Simple poisoned: True, epoch: 68: Average loss: 7.4420, Accuracy: 1965/8991 (21.8552%)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  68, local model 19, internal_epoch   1,  Average loss: 0.0197, Accuracy: 155/244 (63.5246%), train_poison_data_count: 244
Global model norm: 14.024202951776518.
Norm before scaling: 14.040289534928023. Distance: 0.5569024524279899
Total norm for 5 adversaries is: 14.040289534928023. distance: 0.5569024524279899
___Test Local_Simple poisoned: True, epoch: 68: Average loss: 4.3086, Accuracy: 1934/8991 (21.5104%)
___Train Local_Simple,  epoch  68, local model 72, internal_epoch   1,  Average loss: 0.1361, Accuracy: 8/10 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 68: Average loss: 1.4348, Accuracy: 5941/10000 (59.4100%), Attack Success Rate:0/10000(0.000)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  68, local model 15, internal_epoch   1,  Average loss: 0.0128, Accuracy: 811/1033 (78.5092%), train_poison_data_count: 1033
Global model norm: 14.024202951776518.
Norm before scaling: 14.098215279682234. Distance: 1.2728412378983214
Total norm for 5 adversaries is: 14.098215279682234. distance: 1.2728412378983214
___Test Local_Simple poisoned: True, epoch: 68: Average loss: 8.2700, Accuracy: 3533/8991 (39.2949%)
___Train Local_Simple,  epoch  68, local model 37, internal_epoch   1,  Average loss: 0.0143, Accuracy: 493/578 (85.2941%)
___Test Local_Simple poisoned: False, epoch: 68: Average loss: 6.7503, Accuracy: 2635/10000 (26.3500%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  68, local model 80, internal_epoch   1,  Average loss: 0.0278, Accuracy: 63/84 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 68: Average loss: 2.1719, Accuracy: 1582/10000 (15.8200%), Attack Success Rate:26/10000(0.260)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  68, local model 27, internal_epoch   1,  Average loss: 0.0106, Accuracy: 601/678 (88.6431%), train_poison_data_count: 678
Global model norm: 14.024202951776518.
Norm before scaling: 14.012482664044807. Distance: 0.8535533695909957
Total norm for 5 adversaries is: 14.012482664044807. distance: 0.8535533695909957
___Test Local_Simple poisoned: True, epoch: 68: Average loss: 4.8462, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  68, local model 95, internal_epoch   1,  Average loss: 0.0338, Accuracy: 26/29 (89.6552%)
___Test Local_Simple poisoned: False, epoch: 68: Average loss: 1.4301, Accuracy: 5764/10000 (57.6400%), Attack Success Rate:0/10000(0.000)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  68, local model 1, internal_epoch   1,  Average loss: 0.0309, Accuracy: 61/84 (72.6190%), train_poison_data_count: 84
Global model norm: 14.024202951776518.
Norm before scaling: 14.028136725706561. Distance: 0.13245059239300758
Total norm for 5 adversaries is: 14.028136725706561. distance: 0.13245059239300758
___Test Local_Simple poisoned: True, epoch: 68: Average loss: 1.3880, Accuracy: 4690/8991 (52.1633%)
___Train Local_Simple,  epoch  68, local model 46, internal_epoch   1,  Average loss: 0.0291, Accuracy: 188/310 (60.6452%)
___Test Local_Simple poisoned: False, epoch: 68: Average loss: 2.8504, Accuracy: 1957/10000 (19.5700%), Attack Success Rate:22/10000(0.220)
time spent on training: 44.45592975616455
[foolsgold agg] training data poison_ratio: 0.7093156986774009  data num: [428, 244, 10, 1033, 578, 84, 678, 29, 84, 310]
[foolsgold agg] considering poison per batch poison_fraction: 0.7093156986774009
[foolsgold agg] wv: [0.         0.39253776 0.18993632 0.39253776 1.         1.
 0.16392121 0.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 68: Average loss: 1.3913, Accuracy: 6987/10000 (69.8700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 68: Average loss: 1.2321, Accuracy: 7027/8991 (78.1559%)
Done in 133.30637168884277 sec.
Server Epoch:69 choose agents : [54, 97, 77, 68, 98, 52, 78, 88, 45, 95].
___Train Local_Simple,  epoch  69, local model 54, internal_epoch   1,  Average loss: 0.0343, Accuracy: 54/91 (59.3407%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 1.4623, Accuracy: 5976/10000 (59.7600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  69, local model 97, internal_epoch   1,  Average loss: 0.1787, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 1.5129, Accuracy: 5525/10000 (55.2500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  69, local model 77, internal_epoch   1,  Average loss: 0.0067, Accuracy: 1393/1544 (90.2202%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 3.8577, Accuracy: 3821/10000 (38.2100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  69, local model 68, internal_epoch   1,  Average loss: 0.0080, Accuracy: 1414/1591 (88.8749%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 4.7006, Accuracy: 1917/10000 (19.1700%), Attack Success Rate:32/10000(0.320)
___Train Local_Simple,  epoch  69, local model 98, internal_epoch   1,  Average loss: 0.1562, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 1.4162, Accuracy: 5898/10000 (58.9800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  69, local model 52, internal_epoch   1,  Average loss: 0.0045, Accuracy: 695/705 (98.5816%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 19.5676, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  69, local model 78, internal_epoch   1,  Average loss: 0.0071, Accuracy: 2117/2324 (91.0929%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 3.1561, Accuracy: 5369/10000 (53.6900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  69, local model 88, internal_epoch   1,  Average loss: 0.0310, Accuracy: 54/96 (56.2500%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 2.0937, Accuracy: 1502/10000 (15.0200%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch  69, local model 45, internal_epoch   1,  Average loss: 0.0116, Accuracy: 332/388 (85.5670%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 6.4379, Accuracy: 1933/10000 (19.3300%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  69, local model 95, internal_epoch   1,  Average loss: 0.0350, Accuracy: 25/29 (86.2069%)
___Test Local_Simple poisoned: False, epoch: 69: Average loss: 1.4065, Accuracy: 5986/10000 (59.8600%), Attack Success Rate:0/10000(0.000)
time spent on training: 45.58477735519409
[foolsgold agg] training data poison_ratio: 0.0  data num: [91, 5, 1544, 1591, 6, 705, 2324, 96, 388, 29]
[foolsgold agg] considering poison per batch poison_fraction: 0.0
[foolsgold agg] wv: [1.         1.         1.         0.         0.         1.
 1.         0.         0.40890624 0.        ]
___Test Target_Simple poisoned: False, epoch: 69: Average loss: 1.3677, Accuracy: 6906/10000 (69.0600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 69: Average loss: 1.2075, Accuracy: 6943/8991 (77.2217%)
Done in 133.25886845588684 sec.
Server Epoch:70 choose agents : [42, 38, 63, 31, 47, 12, 77, 37, 23, 83].
___Train Local_Simple,  epoch  70, local model 42, internal_epoch   1,  Average loss: 0.0246, Accuracy: 56/63 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 70: Average loss: 2.2318, Accuracy: 2151/10000 (21.5100%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  70, local model 38, internal_epoch   1,  Average loss: 0.0112, Accuracy: 174/179 (97.2067%)
___Test Local_Simple poisoned: False, epoch: 70: Average loss: 3.2429, Accuracy: 2062/10000 (20.6200%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  70, local model 63, internal_epoch   1,  Average loss: 0.0055, Accuracy: 2831/3022 (93.6797%)
___Test Local_Simple poisoned: False, epoch: 70: Average loss: 3.8040, Accuracy: 1858/10000 (18.5800%), Attack Success Rate:33/10000(0.330)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  70, local model 31, internal_epoch   1,  Average loss: 0.0068, Accuracy: 1660/1839 (90.2664%), train_poison_data_count: 1839
Global model norm: 14.029681757432838.
Norm before scaling: 14.01750342328047. Distance: 1.2801154626238294
Total norm for 3 adversaries is: 14.01750342328047. distance: 1.2801154626238294
___Test Local_Simple poisoned: True, epoch: 70: Average loss: 3.0770, Accuracy: 4103/8991 (45.6345%)
___Train Local_Simple,  epoch  70, local model 47, internal_epoch   1,  Average loss: 0.0054, Accuracy: 2346/2519 (93.1322%)
___Test Local_Simple poisoned: False, epoch: 70: Average loss: 3.5069, Accuracy: 4527/10000 (45.2700%), Attack Success Rate:0/10000(0.000)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  70, local model 12, internal_epoch   1,  Average loss: 0.0080, Accuracy: 590/648 (91.0494%), train_poison_data_count: 648
Global model norm: 14.029681757432838.
Norm before scaling: 14.062500542534712. Distance: 0.7182983140161169
Total norm for 3 adversaries is: 14.062500542534712. distance: 0.7182983140161169
___Test Local_Simple poisoned: True, epoch: 70: Average loss: 3.4693, Accuracy: 3341/8991 (37.1594%)
___Train Local_Simple,  epoch  70, local model 77, internal_epoch   1,  Average loss: 0.0069, Accuracy: 1399/1544 (90.6088%)
___Test Local_Simple poisoned: False, epoch: 70: Average loss: 3.6643, Accuracy: 3581/10000 (35.8100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  70, local model 37, internal_epoch   1,  Average loss: 0.0141, Accuracy: 498/578 (86.1592%)
___Test Local_Simple poisoned: False, epoch: 70: Average loss: 6.4666, Accuracy: 2747/10000 (27.4700%), Attack Success Rate:12/10000(0.120)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  70, local model 23, internal_epoch   1,  Average loss: 0.0075, Accuracy: 406/428 (94.8598%), train_poison_data_count: 428
Global model norm: 14.029681757432838.
Norm before scaling: 14.066141564088447. Distance: 0.7578051458572164
Total norm for 3 adversaries is: 14.066141564088447. distance: 0.7578051458572164
___Test Local_Simple poisoned: True, epoch: 70: Average loss: 7.1624, Accuracy: 1969/8991 (21.8997%)
___Train Local_Simple,  epoch  70, local model 83, internal_epoch   1,  Average loss: 0.0136, Accuracy: 606/750 (80.8000%)
___Test Local_Simple poisoned: False, epoch: 70: Average loss: 3.3522, Accuracy: 2306/10000 (23.0600%), Attack Success Rate:23/10000(0.230)
time spent on training: 58.695695638656616
[foolsgold agg] training data poison_ratio: 0.2519446845289542  data num: [63, 179, 3022, 1839, 2519, 648, 1544, 578, 428, 750]
[foolsgold agg] considering poison per batch poison_fraction: 0.2519446845289542
[foolsgold agg] wv: [1. 1. 1. 1. 1. 1. 1. 1. 1. 1.]
___Test Target_Simple poisoned: False, epoch: 70: Average loss: 1.3171, Accuracy: 6916/10000 (69.1600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 70: Average loss: 1.1625, Accuracy: 6940/8991 (77.1883%)
Done in 146.9113736152649 sec.
Server Epoch:71 choose agents : [94, 48, 35, 79, 29, 17, 27, 1, 41, 25].
___Train Local_Simple,  epoch  71, local model 94, internal_epoch   1,  Average loss: 0.0078, Accuracy: 570/607 (93.9044%)
___Test Local_Simple poisoned: False, epoch: 71: Average loss: 3.0006, Accuracy: 2304/10000 (23.0400%), Attack Success Rate:18/10000(0.180)
___Train Local_Simple,  epoch  71, local model 48, internal_epoch   1,  Average loss: 0.0213, Accuracy: 113/128 (88.2812%)
___Test Local_Simple poisoned: False, epoch: 71: Average loss: 2.1501, Accuracy: 2334/10000 (23.3400%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  71, local model 35, internal_epoch   1,  Average loss: 0.0048, Accuracy: 929/978 (94.9898%)
___Test Local_Simple poisoned: False, epoch: 71: Average loss: 5.1809, Accuracy: 2715/10000 (27.1500%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  71, local model 79, internal_epoch   1,  Average loss: 0.0658, Accuracy: 14/25 (56.0000%)
___Test Local_Simple poisoned: False, epoch: 71: Average loss: 1.3410, Accuracy: 6103/10000 (61.0300%), Attack Success Rate:0/10000(0.000)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  71, local model 29, internal_epoch   1,  Average loss: 0.0080, Accuracy: 1113/1232 (90.3409%), train_poison_data_count: 1232
Global model norm: 14.037435344978553.
Norm before scaling: 13.999495360952412. Distance: 0.7643076793878298
Total norm for 5 adversaries is: 13.999495360952412. distance: 0.7643076793878298
___Test Local_Simple poisoned: True, epoch: 71: Average loss: 1.7949, Accuracy: 4597/8991 (51.1289%)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  71, local model 17, internal_epoch   1,  Average loss: 0.0159, Accuracy: 85/94 (90.4255%), train_poison_data_count: 94
Global model norm: 14.037435344978553.
Norm before scaling: 14.042739480047766. Distance: 0.17344394298133234
Total norm for 5 adversaries is: 14.042739480047766. distance: 0.17344394298133234
___Test Local_Simple poisoned: True, epoch: 71: Average loss: 1.6662, Accuracy: 3131/8991 (34.8237%)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  71, local model 27, internal_epoch   1,  Average loss: 0.0119, Accuracy: 590/678 (87.0206%), train_poison_data_count: 678
Global model norm: 14.037435344978553.
Norm before scaling: 14.018083609781343. Distance: 0.8670393671208176
Total norm for 5 adversaries is: 14.018083609781343. distance: 0.8670393671208176
___Test Local_Simple poisoned: True, epoch: 71: Average loss: 3.8656, Accuracy: 1013/8991 (11.2668%)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  71, local model 1, internal_epoch   1,  Average loss: 0.0284, Accuracy: 69/84 (82.1429%), train_poison_data_count: 84
Global model norm: 14.037435344978553.
Norm before scaling: 14.041807692788346. Distance: 0.1328351197895399
Total norm for 5 adversaries is: 14.041807692788346. distance: 0.1328351197895399
___Test Local_Simple poisoned: True, epoch: 71: Average loss: 1.3256, Accuracy: 4755/8991 (52.8862%)
___Train Local_Simple,  epoch  71, local model 41, internal_epoch   1,  Average loss: 0.0156, Accuracy: 371/509 (72.8880%)
___Test Local_Simple poisoned: False, epoch: 71: Average loss: 7.2411, Accuracy: 1745/10000 (17.4500%), Attack Success Rate:26/10000(0.260)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  71, local model 25, internal_epoch   1,  Average loss: 0.0277, Accuracy: 104/128 (81.2500%), train_poison_data_count: 128
Global model norm: 14.037435344978553.
Norm before scaling: 14.04584788809518. Distance: 0.21409310205673637
Total norm for 5 adversaries is: 14.04584788809518. distance: 0.21409310205673637
___Test Local_Simple poisoned: True, epoch: 71: Average loss: 1.3807, Accuracy: 5187/8991 (57.6910%)
time spent on training: 47.81336569786072
[foolsgold agg] training data poison_ratio: 0.49652699977593545  data num: [607, 128, 978, 25, 1232, 94, 678, 84, 509, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.4965269997759354
[foolsgold agg] wv: [0.7983213  0.29873201 0.29873201 0.85224227 1.         1.
 0.         0.71151027 0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 71: Average loss: 1.3131, Accuracy: 6937/10000 (69.3700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 71: Average loss: 1.1431, Accuracy: 6957/8991 (77.3774%)
Done in 135.45457649230957 sec.
Server Epoch:72 choose agents : [26, 77, 17, 61, 14, 0, 73, 94, 96, 25].
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  72, local model 26, internal_epoch   1,  Average loss: 0.0050, Accuracy: 1230/1311 (93.8215%), train_poison_data_count: 1311
Global model norm: 14.039465727027885.
Norm before scaling: 14.028862764975486. Distance: 1.299905659847115
Total norm for 4 adversaries is: 14.028862764975486. distance: 1.299905659847115
___Test Local_Simple poisoned: True, epoch: 72: Average loss: 10.0962, Accuracy: 1942/8991 (21.5994%)
___Train Local_Simple,  epoch  72, local model 77, internal_epoch   1,  Average loss: 0.0063, Accuracy: 1414/1544 (91.5803%)
___Test Local_Simple poisoned: False, epoch: 72: Average loss: 3.7603, Accuracy: 3855/10000 (38.5500%), Attack Success Rate:0/10000(0.000)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  72, local model 17, internal_epoch   1,  Average loss: 0.0144, Accuracy: 85/94 (90.4255%), train_poison_data_count: 94
Global model norm: 14.039465727027885.
Norm before scaling: 14.044469234857798. Distance: 0.1579168755889339
Total norm for 4 adversaries is: 14.044469234857798. distance: 0.1579168755889339
___Test Local_Simple poisoned: True, epoch: 72: Average loss: 1.6041, Accuracy: 3325/8991 (36.9814%)
___Train Local_Simple,  epoch  72, local model 61, internal_epoch   1,  Average loss: 0.0092, Accuracy: 668/767 (87.0926%)
___Test Local_Simple poisoned: False, epoch: 72: Average loss: 4.3750, Accuracy: 2882/10000 (28.8200%), Attack Success Rate:5/10000(0.050)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  72, local model 14, internal_epoch   1,  Average loss: 0.0177, Accuracy: 48/48 (100.0000%), train_poison_data_count: 48
Global model norm: 14.039465727027885.
Norm before scaling: 14.041657188404782. Distance: 0.06889509027964459
Total norm for 4 adversaries is: 14.041657188404782. distance: 0.06889509027964459
___Test Local_Simple poisoned: True, epoch: 72: Average loss: 1.1768, Accuracy: 6074/8991 (67.5564%)
___Train Local_Simple,  epoch  72, local model 0, internal_epoch   1,  Average loss: 0.0092, Accuracy: 276/300 (92.0000%)
___Test Local_Simple poisoned: False, epoch: 72: Average loss: 4.0414, Accuracy: 1493/10000 (14.9300%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  72, local model 73, internal_epoch   1,  Average loss: 0.0077, Accuracy: 1083/1205 (89.8755%)
___Test Local_Simple poisoned: False, epoch: 72: Average loss: 3.9549, Accuracy: 1655/10000 (16.5500%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  72, local model 94, internal_epoch   1,  Average loss: 0.0087, Accuracy: 573/607 (94.3987%)
___Test Local_Simple poisoned: False, epoch: 72: Average loss: 2.4898, Accuracy: 2870/10000 (28.7000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  72, local model 96, internal_epoch   1,  Average loss: 0.0153, Accuracy: 406/505 (80.3960%)
___Test Local_Simple poisoned: False, epoch: 72: Average loss: 6.5564, Accuracy: 2447/10000 (24.4700%), Attack Success Rate:15/10000(0.150)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  72, local model 25, internal_epoch   1,  Average loss: 0.0265, Accuracy: 107/128 (83.5938%), train_poison_data_count: 128
Global model norm: 14.039465727027885.
Norm before scaling: 14.048239296927925. Distance: 0.21151727014005967
Total norm for 4 adversaries is: 14.048239296927925. distance: 0.21151727014005967
___Test Local_Simple poisoned: True, epoch: 72: Average loss: 1.3860, Accuracy: 5133/8991 (57.0904%)
time spent on training: 51.903387784957886
[foolsgold agg] training data poison_ratio: 0.24289445383315408  data num: [1311, 1544, 94, 767, 48, 300, 1205, 607, 505, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.24289445383315406
[foolsgold agg] wv: [0.10763723 1.         0.31341692 0.31341692 0.88526854 0.10763723
 1.         1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 72: Average loss: 1.2795, Accuracy: 7020/10000 (70.2000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 72: Average loss: 1.1220, Accuracy: 7045/8991 (78.3561%)
Done in 139.82212781906128 sec.
Server Epoch:73 choose agents : [55, 99, 45, 50, 70, 11, 57, 98, 58, 43].
___Train Local_Simple,  epoch  73, local model 55, internal_epoch   1,  Average loss: 0.0081, Accuracy: 2484/2803 (88.6193%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 3.7205, Accuracy: 4638/10000 (46.3800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  73, local model 99, internal_epoch   1,  Average loss: 0.0031, Accuracy: 400/411 (97.3236%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 5.6185, Accuracy: 1042/10000 (10.4200%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  73, local model 45, internal_epoch   1,  Average loss: 0.0117, Accuracy: 338/388 (87.1134%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 6.6000, Accuracy: 1968/10000 (19.6800%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  73, local model 50, internal_epoch   1,  Average loss: 0.0058, Accuracy: 151/151 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 3.4516, Accuracy: 1791/10000 (17.9100%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  73, local model 70, internal_epoch   1,  Average loss: 0.0197, Accuracy: 399/569 (70.1230%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 2.7444, Accuracy: 4385/10000 (43.8500%), Attack Success Rate:0/10000(0.000)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  73, local model 11, internal_epoch   1,  Average loss: 0.0247, Accuracy: 67/84 (79.7619%), train_poison_data_count: 84
Global model norm: 14.042453702307347.
Norm before scaling: 14.047235639141336. Distance: 0.16390056224769328
Total norm for 1 adversaries is: 14.047235639141336. distance: 0.16390056224769328
___Test Local_Simple poisoned: True, epoch: 73: Average loss: 1.3873, Accuracy: 4246/8991 (47.2250%)
___Train Local_Simple,  epoch  73, local model 57, internal_epoch   1,  Average loss: 0.0079, Accuracy: 1274/1437 (88.6569%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 4.8494, Accuracy: 3673/10000 (36.7300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  73, local model 98, internal_epoch   1,  Average loss: 0.1391, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 1.3079, Accuracy: 6118/10000 (61.1800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  73, local model 58, internal_epoch   1,  Average loss: 0.0135, Accuracy: 817/1015 (80.4926%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 5.2572, Accuracy: 3552/10000 (35.5200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  73, local model 43, internal_epoch   1,  Average loss: 0.1499, Accuracy: 4/6 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 73: Average loss: 1.2985, Accuracy: 6545/10000 (65.4500%), Attack Success Rate:0/10000(0.000)
time spent on training: 48.59805917739868
[foolsgold agg] training data poison_ratio: 0.01222707423580786  data num: [2803, 411, 388, 151, 569, 84, 1437, 6, 1015, 6]
[foolsgold agg] considering poison per batch poison_fraction: 0.01222707423580786
[foolsgold agg] wv: [1.         0.         0.         0.         0.8634659  0.
 0.         0.         0.8634659  0.35323748]
___Test Target_Simple poisoned: False, epoch: 73: Average loss: 1.2557, Accuracy: 7180/10000 (71.8000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 73: Average loss: 1.0909, Accuracy: 7207/8991 (80.1579%)
Done in 136.63894772529602 sec.
Server Epoch:74 choose agents : [42, 11, 89, 50, 55, 83, 51, 21, 0, 79].
___Train Local_Simple,  epoch  74, local model 42, internal_epoch   1,  Average loss: 0.0217, Accuracy: 57/63 (90.4762%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 2.1516, Accuracy: 2685/10000 (26.8500%), Attack Success Rate:10/10000(0.100)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  74, local model 11, internal_epoch   1,  Average loss: 0.0238, Accuracy: 70/84 (83.3333%), train_poison_data_count: 84
Global model norm: 14.046176506896481.
Norm before scaling: 14.050863240829726. Distance: 0.16455341869017762
Total norm for 2 adversaries is: 14.050863240829726. distance: 0.16455341869017762
___Test Local_Simple poisoned: True, epoch: 74: Average loss: 1.3642, Accuracy: 4290/8991 (47.7144%)
___Train Local_Simple,  epoch  74, local model 89, internal_epoch   1,  Average loss: 0.0380, Accuracy: 39/69 (56.5217%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 1.3231, Accuracy: 5657/10000 (56.5700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  74, local model 50, internal_epoch   1,  Average loss: 0.0056, Accuracy: 149/151 (98.6755%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 3.1735, Accuracy: 1910/10000 (19.1000%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  74, local model 55, internal_epoch   1,  Average loss: 0.0091, Accuracy: 2405/2803 (85.8009%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 3.7533, Accuracy: 4670/10000 (46.7000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  74, local model 83, internal_epoch   1,  Average loss: 0.0116, Accuracy: 646/750 (86.1333%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 3.9095, Accuracy: 2310/10000 (23.1000%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  74, local model 51, internal_epoch   1,  Average loss: 0.0073, Accuracy: 240/259 (92.6641%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 3.2208, Accuracy: 2059/10000 (20.5900%), Attack Success Rate:28/10000(0.280)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  74, local model 21, internal_epoch   1,  Average loss: 0.0046, Accuracy: 1941/2072 (93.6776%), train_poison_data_count: 2072
Global model norm: 14.046176506896481.
Norm before scaling: 13.98467778565365. Distance: 1.46921256065992
Total norm for 2 adversaries is: 13.98467778565365. distance: 1.46921256065992
___Test Local_Simple poisoned: True, epoch: 74: Average loss: 5.0652, Accuracy: 2816/8991 (31.3202%)
___Train Local_Simple,  epoch  74, local model 0, internal_epoch   1,  Average loss: 0.0081, Accuracy: 281/300 (93.6667%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 4.3800, Accuracy: 1395/10000 (13.9500%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  74, local model 79, internal_epoch   1,  Average loss: 0.0620, Accuracy: 18/25 (72.0000%)
___Test Local_Simple poisoned: False, epoch: 74: Average loss: 1.2913, Accuracy: 6169/10000 (61.6900%), Attack Success Rate:0/10000(0.000)
time spent on training: 46.99071002006531
[foolsgold agg] training data poison_ratio: 0.3278588807785888  data num: [63, 84, 69, 151, 2803, 750, 259, 2072, 300, 25]
[foolsgold agg] considering poison per batch poison_fraction: 0.3278588807785889
[foolsgold agg] wv: [0.07434766 0.07434766 1.         1.         0.84848029 0.
 0.40366281 0.         0.77230027 0.84848029]
___Test Target_Simple poisoned: False, epoch: 74: Average loss: 1.2341, Accuracy: 7133/10000 (71.3300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 74: Average loss: 1.0801, Accuracy: 7176/8991 (79.8131%)
Done in 135.42633962631226 sec.
Server Epoch:75 choose agents : [7, 65, 20, 13, 16, 67, 55, 61, 24, 46].
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  75, local model 7, internal_epoch   1,  Average loss: 0.0234, Accuracy: 76/86 (88.3721%), train_poison_data_count: 86
Global model norm: 14.048769338339747.
Norm before scaling: 14.054325966375641. Distance: 0.20654527739548992
Total norm for 5 adversaries is: 14.054325966375641. distance: 0.20654527739548992
___Test Local_Simple poisoned: True, epoch: 75: Average loss: 1.6560, Accuracy: 3004/8991 (33.4112%)
___Train Local_Simple,  epoch  75, local model 65, internal_epoch   1,  Average loss: 0.0068, Accuracy: 1210/1326 (91.2519%)
___Test Local_Simple poisoned: False, epoch: 75: Average loss: 3.7089, Accuracy: 2236/10000 (22.3600%), Attack Success Rate:21/10000(0.210)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  75, local model 20, internal_epoch   1,  Average loss: 0.0016, Accuracy: 2141/2180 (98.2110%), train_poison_data_count: 2180
Global model norm: 14.048769338339747.
Norm before scaling: 13.891215978007693. Distance: 0.781792261760569
Total norm for 5 adversaries is: 13.891215978007693. distance: 0.781792261760569
___Test Local_Simple poisoned: True, epoch: 75: Average loss: 4.5572, Accuracy: 3097/8991 (34.4456%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  75, local model 13, internal_epoch   1,  Average loss: 0.2917, Accuracy: 3/5 (60.0000%), train_poison_data_count: 5
Global model norm: 14.048769338339747.
Norm before scaling: 14.049697405723114. Distance: 0.07001915642971873
Total norm for 5 adversaries is: 14.049697405723114. distance: 0.07001915642971873
___Test Local_Simple poisoned: True, epoch: 75: Average loss: 1.0940, Accuracy: 6864/8991 (76.3430%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  75, local model 16, internal_epoch   1,  Average loss: 0.0074, Accuracy: 895/994 (90.0402%), train_poison_data_count: 994
Global model norm: 14.048769338339747.
Norm before scaling: 14.067617883806934. Distance: 0.7028487404536776
Total norm for 5 adversaries is: 14.067617883806934. distance: 0.7028487404536776
___Test Local_Simple poisoned: True, epoch: 75: Average loss: 1.9711, Accuracy: 5141/8991 (57.1794%)
___Train Local_Simple,  epoch  75, local model 67, internal_epoch   1,  Average loss: 0.0161, Accuracy: 441/568 (77.6408%)
___Test Local_Simple poisoned: False, epoch: 75: Average loss: 2.9940, Accuracy: 3737/10000 (37.3700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  75, local model 55, internal_epoch   1,  Average loss: 0.0078, Accuracy: 2462/2803 (87.8345%)
___Test Local_Simple poisoned: False, epoch: 75: Average loss: 3.2875, Accuracy: 4633/10000 (46.3300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  75, local model 61, internal_epoch   1,  Average loss: 0.0076, Accuracy: 698/767 (91.0039%)
___Test Local_Simple poisoned: False, epoch: 75: Average loss: 5.5557, Accuracy: 2900/10000 (29.0000%), Attack Success Rate:7/10000(0.070)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  75, local model 24, internal_epoch   1,  Average loss: 0.1680, Accuracy: 5/5 (100.0000%), train_poison_data_count: 5
Global model norm: 14.048769338339747.
Norm before scaling: 14.050644416556409. Distance: 0.059523161222199986
Total norm for 5 adversaries is: 14.050644416556409. distance: 0.059523161222199986
___Test Local_Simple poisoned: True, epoch: 75: Average loss: 1.0903, Accuracy: 7007/8991 (77.9335%)
___Train Local_Simple,  epoch  75, local model 46, internal_epoch   1,  Average loss: 0.0247, Accuracy: 190/310 (61.2903%)
___Test Local_Simple poisoned: False, epoch: 75: Average loss: 2.6900, Accuracy: 2110/10000 (21.1000%), Attack Success Rate:26/10000(0.260)
time spent on training: 58.682201623916626
[foolsgold agg] training data poison_ratio: 0.36156567890314023  data num: [86, 1326, 2180, 5, 994, 568, 2803, 767, 5, 310]
[foolsgold agg] considering poison per batch poison_fraction: 0.36156567890314023
[foolsgold agg] wv: [1.         0.72211753 0.85747366 0.72211753 0.88399541 1.
 0.39911179 0.39911179 0.85747366 0.57947371]
___Test Target_Simple poisoned: False, epoch: 75: Average loss: 1.2067, Accuracy: 6980/10000 (69.8000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 75: Average loss: 1.0633, Accuracy: 7035/8991 (78.2449%)
Done in 146.23392605781555 sec.
Server Epoch:76 choose agents : [85, 65, 12, 51, 68, 15, 75, 90, 26, 71].
___Train Local_Simple,  epoch  76, local model 85, internal_epoch   1,  Average loss: 0.2652, Accuracy: 3/4 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 76: Average loss: 1.2287, Accuracy: 6524/10000 (65.2400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  76, local model 65, internal_epoch   1,  Average loss: 0.0070, Accuracy: 1195/1326 (90.1207%)
___Test Local_Simple poisoned: False, epoch: 76: Average loss: 3.2862, Accuracy: 2507/10000 (25.0700%), Attack Success Rate:13/10000(0.130)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  76, local model 12, internal_epoch   1,  Average loss: 0.0062, Accuracy: 606/648 (93.5185%), train_poison_data_count: 648
Global model norm: 14.052881910492038.
Norm before scaling: 14.080927596314678. Distance: 0.6568347278666637
Total norm for 3 adversaries is: 14.080927596314678. distance: 0.6568347278666637
___Test Local_Simple poisoned: True, epoch: 76: Average loss: 3.7462, Accuracy: 3663/8991 (40.7407%)
___Train Local_Simple,  epoch  76, local model 51, internal_epoch   1,  Average loss: 0.0077, Accuracy: 240/259 (92.6641%)
___Test Local_Simple poisoned: False, epoch: 76: Average loss: 2.7897, Accuracy: 2351/10000 (23.5100%), Attack Success Rate:22/10000(0.220)
___Train Local_Simple,  epoch  76, local model 68, internal_epoch   1,  Average loss: 0.0088, Accuracy: 1429/1591 (89.8177%)
___Test Local_Simple poisoned: False, epoch: 76: Average loss: 3.6703, Accuracy: 1960/10000 (19.6000%), Attack Success Rate:42/10000(0.420)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  76, local model 15, internal_epoch   1,  Average loss: 0.0108, Accuracy: 861/1033 (83.3495%), train_poison_data_count: 1033
Global model norm: 14.052881910492038.
Norm before scaling: 14.119668410084643. Distance: 1.224379035666544
Total norm for 3 adversaries is: 14.119668410084643. distance: 1.224379035666544
___Test Local_Simple poisoned: True, epoch: 76: Average loss: 9.7210, Accuracy: 3513/8991 (39.0724%)
___Train Local_Simple,  epoch  76, local model 75, internal_epoch   1,  Average loss: 0.0057, Accuracy: 466/497 (93.7626%)
___Test Local_Simple poisoned: False, epoch: 76: Average loss: 8.3672, Accuracy: 1447/10000 (14.4700%), Attack Success Rate:23/10000(0.230)
___Train Local_Simple,  epoch  76, local model 90, internal_epoch   1,  Average loss: 0.0074, Accuracy: 700/768 (91.1458%)
___Test Local_Simple poisoned: False, epoch: 76: Average loss: 3.7453, Accuracy: 2742/10000 (27.4200%), Attack Success Rate:13/10000(0.130)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  76, local model 26, internal_epoch   1,  Average loss: 0.0046, Accuracy: 1219/1311 (92.9825%), train_poison_data_count: 1311
Global model norm: 14.052881910492038.
Norm before scaling: 14.045253095672017. Distance: 1.3485874220870115
Total norm for 3 adversaries is: 14.045253095672017. distance: 1.3485874220870115
___Test Local_Simple poisoned: True, epoch: 76: Average loss: 9.4269, Accuracy: 1949/8991 (21.6772%)
___Train Local_Simple,  epoch  76, local model 71, internal_epoch   1,  Average loss: 0.0189, Accuracy: 248/342 (72.5146%)
___Test Local_Simple poisoned: False, epoch: 76: Average loss: 2.7122, Accuracy: 5115/10000 (51.1500%), Attack Success Rate:0/10000(0.000)
time spent on training: 50.919840812683105
[foolsgold agg] training data poison_ratio: 0.3846252731713588  data num: [4, 1326, 648, 259, 1591, 1033, 497, 768, 1311, 342]
[foolsgold agg] considering poison per batch poison_fraction: 0.3846252731713588
[foolsgold agg] wv: [1.         0.         0.18689157 0.7391351  1.         0.
 0.7867392  1.         0.18689157 1.        ]
___Test Target_Simple poisoned: False, epoch: 76: Average loss: 1.2088, Accuracy: 6777/10000 (67.7700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 76: Average loss: 1.0537, Accuracy: 6819/8991 (75.8425%)
Done in 140.15580034255981 sec.
Server Epoch:77 choose agents : [57, 55, 95, 96, 74, 18, 53, 39, 52, 60].
___Train Local_Simple,  epoch  77, local model 57, internal_epoch   1,  Average loss: 0.0071, Accuracy: 1286/1437 (89.4920%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 6.0838, Accuracy: 3602/10000 (36.0200%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  77, local model 55, internal_epoch   1,  Average loss: 0.0079, Accuracy: 2482/2803 (88.5480%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 2.9175, Accuracy: 4630/10000 (46.3000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  77, local model 95, internal_epoch   1,  Average loss: 0.0225, Accuracy: 27/29 (93.1034%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 1.2568, Accuracy: 5945/10000 (59.4500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  77, local model 96, internal_epoch   1,  Average loss: 0.0116, Accuracy: 439/505 (86.9307%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 6.5840, Accuracy: 2755/10000 (27.5500%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  77, local model 74, internal_epoch   1,  Average loss: 0.0135, Accuracy: 596/762 (78.2152%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 3.7865, Accuracy: 3743/10000 (37.4300%), Attack Success Rate:0/10000(0.000)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  77, local model 18, internal_epoch   1,  Average loss: 0.0232, Accuracy: 184/264 (69.6970%), train_poison_data_count: 264
Global model norm: 14.055387198571152.
Norm before scaling: 14.069231787167865. Distance: 0.5604946630531786
Total norm for 1 adversaries is: 14.069231787167865. distance: 0.5604946630531786
___Test Local_Simple poisoned: True, epoch: 77: Average loss: 4.3196, Accuracy: 1282/8991 (14.2587%)
___Train Local_Simple,  epoch  77, local model 53, internal_epoch   1,  Average loss: 0.0083, Accuracy: 430/456 (94.2982%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 7.9616, Accuracy: 2118/10000 (21.1800%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  77, local model 39, internal_epoch   1,  Average loss: 0.0059, Accuracy: 1167/1259 (92.6926%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 2.7688, Accuracy: 2090/10000 (20.9000%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  77, local model 52, internal_epoch   1,  Average loss: 0.0056, Accuracy: 687/705 (97.4468%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 17.3742, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  77, local model 60, internal_epoch   1,  Average loss: 0.0114, Accuracy: 352/399 (88.2206%)
___Test Local_Simple poisoned: False, epoch: 77: Average loss: 10.8238, Accuracy: 1833/10000 (18.3300%), Attack Success Rate:36/10000(0.360)
time spent on training: 53.83077001571655
[foolsgold agg] training data poison_ratio: 0.030630003480682212  data num: [1437, 2803, 29, 505, 762, 264, 456, 1259, 705, 399]
[foolsgold agg] considering poison per batch poison_fraction: 0.030630003480682212
[foolsgold agg] wv: [0.74693366 1.         0.29707964 1.         1.         0.29707964
 1.         0.75006432 0.74693366 0.75006432]
___Test Target_Simple poisoned: False, epoch: 77: Average loss: 1.1645, Accuracy: 6852/10000 (68.5200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 77: Average loss: 1.0239, Accuracy: 6896/8991 (76.6989%)
Done in 142.38662958145142 sec.
Server Epoch:78 choose agents : [43, 49, 84, 46, 1, 11, 5, 7, 3, 45].
___Train Local_Simple,  epoch  78, local model 43, internal_epoch   1,  Average loss: 0.1349, Accuracy: 5/6 (83.3333%)
___Test Local_Simple poisoned: False, epoch: 78: Average loss: 1.1800, Accuracy: 6786/10000 (67.8600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  78, local model 49, internal_epoch   1,  Average loss: 0.0064, Accuracy: 188/196 (95.9184%)
___Test Local_Simple poisoned: False, epoch: 78: Average loss: 3.5992, Accuracy: 1217/10000 (12.1700%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  78, local model 84, internal_epoch   1,  Average loss: 0.0615, Accuracy: 9/29 (31.0345%)
___Test Local_Simple poisoned: False, epoch: 78: Average loss: 1.1367, Accuracy: 7128/10000 (71.2800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  78, local model 46, internal_epoch   1,  Average loss: 0.0258, Accuracy: 185/310 (59.6774%)
___Test Local_Simple poisoned: False, epoch: 78: Average loss: 2.4420, Accuracy: 2200/10000 (22.0000%), Attack Success Rate:29/10000(0.290)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  78, local model 1, internal_epoch   1,  Average loss: 0.0297, Accuracy: 55/84 (65.4762%), train_poison_data_count: 84
Global model norm: 14.061020972568658.
Norm before scaling: 14.06456527802978. Distance: 0.16088057918774035
Total norm for 5 adversaries is: 14.06456527802978. distance: 0.16088057918774035
___Test Local_Simple poisoned: True, epoch: 78: Average loss: 1.1397, Accuracy: 5485/8991 (61.0054%)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  78, local model 11, internal_epoch   1,  Average loss: 0.0246, Accuracy: 66/84 (78.5714%), train_poison_data_count: 84
Global model norm: 14.061020972568658.
Norm before scaling: 14.06561922871188. Distance: 0.17807733542185356
Total norm for 5 adversaries is: 14.06561922871188. distance: 0.17807733542185356
___Test Local_Simple poisoned: True, epoch: 78: Average loss: 1.2924, Accuracy: 4497/8991 (50.0167%)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  78, local model 5, internal_epoch   1,  Average loss: 0.0094, Accuracy: 946/1046 (90.4398%), train_poison_data_count: 1046
Global model norm: 14.061020972568658.
Norm before scaling: 14.035485119129188. Distance: 1.2713889746906353
Total norm for 5 adversaries is: 14.035485119129188. distance: 1.2713889746906353
___Test Local_Simple poisoned: True, epoch: 78: Average loss: 5.2149, Accuracy: 896/8991 (9.9655%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  78, local model 7, internal_epoch   1,  Average loss: 0.0185, Accuracy: 81/86 (94.1860%), train_poison_data_count: 86
Global model norm: 14.061020972568658.
Norm before scaling: 14.066884082240925. Distance: 0.17644269262720405
Total norm for 5 adversaries is: 14.066884082240925. distance: 0.17644269262720405
___Test Local_Simple poisoned: True, epoch: 78: Average loss: 1.5840, Accuracy: 3677/8991 (40.8965%)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  78, local model 3, internal_epoch   1,  Average loss: 0.0112, Accuracy: 824/1010 (81.5842%), train_poison_data_count: 1010
Global model norm: 14.061020972568658.
Norm before scaling: 14.098748853649434. Distance: 1.082490513696137
Total norm for 5 adversaries is: 14.098748853649434. distance: 1.082490513696137
___Test Local_Simple poisoned: True, epoch: 78: Average loss: 4.3645, Accuracy: 3583/8991 (39.8510%)
___Train Local_Simple,  epoch  78, local model 45, internal_epoch   1,  Average loss: 0.0072, Accuracy: 370/388 (95.3608%)
___Test Local_Simple poisoned: False, epoch: 78: Average loss: 6.6357, Accuracy: 1974/10000 (19.7400%), Attack Success Rate:29/10000(0.290)
time spent on training: 45.043384075164795
[foolsgold agg] training data poison_ratio: 0.7131830811979006  data num: [6, 196, 29, 310, 84, 84, 1046, 86, 1010, 388]
[foolsgold agg] considering poison per batch poison_fraction: 0.7131830811979006
[foolsgold agg] wv: [1.         0.47523164 1.         1.         0.         1.
 0.         0.         0.51260584 0.        ]
___Test Target_Simple poisoned: False, epoch: 78: Average loss: 1.1529, Accuracy: 6880/10000 (68.8000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 78: Average loss: 1.0221, Accuracy: 6920/8991 (76.9659%)
Done in 133.3036506175995 sec.
Server Epoch:79 choose agents : [54, 29, 4, 38, 52, 86, 28, 34, 15, 75].
___Train Local_Simple,  epoch  79, local model 54, internal_epoch   1,  Average loss: 0.0311, Accuracy: 53/91 (58.2418%)
___Test Local_Simple poisoned: False, epoch: 79: Average loss: 1.2137, Accuracy: 6730/10000 (67.3000%), Attack Success Rate:0/10000(0.000)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  79, local model 29, internal_epoch   1,  Average loss: 0.0076, Accuracy: 1124/1232 (91.2338%), train_poison_data_count: 1232
Global model norm: 14.061831581336586.
Norm before scaling: 14.03373142381531. Distance: 0.7869026158632445
Total norm for 4 adversaries is: 14.03373142381531. distance: 0.7869026158632445
___Test Local_Simple poisoned: True, epoch: 79: Average loss: 1.8035, Accuracy: 4871/8991 (54.1764%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  79, local model 4, internal_epoch   1,  Average loss: 0.0079, Accuracy: 419/463 (90.4968%), train_poison_data_count: 463
Global model norm: 14.061831581336586.
Norm before scaling: 14.094101861253545. Distance: 1.1213311133500696
Total norm for 4 adversaries is: 14.094101861253545. distance: 1.1213311133500696
___Test Local_Simple poisoned: True, epoch: 79: Average loss: 16.8281, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  79, local model 38, internal_epoch   1,  Average loss: 0.0074, Accuracy: 178/179 (99.4413%)
___Test Local_Simple poisoned: False, epoch: 79: Average loss: 2.7087, Accuracy: 2490/10000 (24.9000%), Attack Success Rate:11/10000(0.110)
___Train Local_Simple,  epoch  79, local model 52, internal_epoch   1,  Average loss: 0.0045, Accuracy: 687/705 (97.4468%)
___Test Local_Simple poisoned: False, epoch: 79: Average loss: 15.7878, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  79, local model 86, internal_epoch   1,  Average loss: 0.0356, Accuracy: 26/34 (76.4706%)
___Test Local_Simple poisoned: False, epoch: 79: Average loss: 1.1798, Accuracy: 6677/10000 (66.7700%), Attack Success Rate:0/10000(0.000)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  79, local model 28, internal_epoch   1,  Average loss: 0.0134, Accuracy: 194/237 (81.8565%), train_poison_data_count: 237
Global model norm: 14.061831581336586.
Norm before scaling: 14.076280140635744. Distance: 0.39034890908330333
Total norm for 4 adversaries is: 14.076280140635744. distance: 0.39034890908330333
___Test Local_Simple poisoned: True, epoch: 79: Average loss: 3.4751, Accuracy: 1182/8991 (13.1465%)
___Train Local_Simple,  epoch  79, local model 34, internal_epoch   1,  Average loss: 0.0106, Accuracy: 1020/1203 (84.7880%)
___Test Local_Simple poisoned: False, epoch: 79: Average loss: 3.4695, Accuracy: 4333/10000 (43.3300%), Attack Success Rate:0/10000(0.000)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  79, local model 15, internal_epoch   1,  Average loss: 0.0114, Accuracy: 816/1033 (78.9932%), train_poison_data_count: 1033
Global model norm: 14.061831581336586.
Norm before scaling: 14.112228696392958. Distance: 1.1953277088269822
Total norm for 4 adversaries is: 14.112228696392958. distance: 1.1953277088269822
___Test Local_Simple poisoned: True, epoch: 79: Average loss: 6.9278, Accuracy: 2996/8991 (33.3222%)
___Train Local_Simple,  epoch  79, local model 75, internal_epoch   1,  Average loss: 0.0053, Accuracy: 463/497 (93.1590%)
___Test Local_Simple poisoned: False, epoch: 79: Average loss: 7.4486, Accuracy: 2008/10000 (20.0800%), Attack Success Rate:28/10000(0.280)
time spent on training: 46.95638394355774
[foolsgold agg] training data poison_ratio: 0.5225590412407473  data num: [91, 1232, 463, 179, 705, 34, 237, 1203, 1033, 497]
[foolsgold agg] considering poison per batch poison_fraction: 0.5225590412407473
[foolsgold agg] wv: [0.45123324 1.         0.44711029 0.41472999 0.         0.
 0.61634509 1.         0.44297981 0.41472999]
___Test Target_Simple poisoned: False, epoch: 79: Average loss: 1.1423, Accuracy: 6954/10000 (69.5400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 79: Average loss: 0.9959, Accuracy: 6992/8991 (77.7667%)
Done in 135.14826250076294 sec.
Server Epoch:80 choose agents : [66, 24, 28, 36, 54, 92, 27, 46, 29, 52].
___Train Local_Simple,  epoch  80, local model 66, internal_epoch   1,  Average loss: 0.0038, Accuracy: 658/681 (96.6226%)
___Test Local_Simple poisoned: False, epoch: 80: Average loss: 5.1547, Accuracy: 3073/10000 (30.7300%), Attack Success Rate:2/10000(0.020)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  80, local model 24, internal_epoch   1,  Average loss: 0.1587, Accuracy: 4/5 (80.0000%), train_poison_data_count: 5
Global model norm: 14.064888035084145.
Norm before scaling: 14.066500624509848. Distance: 0.05725274154447642
Total norm for 4 adversaries is: 14.066500624509848. distance: 0.05725274154447642
___Test Local_Simple poisoned: True, epoch: 80: Average loss: 0.9949, Accuracy: 7045/8991 (78.3561%)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  80, local model 28, internal_epoch   1,  Average loss: 0.0122, Accuracy: 207/237 (87.3418%), train_poison_data_count: 237
Global model norm: 14.064888035084145.
Norm before scaling: 14.080838194953486. Distance: 0.40229071110131703
Total norm for 4 adversaries is: 14.080838194953486. distance: 0.40229071110131703
___Test Local_Simple poisoned: True, epoch: 80: Average loss: 3.8553, Accuracy: 1122/8991 (12.4791%)
___Train Local_Simple,  epoch  80, local model 36, internal_epoch   1,  Average loss: 0.0132, Accuracy: 262/304 (86.1842%)
___Test Local_Simple poisoned: False, epoch: 80: Average loss: 11.8687, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  80, local model 54, internal_epoch   1,  Average loss: 0.0299, Accuracy: 57/91 (62.6374%)
___Test Local_Simple poisoned: False, epoch: 80: Average loss: 1.2082, Accuracy: 6708/10000 (67.0800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  80, local model 92, internal_epoch   1,  Average loss: 0.0191, Accuracy: 177/202 (87.6238%)
___Test Local_Simple poisoned: False, epoch: 80: Average loss: 4.1786, Accuracy: 1551/10000 (15.5100%), Attack Success Rate:17/10000(0.170)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  80, local model 27, internal_epoch   1,  Average loss: 0.0081, Accuracy: 602/678 (88.7906%), train_poison_data_count: 678
Global model norm: 14.064888035084145.
Norm before scaling: 14.052321620284738. Distance: 0.7194829189375191
Total norm for 4 adversaries is: 14.052321620284738. distance: 0.7194829189375191
___Test Local_Simple poisoned: True, epoch: 80: Average loss: 5.1153, Accuracy: 1121/8991 (12.4680%)
___Train Local_Simple,  epoch  80, local model 46, internal_epoch   1,  Average loss: 0.0245, Accuracy: 189/310 (60.9677%)
___Test Local_Simple poisoned: False, epoch: 80: Average loss: 2.3064, Accuracy: 2431/10000 (24.3100%), Attack Success Rate:16/10000(0.160)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  80, local model 29, internal_epoch   1,  Average loss: 0.0063, Accuracy: 1134/1232 (92.0455%), train_poison_data_count: 1232
Global model norm: 14.064888035084145.
Norm before scaling: 14.033219299094716. Distance: 0.7303998782079455
Total norm for 4 adversaries is: 14.033219299094716. distance: 0.7303998782079455
___Test Local_Simple poisoned: True, epoch: 80: Average loss: 1.6957, Accuracy: 4965/8991 (55.2219%)
___Train Local_Simple,  epoch  80, local model 52, internal_epoch   1,  Average loss: 0.0044, Accuracy: 683/705 (96.8794%)
___Test Local_Simple poisoned: False, epoch: 80: Average loss: 15.7056, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:9/10000(0.090)
time spent on training: 45.90980386734009
[foolsgold agg] training data poison_ratio: 0.4841394825646794  data num: [681, 5, 237, 304, 91, 202, 678, 310, 1232, 705]
[foolsgold agg] considering poison per batch poison_fraction: 0.4841394825646794
[foolsgold agg] wv: [0.96942248 0.96942248 0.05384004 1.         1.         1.
 1.         1.         1.         0.05384004]
___Test Target_Simple poisoned: False, epoch: 80: Average loss: 1.1404, Accuracy: 7019/10000 (70.1900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 80: Average loss: 0.9800, Accuracy: 7045/8991 (78.3561%)
Done in 133.91390776634216 sec.
Server Epoch:81 choose agents : [18, 22, 59, 69, 37, 56, 36, 68, 39, 46].
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  81, local model 18, internal_epoch   1,  Average loss: 0.0174, Accuracy: 198/264 (75.0000%), train_poison_data_count: 264
Global model norm: 14.067108619822163.
Norm before scaling: 14.083510779592787. Distance: 0.5428174308855963
Total norm for 2 adversaries is: 14.083510779592787. distance: 0.5428174308855963
___Test Local_Simple poisoned: True, epoch: 81: Average loss: 4.4966, Accuracy: 1463/8991 (16.2718%)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch  81, local model 22, internal_epoch   1,  Average loss: 0.0316, Accuracy: 26/34 (76.4706%), train_poison_data_count: 34
Global model norm: 14.067108619822163.
Norm before scaling: 14.068742646495469. Distance: 0.07152513061386177
Total norm for 2 adversaries is: 14.068742646495469. distance: 0.07152513061386177
___Test Local_Simple poisoned: True, epoch: 81: Average loss: 1.0648, Accuracy: 5922/8991 (65.8659%)
___Train Local_Simple,  epoch  81, local model 59, internal_epoch   1,  Average loss: 0.0307, Accuracy: 24/27 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 1.2330, Accuracy: 6446/10000 (64.4600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  81, local model 69, internal_epoch   1,  Average loss: 0.0061, Accuracy: 540/586 (92.1502%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 7.3872, Accuracy: 1752/10000 (17.5200%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  81, local model 37, internal_epoch   1,  Average loss: 0.0094, Accuracy: 526/578 (91.0035%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 5.9579, Accuracy: 2737/10000 (27.3700%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  81, local model 56, internal_epoch   1,  Average loss: 0.0071, Accuracy: 662/704 (94.0341%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 6.9091, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  81, local model 36, internal_epoch   1,  Average loss: 0.0117, Accuracy: 271/304 (89.1447%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 11.5717, Accuracy: 974/10000 (9.7400%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  81, local model 68, internal_epoch   1,  Average loss: 0.0073, Accuracy: 1441/1591 (90.5720%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 3.8036, Accuracy: 2163/10000 (21.6300%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  81, local model 39, internal_epoch   1,  Average loss: 0.0054, Accuracy: 1177/1259 (93.4869%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 2.2323, Accuracy: 3000/10000 (30.0000%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  81, local model 46, internal_epoch   1,  Average loss: 0.0238, Accuracy: 183/310 (59.0323%)
___Test Local_Simple poisoned: False, epoch: 81: Average loss: 2.3778, Accuracy: 2634/10000 (26.3400%), Attack Success Rate:15/10000(0.150)
time spent on training: 48.6493022441864
[foolsgold agg] training data poison_ratio: 0.052678097931765956  data num: [264, 34, 27, 586, 578, 704, 304, 1591, 1259, 310]
[foolsgold agg] considering poison per batch poison_fraction: 0.05267809793176595
[foolsgold agg] wv: [0.         0.         0.         0.         0.         1.
 0.20580411 0.30500239 0.         0.31502344]
___Test Target_Simple poisoned: False, epoch: 81: Average loss: 1.1363, Accuracy: 7116/10000 (71.1600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 81: Average loss: 0.9775, Accuracy: 7144/8991 (79.4572%)
Done in 136.87104725837708 sec.
Server Epoch:82 choose agents : [72, 95, 79, 51, 47, 29, 10, 16, 84, 27].
___Train Local_Simple,  epoch  82, local model 72, internal_epoch   1,  Average loss: 0.1044, Accuracy: 8/10 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 82: Average loss: 1.1658, Accuracy: 6554/10000 (65.5400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  82, local model 95, internal_epoch   1,  Average loss: 0.0220, Accuracy: 28/29 (96.5517%)
___Test Local_Simple poisoned: False, epoch: 82: Average loss: 1.1793, Accuracy: 6298/10000 (62.9800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  82, local model 79, internal_epoch   1,  Average loss: 0.0557, Accuracy: 19/25 (76.0000%)
___Test Local_Simple poisoned: False, epoch: 82: Average loss: 1.1760, Accuracy: 6398/10000 (63.9800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  82, local model 51, internal_epoch   1,  Average loss: 0.0076, Accuracy: 243/259 (93.8224%)
___Test Local_Simple poisoned: False, epoch: 82: Average loss: 3.0009, Accuracy: 2349/10000 (23.4900%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  82, local model 47, internal_epoch   1,  Average loss: 0.0054, Accuracy: 2329/2519 (92.4573%)
___Test Local_Simple poisoned: False, epoch: 82: Average loss: 3.1382, Accuracy: 4745/10000 (47.4500%), Attack Success Rate:0/10000(0.000)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  82, local model 29, internal_epoch   1,  Average loss: 0.0069, Accuracy: 1129/1232 (91.6396%), train_poison_data_count: 1232
Global model norm: 14.066536421572087.
Norm before scaling: 14.02690264465874. Distance: 0.7005034637188553
Total norm for 4 adversaries is: 14.02690264465874. distance: 0.7005034637188553
___Test Local_Simple poisoned: True, epoch: 82: Average loss: 2.1650, Accuracy: 4041/8991 (44.9449%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  82, local model 10, internal_epoch   1,  Average loss: 0.0088, Accuracy: 612/688 (88.9535%), train_poison_data_count: 688
Global model norm: 14.066536421572087.
Norm before scaling: 14.11187836838117. Distance: 0.9223045382920247
Total norm for 4 adversaries is: 14.11187836838117. distance: 0.9223045382920247
___Test Local_Simple poisoned: True, epoch: 82: Average loss: 8.1995, Accuracy: 2787/8991 (30.9977%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  82, local model 16, internal_epoch   1,  Average loss: 0.0060, Accuracy: 918/994 (92.3541%), train_poison_data_count: 994
Global model norm: 14.066536421572087.
Norm before scaling: 14.082597942827734. Distance: 0.6569054146284945
Total norm for 4 adversaries is: 14.082597942827734. distance: 0.6569054146284945
___Test Local_Simple poisoned: True, epoch: 82: Average loss: 2.1359, Accuracy: 4996/8991 (55.5667%)
___Train Local_Simple,  epoch  82, local model 84, internal_epoch   1,  Average loss: 0.0653, Accuracy: 9/29 (31.0345%)
___Test Local_Simple poisoned: False, epoch: 82: Average loss: 1.0860, Accuracy: 7469/10000 (74.6900%), Attack Success Rate:0/10000(0.000)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  82, local model 27, internal_epoch   1,  Average loss: 0.0081, Accuracy: 612/678 (90.2655%), train_poison_data_count: 678
Global model norm: 14.066536421572087.
Norm before scaling: 14.05241663230947. Distance: 0.6620603785207605
Total norm for 4 adversaries is: 14.05241663230947. distance: 0.6620603785207605
___Test Local_Simple poisoned: True, epoch: 82: Average loss: 4.4178, Accuracy: 1060/8991 (11.7896%)
time spent on training: 48.472480058670044
[foolsgold agg] training data poison_ratio: 0.555779049976791  data num: [10, 29, 25, 259, 2519, 1232, 688, 994, 29, 678]
[foolsgold agg] considering poison per batch poison_fraction: 0.555779049976791
[foolsgold agg] wv: [0.25493334 0.         1.         1.         1.         0.68463305
 1.         0.62888496 1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 82: Average loss: 1.1193, Accuracy: 7150/10000 (71.5000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 82: Average loss: 0.9617, Accuracy: 7175/8991 (79.8020%)
Done in 136.89655923843384 sec.
Server Epoch:83 choose agents : [47, 97, 40, 98, 33, 92, 96, 76, 73, 72].
___Train Local_Simple,  epoch  83, local model 47, internal_epoch   1,  Average loss: 0.0048, Accuracy: 2374/2519 (94.2437%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 3.2160, Accuracy: 4545/10000 (45.4500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  83, local model 97, internal_epoch   1,  Average loss: 0.1125, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 1.2402, Accuracy: 6324/10000 (63.2400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  83, local model 40, internal_epoch   1,  Average loss: 0.0147, Accuracy: 336/436 (77.0642%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 3.8519, Accuracy: 2371/10000 (23.7100%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  83, local model 98, internal_epoch   1,  Average loss: 0.0900, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 1.1631, Accuracy: 6335/10000 (63.3500%), Attack Success Rate:0/10000(0.000)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  83, local model 33, internal_epoch   1,  Average loss: 0.0098, Accuracy: 569/644 (88.3540%), train_poison_data_count: 644
Global model norm: 14.070143864376718.
Norm before scaling: 14.104256581292667. Distance: 0.8630049250319636
Total norm for 1 adversaries is: 14.104256581292667. distance: 0.8630049250319636
___Test Local_Simple poisoned: True, epoch: 83: Average loss: 6.9977, Accuracy: 2645/8991 (29.4183%)
___Train Local_Simple,  epoch  83, local model 92, internal_epoch   1,  Average loss: 0.0159, Accuracy: 175/202 (86.6337%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 4.2200, Accuracy: 1642/10000 (16.4200%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  83, local model 96, internal_epoch   1,  Average loss: 0.0105, Accuracy: 433/505 (85.7426%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 6.1012, Accuracy: 2768/10000 (27.6800%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch  83, local model 76, internal_epoch   1,  Average loss: 0.0239, Accuracy: 65/87 (74.7126%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 1.3901, Accuracy: 4457/10000 (44.5700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  83, local model 73, internal_epoch   1,  Average loss: 0.0073, Accuracy: 1081/1205 (89.7095%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 3.6146, Accuracy: 1713/10000 (17.1300%), Attack Success Rate:37/10000(0.370)
___Train Local_Simple,  epoch  83, local model 72, internal_epoch   1,  Average loss: 0.1044, Accuracy: 8/10 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 83: Average loss: 1.1488, Accuracy: 6537/10000 (65.3700%), Attack Success Rate:0/10000(0.000)
time spent on training: 45.59371757507324
[foolsgold agg] training data poison_ratio: 0.11461114077237942  data num: [2519, 5, 436, 6, 644, 202, 505, 87, 1205, 10]
[foolsgold agg] considering poison per batch poison_fraction: 0.11461114077237942
[foolsgold agg] wv: [1.         0.56288665 1.         0.06815124 1.         0.56288665
 1.         1.         1.         0.06815124]
___Test Target_Simple poisoned: False, epoch: 83: Average loss: 1.0900, Accuracy: 7332/10000 (73.3200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 83: Average loss: 0.9395, Accuracy: 7347/8991 (81.7150%)
Done in 133.48041820526123 sec.
Server Epoch:84 choose agents : [68, 38, 40, 13, 30, 2, 83, 51, 27, 88].
___Train Local_Simple,  epoch  84, local model 68, internal_epoch   1,  Average loss: 0.0080, Accuracy: 1421/1591 (89.3149%)
___Test Local_Simple poisoned: False, epoch: 84: Average loss: 4.4868, Accuracy: 1916/10000 (19.1600%), Attack Success Rate:35/10000(0.350)
___Train Local_Simple,  epoch  84, local model 38, internal_epoch   1,  Average loss: 0.0080, Accuracy: 176/179 (98.3240%)
___Test Local_Simple poisoned: False, epoch: 84: Average loss: 2.4098, Accuracy: 2868/10000 (28.6800%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  84, local model 40, internal_epoch   1,  Average loss: 0.0140, Accuracy: 341/436 (78.2110%)
___Test Local_Simple poisoned: False, epoch: 84: Average loss: 3.9220, Accuracy: 2310/10000 (23.1000%), Attack Success Rate:25/10000(0.250)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  84, local model 13, internal_epoch   1,  Average loss: 0.2725, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 14.073899459499266.
Norm before scaling: 14.074732093226277. Distance: 0.07164788086171334
Total norm for 4 adversaries is: 14.074732093226277. distance: 0.07164788086171334
___Test Local_Simple poisoned: True, epoch: 84: Average loss: 0.9481, Accuracy: 7202/8991 (80.1023%)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  84, local model 30, internal_epoch   1,  Average loss: 0.0080, Accuracy: 739/818 (90.3423%), train_poison_data_count: 818
Global model norm: 14.073899459499266.
Norm before scaling: 14.114747233923074. Distance: 1.0502194175344648
Total norm for 4 adversaries is: 14.114747233923074. distance: 1.0502194175344648
___Test Local_Simple poisoned: True, epoch: 84: Average loss: 8.0038, Accuracy: 2919/8991 (32.4658%)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  84, local model 2, internal_epoch   1,  Average loss: 0.0203, Accuracy: 103/119 (86.5546%), train_poison_data_count: 119
Global model norm: 14.073899459499266.
Norm before scaling: 14.082706836256214. Distance: 0.2736162963500647
Total norm for 4 adversaries is: 14.082706836256214. distance: 0.2736162963500647
___Test Local_Simple poisoned: True, epoch: 84: Average loss: 1.8939, Accuracy: 3144/8991 (34.9683%)
___Train Local_Simple,  epoch  84, local model 83, internal_epoch   1,  Average loss: 0.0103, Accuracy: 646/750 (86.1333%)
___Test Local_Simple poisoned: False, epoch: 84: Average loss: 3.2819, Accuracy: 2708/10000 (27.0800%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  84, local model 51, internal_epoch   1,  Average loss: 0.0068, Accuracy: 248/259 (95.7529%)
___Test Local_Simple poisoned: False, epoch: 84: Average loss: 2.8756, Accuracy: 2435/10000 (24.3500%), Attack Success Rate:20/10000(0.200)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  84, local model 27, internal_epoch   1,  Average loss: 0.0095, Accuracy: 598/678 (88.2006%), train_poison_data_count: 678
Global model norm: 14.073899459499266.
Norm before scaling: 14.056770751316895. Distance: 0.7665366758840123
Total norm for 4 adversaries is: 14.056770751316895. distance: 0.7665366758840123
___Test Local_Simple poisoned: True, epoch: 84: Average loss: 4.1128, Accuracy: 1034/8991 (11.5004%)
___Train Local_Simple,  epoch  84, local model 88, internal_epoch   1,  Average loss: 0.0250, Accuracy: 67/96 (69.7917%)
___Test Local_Simple poisoned: False, epoch: 84: Average loss: 2.0250, Accuracy: 1953/10000 (19.5300%), Attack Success Rate:35/10000(0.350)
time spent on training: 48.41197967529297
[foolsgold agg] training data poison_ratio: 0.3285337659703914  data num: [1591, 179, 436, 5, 818, 119, 750, 259, 678, 96]
[foolsgold agg] considering poison per batch poison_fraction: 0.32853376597039147
[foolsgold agg] wv: [0.         1.         1.         0.97365316 0.97365316 0.69763155
 1.         0.69763155 1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 84: Average loss: 1.0664, Accuracy: 7353/10000 (73.5300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 84: Average loss: 0.9217, Accuracy: 7374/8991 (82.0153%)
Done in 137.34259581565857 sec.
Server Epoch:85 choose agents : [6, 49, 50, 32, 22, 78, 64, 66, 82, 47].
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  85, local model 6, internal_epoch   1,  Average loss: 0.0063, Accuracy: 1794/1982 (90.5146%), train_poison_data_count: 1982
Global model norm: 14.076666583898968.
Norm before scaling: 14.00571107180757. Distance: 1.2440095889375087
Total norm for 3 adversaries is: 14.00571107180757. distance: 1.2440095889375087
___Test Local_Simple poisoned: True, epoch: 85: Average loss: 6.1955, Accuracy: 2646/8991 (29.4294%)
___Train Local_Simple,  epoch  85, local model 49, internal_epoch   1,  Average loss: 0.0066, Accuracy: 186/196 (94.8980%)
___Test Local_Simple poisoned: False, epoch: 85: Average loss: 3.1257, Accuracy: 1447/10000 (14.4700%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  85, local model 50, internal_epoch   1,  Average loss: 0.0044, Accuracy: 150/151 (99.3377%)
___Test Local_Simple poisoned: False, epoch: 85: Average loss: 2.6285, Accuracy: 2637/10000 (26.3700%), Attack Success Rate:11/10000(0.110)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  85, local model 32, internal_epoch   1,  Average loss: 0.0183, Accuracy: 28/28 (100.0000%), train_poison_data_count: 28
Global model norm: 14.076666583898968.
Norm before scaling: 14.07858129983329. Distance: 0.06784421059040507
Total norm for 3 adversaries is: 14.07858129983329. distance: 0.06784421059040507
___Test Local_Simple poisoned: True, epoch: 85: Average loss: 0.9619, Accuracy: 6702/8991 (74.5412%)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch  85, local model 22, internal_epoch   1,  Average loss: 0.0348, Accuracy: 24/34 (70.5882%), train_poison_data_count: 34
Global model norm: 14.076666583898968.
Norm before scaling: 14.078069180834124. Distance: 0.07988185788729088
Total norm for 3 adversaries is: 14.078069180834124. distance: 0.07988185788729088
___Test Local_Simple poisoned: True, epoch: 85: Average loss: 0.9835, Accuracy: 6393/8991 (71.1044%)
___Train Local_Simple,  epoch  85, local model 78, internal_epoch   1,  Average loss: 0.0064, Accuracy: 2094/2324 (90.1033%)
___Test Local_Simple poisoned: False, epoch: 85: Average loss: 1.8660, Accuracy: 5238/10000 (52.3800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  85, local model 64, internal_epoch   1,  Average loss: 0.0187, Accuracy: 166/216 (76.8519%)
___Test Local_Simple poisoned: False, epoch: 85: Average loss: 5.0753, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  85, local model 66, internal_epoch   1,  Average loss: 0.0038, Accuracy: 658/681 (96.6226%)
___Test Local_Simple poisoned: False, epoch: 85: Average loss: 4.3285, Accuracy: 3066/10000 (30.6600%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  85, local model 82, internal_epoch   1,  Average loss: 0.0146, Accuracy: 102/114 (89.4737%)
___Test Local_Simple poisoned: False, epoch: 85: Average loss: 1.7142, Accuracy: 3642/10000 (36.4200%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  85, local model 47, internal_epoch   1,  Average loss: 0.0045, Accuracy: 2359/2519 (93.6483%)
___Test Local_Simple poisoned: False, epoch: 85: Average loss: 3.1933, Accuracy: 4654/10000 (46.5400%), Attack Success Rate:0/10000(0.000)
time spent on training: 54.483086347579956
[foolsgold agg] training data poison_ratio: 0.24790782292298363  data num: [1982, 196, 151, 28, 34, 2324, 216, 681, 114, 2519]
[foolsgold agg] considering poison per batch poison_fraction: 0.24790782292298363
[foolsgold agg] wv: [0.61299779 0.         1.         0.61299779 1.         0.
 1.         0.40800762 0.         0.        ]
___Test Target_Simple poisoned: False, epoch: 85: Average loss: 1.0632, Accuracy: 7327/10000 (73.2700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 85: Average loss: 0.9162, Accuracy: 7343/8991 (81.6706%)
Done in 143.0786111354828 sec.
Server Epoch:86 choose agents : [1, 14, 49, 15, 89, 79, 44, 9, 13, 68].
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  86, local model 1, internal_epoch   1,  Average loss: 0.0241, Accuracy: 68/84 (80.9524%), train_poison_data_count: 84
Global model norm: 14.077638878087331.
Norm before scaling: 14.081681796114811. Distance: 0.14546142068995022
Total norm for 5 adversaries is: 14.081681796114811. distance: 0.14546142068995022
___Test Local_Simple poisoned: True, epoch: 86: Average loss: 1.0726, Accuracy: 5533/8991 (61.5393%)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  86, local model 14, internal_epoch   1,  Average loss: 0.0152, Accuracy: 46/48 (95.8333%), train_poison_data_count: 48
Global model norm: 14.077638878087331.
Norm before scaling: 14.079678093091408. Distance: 0.06961334504045967
Total norm for 5 adversaries is: 14.079678093091408. distance: 0.06961334504045967
___Test Local_Simple poisoned: True, epoch: 86: Average loss: 0.9369, Accuracy: 6778/8991 (75.3865%)
___Train Local_Simple,  epoch  86, local model 49, internal_epoch   1,  Average loss: 0.0058, Accuracy: 192/196 (97.9592%)
___Test Local_Simple poisoned: False, epoch: 86: Average loss: 3.1835, Accuracy: 1437/10000 (14.3700%), Attack Success Rate:23/10000(0.230)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  86, local model 15, internal_epoch   1,  Average loss: 0.0099, Accuracy: 871/1033 (84.3175%), train_poison_data_count: 1033
Global model norm: 14.077638878087331.
Norm before scaling: 14.131699315266703. Distance: 1.1569527217532765
Total norm for 5 adversaries is: 14.131699315266703. distance: 1.1569527217532765
___Test Local_Simple poisoned: True, epoch: 86: Average loss: 8.9741, Accuracy: 3344/8991 (37.1927%)
___Train Local_Simple,  epoch  86, local model 89, internal_epoch   1,  Average loss: 0.0286, Accuracy: 39/69 (56.5217%)
___Test Local_Simple poisoned: False, epoch: 86: Average loss: 1.1322, Accuracy: 6361/10000 (63.6100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  86, local model 79, internal_epoch   1,  Average loss: 0.0534, Accuracy: 19/25 (76.0000%)
___Test Local_Simple poisoned: False, epoch: 86: Average loss: 1.1088, Accuracy: 6569/10000 (65.6900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  86, local model 44, internal_epoch   1,  Average loss: 0.0239, Accuracy: 36/47 (76.5957%)
___Test Local_Simple poisoned: False, epoch: 86: Average loss: 1.1783, Accuracy: 5547/10000 (55.4700%), Attack Success Rate:0/10000(0.000)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch  86, local model 9, internal_epoch   1,  Average loss: 0.0106, Accuracy: 235/263 (89.3536%), train_poison_data_count: 263
Global model norm: 14.077638878087331.
Norm before scaling: 14.102723506569019. Distance: 0.6254848268697913
Total norm for 5 adversaries is: 14.102723506569019. distance: 0.6254848268697913
___Test Local_Simple poisoned: True, epoch: 86: Average loss: 5.8255, Accuracy: 1832/8991 (20.3759%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  86, local model 13, internal_epoch   1,  Average loss: 0.2650, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 14.077638878087331.
Norm before scaling: 14.07848971589865. Distance: 0.07192584654545543
Total norm for 5 adversaries is: 14.07848971589865. distance: 0.07192584654545543
___Test Local_Simple poisoned: True, epoch: 86: Average loss: 0.9260, Accuracy: 7209/8991 (80.1802%)
___Train Local_Simple,  epoch  86, local model 68, internal_epoch   1,  Average loss: 0.0070, Accuracy: 1441/1591 (90.5720%)
___Test Local_Simple poisoned: False, epoch: 86: Average loss: 3.6071, Accuracy: 1931/10000 (19.3100%), Attack Success Rate:33/10000(0.330)
time spent on training: 47.21863508224487
[foolsgold agg] training data poison_ratio: 0.4263612020232074  data num: [84, 48, 196, 1033, 69, 25, 47, 263, 5, 1591]
[foolsgold agg] considering poison per batch poison_fraction: 0.4263612020232074
[foolsgold agg] wv: [0.         1.         0.6405149  0.27379045 0.6405149  0.
 1.         0.         0.63031043 0.        ]
___Test Target_Simple poisoned: False, epoch: 86: Average loss: 1.0538, Accuracy: 7299/10000 (72.9900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 86: Average loss: 0.9121, Accuracy: 7341/8991 (81.6483%)
Done in 135.47020530700684 sec.
Server Epoch:87 choose agents : [90, 51, 82, 94, 53, 48, 52, 72, 54, 36].
___Train Local_Simple,  epoch  87, local model 90, internal_epoch   1,  Average loss: 0.0068, Accuracy: 703/768 (91.5365%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 3.5413, Accuracy: 2592/10000 (25.9200%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  87, local model 51, internal_epoch   1,  Average loss: 0.0051, Accuracy: 250/259 (96.5251%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 2.7186, Accuracy: 2463/10000 (24.6300%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch  87, local model 82, internal_epoch   1,  Average loss: 0.0134, Accuracy: 101/114 (88.5965%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 1.6234, Accuracy: 3801/10000 (38.0100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  87, local model 94, internal_epoch   1,  Average loss: 0.0061, Accuracy: 574/607 (94.5634%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 1.9747, Accuracy: 3836/10000 (38.3600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  87, local model 53, internal_epoch   1,  Average loss: 0.0080, Accuracy: 423/456 (92.7632%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 5.5631, Accuracy: 2102/10000 (21.0200%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  87, local model 48, internal_epoch   1,  Average loss: 0.0188, Accuracy: 107/128 (83.5938%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 2.0175, Accuracy: 2736/10000 (27.3600%), Attack Success Rate:13/10000(0.130)
___Train Local_Simple,  epoch  87, local model 52, internal_epoch   1,  Average loss: 0.0038, Accuracy: 690/705 (97.8723%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 13.1860, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  87, local model 72, internal_epoch   1,  Average loss: 0.0985, Accuracy: 7/10 (70.0000%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 1.0916, Accuracy: 6589/10000 (65.8900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  87, local model 54, internal_epoch   1,  Average loss: 0.0282, Accuracy: 61/91 (67.0330%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 1.1158, Accuracy: 6974/10000 (69.7400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  87, local model 36, internal_epoch   1,  Average loss: 0.0103, Accuracy: 273/304 (89.8026%)
___Test Local_Simple poisoned: False, epoch: 87: Average loss: 12.0120, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
time spent on training: 39.329535484313965
[foolsgold agg] training data poison_ratio: 0.0  data num: [768, 259, 114, 607, 456, 128, 705, 10, 91, 304]
[foolsgold agg] considering poison per batch poison_fraction: 0.0
[foolsgold agg] wv: [0.59578588 0.38923823 0.37632656 1.         1.         1.
 0.37632656 0.59578588 1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 87: Average loss: 1.0335, Accuracy: 7514/10000 (75.1400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 87: Average loss: 0.8844, Accuracy: 7551/8991 (83.9840%)
Done in 127.2977967262268 sec.
Server Epoch:88 choose agents : [94, 90, 75, 70, 69, 80, 96, 82, 37, 1].
___Train Local_Simple,  epoch  88, local model 94, internal_epoch   1,  Average loss: 0.0064, Accuracy: 577/607 (95.0577%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 1.8332, Accuracy: 4007/10000 (40.0700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  88, local model 90, internal_epoch   1,  Average loss: 0.0058, Accuracy: 705/768 (91.7969%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 3.9990, Accuracy: 2656/10000 (26.5600%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  88, local model 75, internal_epoch   1,  Average loss: 0.0055, Accuracy: 461/497 (92.7565%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 7.0192, Accuracy: 2007/10000 (20.0700%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  88, local model 70, internal_epoch   1,  Average loss: 0.0159, Accuracy: 428/569 (75.2197%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 2.4765, Accuracy: 4795/10000 (47.9500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  88, local model 69, internal_epoch   1,  Average loss: 0.0062, Accuracy: 539/586 (91.9795%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 6.9172, Accuracy: 1817/10000 (18.1700%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  88, local model 80, internal_epoch   1,  Average loss: 0.0159, Accuracy: 74/84 (88.0952%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 1.9781, Accuracy: 2540/10000 (25.4000%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  88, local model 96, internal_epoch   1,  Average loss: 0.0100, Accuracy: 429/505 (84.9505%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 5.6378, Accuracy: 2733/10000 (27.3300%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  88, local model 82, internal_epoch   1,  Average loss: 0.0140, Accuracy: 102/114 (89.4737%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 1.6895, Accuracy: 3728/10000 (37.2800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  88, local model 37, internal_epoch   1,  Average loss: 0.0095, Accuracy: 515/578 (89.1003%)
___Test Local_Simple poisoned: False, epoch: 88: Average loss: 4.7286, Accuracy: 2679/10000 (26.7900%), Attack Success Rate:12/10000(0.120)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  88, local model 1, internal_epoch   1,  Average loss: 0.0234, Accuracy: 68/84 (80.9524%), train_poison_data_count: 84
Global model norm: 14.080282268295718.
Norm before scaling: 14.084521602784273. Distance: 0.1459279810498684
Total norm for 1 adversaries is: 14.084521602784273. distance: 0.1459279810498684
___Test Local_Simple poisoned: True, epoch: 88: Average loss: 1.0672, Accuracy: 5400/8991 (60.0601%)
time spent on training: 43.88323664665222
[foolsgold agg] training data poison_ratio: 0.01912568306010929  data num: [607, 768, 497, 569, 586, 84, 505, 114, 578, 84]
[foolsgold agg] considering poison per batch poison_fraction: 0.01912568306010929
[foolsgold agg] wv: [1.         0.12036006 1.         1.         0.12036006 0.78433121
 1.         0.78433121 1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 88: Average loss: 1.0128, Accuracy: 7566/10000 (75.6600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 88: Average loss: 0.8617, Accuracy: 7599/8991 (84.5179%)
Done in 132.23118376731873 sec.
Server Epoch:89 choose agents : [82, 36, 17, 29, 79, 33, 64, 19, 15, 66].
___Train Local_Simple,  epoch  89, local model 82, internal_epoch   1,  Average loss: 0.0126, Accuracy: 105/114 (92.1053%)
___Test Local_Simple poisoned: False, epoch: 89: Average loss: 1.6572, Accuracy: 3763/10000 (37.6300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  89, local model 36, internal_epoch   1,  Average loss: 0.0101, Accuracy: 270/304 (88.8158%)
___Test Local_Simple poisoned: False, epoch: 89: Average loss: 10.1525, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  89, local model 17, internal_epoch   1,  Average loss: 0.0139, Accuracy: 83/94 (88.2979%), train_poison_data_count: 94
Global model norm: 14.084053577913814.
Norm before scaling: 14.088143935967821. Distance: 0.1835979806128514
Total norm for 5 adversaries is: 14.088143935967821. distance: 0.1835979806128514
___Test Local_Simple poisoned: True, epoch: 89: Average loss: 1.2918, Accuracy: 4649/8991 (51.7073%)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  89, local model 29, internal_epoch   1,  Average loss: 0.0063, Accuracy: 1133/1232 (91.9643%), train_poison_data_count: 1232
Global model norm: 14.084053577913814.
Norm before scaling: 14.04170934895142. Distance: 0.7282709933108887
Total norm for 5 adversaries is: 14.04170934895142. distance: 0.7282709933108887
___Test Local_Simple poisoned: True, epoch: 89: Average loss: 1.7732, Accuracy: 4937/8991 (54.9105%)
___Train Local_Simple,  epoch  89, local model 79, internal_epoch   1,  Average loss: 0.0492, Accuracy: 19/25 (76.0000%)
___Test Local_Simple poisoned: False, epoch: 89: Average loss: 1.0820, Accuracy: 6434/10000 (64.3400%), Attack Success Rate:0/10000(0.000)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  89, local model 33, internal_epoch   1,  Average loss: 0.0087, Accuracy: 584/644 (90.6832%), train_poison_data_count: 644
Global model norm: 14.084053577913814.
Norm before scaling: 14.117444743782425. Distance: 0.8145475264254297
Total norm for 5 adversaries is: 14.117444743782425. distance: 0.8145475264254297
___Test Local_Simple poisoned: True, epoch: 89: Average loss: 7.4265, Accuracy: 2593/8991 (28.8400%)
___Train Local_Simple,  epoch  89, local model 64, internal_epoch   1,  Average loss: 0.0174, Accuracy: 171/216 (79.1667%)
___Test Local_Simple poisoned: False, epoch: 89: Average loss: 4.9140, Accuracy: 974/10000 (9.7400%), Attack Success Rate:5/10000(0.050)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  89, local model 19, internal_epoch   1,  Average loss: 0.0124, Accuracy: 206/244 (84.4262%), train_poison_data_count: 244
Global model norm: 14.084053577913814.
Norm before scaling: 14.099949050703051. Distance: 0.47303485681842544
Total norm for 5 adversaries is: 14.099949050703051. distance: 0.47303485681842544
___Test Local_Simple poisoned: True, epoch: 89: Average loss: 4.4692, Accuracy: 1948/8991 (21.6661%)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  89, local model 15, internal_epoch   1,  Average loss: 0.0096, Accuracy: 884/1033 (85.5760%), train_poison_data_count: 1033
Global model norm: 14.084053577913814.
Norm before scaling: 14.131246890203107. Distance: 1.114549630389367
Total norm for 5 adversaries is: 14.131246890203107. distance: 1.114549630389367
___Test Local_Simple poisoned: True, epoch: 89: Average loss: 8.8614, Accuracy: 3592/8991 (39.9511%)
___Train Local_Simple,  epoch  89, local model 66, internal_epoch   1,  Average loss: 0.0044, Accuracy: 649/681 (95.3010%)
___Test Local_Simple poisoned: False, epoch: 89: Average loss: 4.1258, Accuracy: 3100/10000 (31.0000%), Attack Success Rate:5/10000(0.050)
time spent on training: 46.55735921859741
[foolsgold agg] training data poison_ratio: 0.7078700675822978  data num: [114, 304, 94, 1232, 25, 644, 216, 244, 1033, 681]
[foolsgold agg] considering poison per batch poison_fraction: 0.7078700675822978
[foolsgold agg] wv: [1.         0.         1.         1.         0.         1.
 0.03517459 0.         0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 89: Average loss: 1.0244, Accuracy: 7461/10000 (74.6100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 89: Average loss: 0.8513, Accuracy: 7506/8991 (83.4835%)
Done in 133.8581337928772 sec.
Server Epoch:90 choose agents : [76, 67, 89, 86, 25, 4, 77, 85, 94, 91].
___Train Local_Simple,  epoch  90, local model 76, internal_epoch   1,  Average loss: 0.0187, Accuracy: 78/87 (89.6552%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 1.3095, Accuracy: 4838/10000 (48.3800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  90, local model 67, internal_epoch   1,  Average loss: 0.0124, Accuracy: 457/568 (80.4577%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 3.1556, Accuracy: 4079/10000 (40.7900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  90, local model 89, internal_epoch   1,  Average loss: 0.0287, Accuracy: 40/69 (57.9710%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 1.0942, Accuracy: 6584/10000 (65.8400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  90, local model 86, internal_epoch   1,  Average loss: 0.0286, Accuracy: 27/34 (79.4118%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 1.0691, Accuracy: 7129/10000 (71.2900%), Attack Success Rate:0/10000(0.000)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  90, local model 25, internal_epoch   1,  Average loss: 0.0192, Accuracy: 113/128 (88.2812%), train_poison_data_count: 128
Global model norm: 14.086305263328624.
Norm before scaling: 14.094401748372693. Distance: 0.1798747683206144
Total norm for 2 adversaries is: 14.094401748372693. distance: 0.1798747683206144
___Test Local_Simple poisoned: True, epoch: 90: Average loss: 1.0655, Accuracy: 6133/8991 (68.2127%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  90, local model 4, internal_epoch   1,  Average loss: 0.0080, Accuracy: 437/463 (94.3844%), train_poison_data_count: 463
Global model norm: 14.086305263328624.
Norm before scaling: 14.103817881446421. Distance: 0.941993308734009
Total norm for 2 adversaries is: 14.103817881446421. distance: 0.941993308734009
___Test Local_Simple poisoned: True, epoch: 90: Average loss: 13.4484, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  90, local model 77, internal_epoch   1,  Average loss: 0.0045, Accuracy: 1440/1544 (93.2642%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 3.8258, Accuracy: 3764/10000 (37.6400%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  90, local model 85, internal_epoch   1,  Average loss: 0.2517, Accuracy: 3/4 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 1.0278, Accuracy: 7214/10000 (72.1400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  90, local model 94, internal_epoch   1,  Average loss: 0.0062, Accuracy: 577/607 (95.0577%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 1.9269, Accuracy: 3962/10000 (39.6200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  90, local model 91, internal_epoch   1,  Average loss: 0.0132, Accuracy: 162/182 (89.0110%)
___Test Local_Simple poisoned: False, epoch: 90: Average loss: 2.9579, Accuracy: 2003/10000 (20.0300%), Attack Success Rate:24/10000(0.240)
time spent on training: 43.203059673309326
[foolsgold agg] training data poison_ratio: 0.16033640803038524  data num: [87, 568, 69, 34, 128, 463, 1544, 4, 607, 182]
[foolsgold agg] considering poison per batch poison_fraction: 0.16033640803038524
[foolsgold agg] wv: [0.         0.         0.         0.         0.         1.
 0.35113122 0.29717717 0.29717717 1.        ]
___Test Target_Simple poisoned: False, epoch: 90: Average loss: 1.0118, Accuracy: 7530/10000 (75.3000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 90: Average loss: 0.8378, Accuracy: 7571/8991 (84.2064%)
Done in 131.22197127342224 sec.
Server Epoch:91 choose agents : [20, 58, 95, 86, 54, 98, 80, 19, 94, 33].
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  91, local model 20, internal_epoch   1,  Average loss: 0.0016, Accuracy: 2148/2180 (98.5321%), train_poison_data_count: 2180
Global model norm: 14.086755882181663.
Norm before scaling: 13.911726449743755. Distance: 0.7892598198155037
Total norm for 3 adversaries is: 13.911726449743755. distance: 0.7892598198155037
___Test Local_Simple poisoned: True, epoch: 91: Average loss: 4.0913, Accuracy: 3105/8991 (34.5345%)
___Train Local_Simple,  epoch  91, local model 58, internal_epoch   1,  Average loss: 0.0114, Accuracy: 850/1015 (83.7438%)
___Test Local_Simple poisoned: False, epoch: 91: Average loss: 4.1048, Accuracy: 3736/10000 (37.3600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  91, local model 95, internal_epoch   1,  Average loss: 0.0224, Accuracy: 26/29 (89.6552%)
___Test Local_Simple poisoned: False, epoch: 91: Average loss: 1.0514, Accuracy: 6781/10000 (67.8100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  91, local model 86, internal_epoch   1,  Average loss: 0.0298, Accuracy: 29/34 (85.2941%)
___Test Local_Simple poisoned: False, epoch: 91: Average loss: 1.0503, Accuracy: 7324/10000 (73.2400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  91, local model 54, internal_epoch   1,  Average loss: 0.0250, Accuracy: 66/91 (72.5275%)
___Test Local_Simple poisoned: False, epoch: 91: Average loss: 1.1098, Accuracy: 6822/10000 (68.2200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  91, local model 98, internal_epoch   1,  Average loss: 0.0866, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 91: Average loss: 1.0515, Accuracy: 6788/10000 (67.8800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  91, local model 80, internal_epoch   1,  Average loss: 0.0160, Accuracy: 72/84 (85.7143%)
___Test Local_Simple poisoned: False, epoch: 91: Average loss: 2.0153, Accuracy: 2526/10000 (25.2600%), Attack Success Rate:14/10000(0.140)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  91, local model 19, internal_epoch   1,  Average loss: 0.0127, Accuracy: 205/244 (84.0164%), train_poison_data_count: 244
Global model norm: 14.086755882181663.
Norm before scaling: 14.102915555758376. Distance: 0.5092585588540293
Total norm for 3 adversaries is: 14.102915555758376. distance: 0.5092585588540293
___Test Local_Simple poisoned: True, epoch: 91: Average loss: 4.7480, Accuracy: 1943/8991 (21.6105%)
___Train Local_Simple,  epoch  91, local model 94, internal_epoch   1,  Average loss: 0.0055, Accuracy: 572/607 (94.2339%)
___Test Local_Simple poisoned: False, epoch: 91: Average loss: 2.0563, Accuracy: 3687/10000 (36.8700%), Attack Success Rate:1/10000(0.010)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  91, local model 33, internal_epoch   1,  Average loss: 0.0082, Accuracy: 591/644 (91.7702%), train_poison_data_count: 644
Global model norm: 14.086755882181663.
Norm before scaling: 14.117664153892788. Distance: 0.7675396470382121
Total norm for 3 adversaries is: 14.117664153892788. distance: 0.7675396470382121
___Test Local_Simple poisoned: True, epoch: 91: Average loss: 7.4044, Accuracy: 2528/8991 (28.1170%)
time spent on training: 44.08164572715759
[foolsgold agg] training data poison_ratio: 0.6218078638021889  data num: [2180, 1015, 29, 34, 91, 6, 84, 244, 607, 644]
[foolsgold agg] considering poison per batch poison_fraction: 0.6218078638021889
[foolsgold agg] wv: [1.         1.         0.         0.         1.         0.
 0.         0.52572954 1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 91: Average loss: 1.0031, Accuracy: 7597/10000 (75.9700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 91: Average loss: 0.8199, Accuracy: 7650/8991 (85.0851%)
Done in 132.20615148544312 sec.
Server Epoch:92 choose agents : [47, 89, 52, 39, 94, 10, 36, 79, 53, 74].
___Train Local_Simple,  epoch  92, local model 47, internal_epoch   1,  Average loss: 0.0042, Accuracy: 2372/2519 (94.1644%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 3.0705, Accuracy: 4588/10000 (45.8800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  92, local model 89, internal_epoch   1,  Average loss: 0.0295, Accuracy: 40/69 (57.9710%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 1.0590, Accuracy: 6877/10000 (68.7700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  92, local model 52, internal_epoch   1,  Average loss: 0.0044, Accuracy: 688/705 (97.5887%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 12.1338, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  92, local model 39, internal_epoch   1,  Average loss: 0.0050, Accuracy: 1186/1259 (94.2017%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 2.8934, Accuracy: 2826/10000 (28.2600%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  92, local model 94, internal_epoch   1,  Average loss: 0.0070, Accuracy: 573/607 (94.3987%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 1.6506, Accuracy: 4401/10000 (44.0100%), Attack Success Rate:0/10000(0.000)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  92, local model 10, internal_epoch   1,  Average loss: 0.0076, Accuracy: 611/688 (88.8081%), train_poison_data_count: 688
Global model norm: 14.089264352517388.
Norm before scaling: 14.128202632293346. Distance: 0.9599205776977963
Total norm for 1 adversaries is: 14.128202632293346. distance: 0.9599205776977963
___Test Local_Simple poisoned: True, epoch: 92: Average loss: 8.3305, Accuracy: 2751/8991 (30.5973%)
___Train Local_Simple,  epoch  92, local model 36, internal_epoch   1,  Average loss: 0.0110, Accuracy: 275/304 (90.4605%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 10.7632, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  92, local model 79, internal_epoch   1,  Average loss: 0.0489, Accuracy: 18/25 (72.0000%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 1.0679, Accuracy: 6634/10000 (66.3400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  92, local model 53, internal_epoch   1,  Average loss: 0.0076, Accuracy: 431/456 (94.5175%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 5.9131, Accuracy: 2106/10000 (21.0600%), Attack Success Rate:34/10000(0.340)
___Train Local_Simple,  epoch  92, local model 74, internal_epoch   1,  Average loss: 0.0099, Accuracy: 647/762 (84.9081%)
___Test Local_Simple poisoned: False, epoch: 92: Average loss: 4.8464, Accuracy: 3745/10000 (37.4500%), Attack Success Rate:0/10000(0.000)
time spent on training: 51.9155797958374
[foolsgold agg] training data poison_ratio: 0.09304841763592102  data num: [2519, 69, 705, 1259, 607, 688, 304, 25, 456, 762]
[foolsgold agg] considering poison per batch poison_fraction: 0.09304841763592102
[foolsgold agg] wv: [0.77605834 0.43838318 1.         1.         1.         1.
 0.         0.         0.77605834 0.43838318]
___Test Target_Simple poisoned: False, epoch: 92: Average loss: 0.9856, Accuracy: 7620/10000 (76.2000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 92: Average loss: 0.8106, Accuracy: 7660/8991 (85.1963%)
Done in 139.89644861221313 sec.
Server Epoch:93 choose agents : [6, 10, 27, 69, 28, 15, 13, 81, 44, 66].
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  93, local model 6, internal_epoch   1,  Average loss: 0.0059, Accuracy: 1798/1982 (90.7164%), train_poison_data_count: 1982
Global model norm: 14.092081516745827.
Norm before scaling: 14.011712215986767. Distance: 1.2282634530878729
Total norm for 6 adversaries is: 14.011712215986767. distance: 1.2282634530878729
___Test Local_Simple poisoned: True, epoch: 93: Average loss: 5.6041, Accuracy: 2612/8991 (29.0513%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  93, local model 10, internal_epoch   1,  Average loss: 0.0074, Accuracy: 624/688 (90.6977%), train_poison_data_count: 688
Global model norm: 14.092081516745827.
Norm before scaling: 14.126094809445025. Distance: 0.9200325998459826
Total norm for 6 adversaries is: 14.126094809445025. distance: 0.9200325998459826
___Test Local_Simple poisoned: True, epoch: 93: Average loss: 7.9346, Accuracy: 2749/8991 (30.5750%)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  93, local model 27, internal_epoch   1,  Average loss: 0.0077, Accuracy: 609/678 (89.8230%), train_poison_data_count: 678
Global model norm: 14.092081516745827.
Norm before scaling: 14.077398791619183. Distance: 0.7268162766119923
Total norm for 6 adversaries is: 14.077398791619183. distance: 0.7268162766119923
___Test Local_Simple poisoned: True, epoch: 93: Average loss: 4.7688, Accuracy: 1053/8991 (11.7117%)
___Train Local_Simple,  epoch  93, local model 69, internal_epoch   1,  Average loss: 0.0047, Accuracy: 556/586 (94.8805%)
___Test Local_Simple poisoned: False, epoch: 93: Average loss: 7.6980, Accuracy: 1944/10000 (19.4400%), Attack Success Rate:22/10000(0.220)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  93, local model 28, internal_epoch   1,  Average loss: 0.0113, Accuracy: 206/237 (86.9198%), train_poison_data_count: 237
Global model norm: 14.092081516745827.
Norm before scaling: 14.103802734968824. Distance: 0.35360975750987633
Total norm for 6 adversaries is: 14.103802734968824. distance: 0.35360975750987633
___Test Local_Simple poisoned: True, epoch: 93: Average loss: 2.7120, Accuracy: 2558/8991 (28.4507%)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  93, local model 15, internal_epoch   1,  Average loss: 0.0088, Accuracy: 896/1033 (86.7377%), train_poison_data_count: 1033
Global model norm: 14.092081516745827.
Norm before scaling: 14.135687911435092. Distance: 1.0859964478225643
Total norm for 6 adversaries is: 14.135687911435092. distance: 1.0859964478225643
___Test Local_Simple poisoned: True, epoch: 93: Average loss: 9.1679, Accuracy: 3351/8991 (37.2706%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  93, local model 13, internal_epoch   1,  Average loss: 0.2193, Accuracy: 4/5 (80.0000%), train_poison_data_count: 5
Global model norm: 14.092081516745827.
Norm before scaling: 14.09320595107771. Distance: 0.06951121218336782
Total norm for 6 adversaries is: 14.09320595107771. distance: 0.06951121218336782
___Test Local_Simple poisoned: True, epoch: 93: Average loss: 0.8485, Accuracy: 7216/8991 (80.2580%)
___Train Local_Simple,  epoch  93, local model 81, internal_epoch   1,  Average loss: 0.0240, Accuracy: 60/68 (88.2353%)
___Test Local_Simple poisoned: False, epoch: 93: Average loss: 1.2991, Accuracy: 5366/10000 (53.6600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  93, local model 44, internal_epoch   1,  Average loss: 0.0232, Accuracy: 37/47 (78.7234%)
___Test Local_Simple poisoned: False, epoch: 93: Average loss: 1.1123, Accuracy: 5814/10000 (58.1400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  93, local model 66, internal_epoch   1,  Average loss: 0.0034, Accuracy: 656/681 (96.3289%)
___Test Local_Simple poisoned: False, epoch: 93: Average loss: 4.3011, Accuracy: 3088/10000 (30.8800%), Attack Success Rate:2/10000(0.020)
time spent on training: 49.99608039855957
[foolsgold agg] training data poison_ratio: 0.7698584512905912  data num: [1982, 688, 678, 586, 237, 1033, 5, 68, 47, 681]
[foolsgold agg] considering poison per batch poison_fraction: 0.7698584512905912
[foolsgold agg] wv: [0.         1.         0.46149697 0.         0.4628589  1.
 1.         1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 93: Average loss: 0.9801, Accuracy: 7670/10000 (76.7000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 93: Average loss: 0.7928, Accuracy: 7728/8991 (85.9526%)
Done in 136.86054968833923 sec.
Server Epoch:94 choose agents : [29, 45, 66, 74, 73, 21, 79, 80, 25, 96].
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  94, local model 29, internal_epoch   1,  Average loss: 0.0056, Accuracy: 1152/1232 (93.5065%), train_poison_data_count: 1232
Global model norm: 14.09511192491146.
Norm before scaling: 14.060547281957557. Distance: 0.6974384937718573
Total norm for 3 adversaries is: 14.060547281957557. distance: 0.6974384937718573
___Test Local_Simple poisoned: True, epoch: 94: Average loss: 2.1114, Accuracy: 4604/8991 (51.2068%)
___Train Local_Simple,  epoch  94, local model 45, internal_epoch   1,  Average loss: 0.0088, Accuracy: 342/388 (88.1443%)
___Test Local_Simple poisoned: False, epoch: 94: Average loss: 5.4463, Accuracy: 1953/10000 (19.5300%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  94, local model 66, internal_epoch   1,  Average loss: 0.0033, Accuracy: 659/681 (96.7695%)
___Test Local_Simple poisoned: False, epoch: 94: Average loss: 3.9988, Accuracy: 3085/10000 (30.8500%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  94, local model 74, internal_epoch   1,  Average loss: 0.0094, Accuracy: 649/762 (85.1706%)
___Test Local_Simple poisoned: False, epoch: 94: Average loss: 5.3231, Accuracy: 3730/10000 (37.3000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  94, local model 73, internal_epoch   1,  Average loss: 0.0069, Accuracy: 1100/1205 (91.2863%)
___Test Local_Simple poisoned: False, epoch: 94: Average loss: 2.5226, Accuracy: 2701/10000 (27.0100%), Attack Success Rate:8/10000(0.080)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  94, local model 21, internal_epoch   1,  Average loss: 0.0034, Accuracy: 1980/2072 (95.5598%), train_poison_data_count: 2072
Global model norm: 14.09511192491146.
Norm before scaling: 13.981929015313224. Distance: 1.1283935649879007
Total norm for 3 adversaries is: 13.981929015313224. distance: 1.1283935649879007
___Test Local_Simple poisoned: True, epoch: 94: Average loss: 4.6813, Accuracy: 2839/8991 (31.5760%)
___Train Local_Simple,  epoch  94, local model 79, internal_epoch   1,  Average loss: 0.0454, Accuracy: 18/25 (72.0000%)
___Test Local_Simple poisoned: False, epoch: 94: Average loss: 1.0577, Accuracy: 6498/10000 (64.9800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  94, local model 80, internal_epoch   1,  Average loss: 0.0142, Accuracy: 75/84 (89.2857%)
___Test Local_Simple poisoned: False, epoch: 94: Average loss: 1.9510, Accuracy: 2840/10000 (28.4000%), Attack Success Rate:8/10000(0.080)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  94, local model 25, internal_epoch   1,  Average loss: 0.0177, Accuracy: 116/128 (90.6250%), train_poison_data_count: 128
Global model norm: 14.09511192491146.
Norm before scaling: 14.10323310741304. Distance: 0.1796253241899096
Total norm for 3 adversaries is: 14.10323310741304. distance: 0.1796253241899096
___Test Local_Simple poisoned: True, epoch: 94: Average loss: 1.0077, Accuracy: 6263/8991 (69.6585%)
___Train Local_Simple,  epoch  94, local model 96, internal_epoch   1,  Average loss: 0.0091, Accuracy: 447/505 (88.5149%)
___Test Local_Simple poisoned: False, epoch: 94: Average loss: 5.8518, Accuracy: 2565/10000 (25.6500%), Attack Success Rate:12/10000(0.120)
time spent on training: 49.24416637420654
[foolsgold agg] training data poison_ratio: 0.4846088675515391  data num: [1232, 388, 681, 762, 1205, 2072, 25, 84, 128, 505]
[foolsgold agg] considering poison per batch poison_fraction: 0.4846088675515391
[foolsgold agg] wv: [1.         1.         1.         0.06267939 1.         0.0397069
 1.         1.         0.0397069  0.06267939]
___Test Target_Simple poisoned: False, epoch: 94: Average loss: 0.9789, Accuracy: 7622/10000 (76.2200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 94: Average loss: 0.7835, Accuracy: 7713/8991 (85.7858%)
Done in 137.09415411949158 sec.
Server Epoch:95 choose agents : [59, 53, 27, 94, 48, 51, 20, 52, 93, 89].
___Train Local_Simple,  epoch  95, local model 59, internal_epoch   1,  Average loss: 0.0296, Accuracy: 24/27 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 1.0700, Accuracy: 7292/10000 (72.9200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  95, local model 53, internal_epoch   1,  Average loss: 0.0076, Accuracy: 426/456 (93.4211%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 5.8502, Accuracy: 2120/10000 (21.2000%), Attack Success Rate:23/10000(0.230)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  95, local model 27, internal_epoch   1,  Average loss: 0.0080, Accuracy: 601/678 (88.6431%), train_poison_data_count: 678
Global model norm: 14.09708799769117.
Norm before scaling: 14.080501715651085. Distance: 0.7479381033996254
Total norm for 2 adversaries is: 14.080501715651085. distance: 0.7479381033996254
___Test Local_Simple poisoned: True, epoch: 95: Average loss: 4.3642, Accuracy: 1124/8991 (12.5014%)
___Train Local_Simple,  epoch  95, local model 94, internal_epoch   1,  Average loss: 0.0061, Accuracy: 578/607 (95.2224%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 1.7112, Accuracy: 4216/10000 (42.1600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  95, local model 48, internal_epoch   1,  Average loss: 0.0155, Accuracy: 112/128 (87.5000%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 1.9731, Accuracy: 2965/10000 (29.6500%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  95, local model 51, internal_epoch   1,  Average loss: 0.0047, Accuracy: 253/259 (97.6834%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 2.8320, Accuracy: 2544/10000 (25.4400%), Attack Success Rate:13/10000(0.130)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  95, local model 20, internal_epoch   1,  Average loss: 0.0014, Accuracy: 2152/2180 (98.7156%), train_poison_data_count: 2180
Global model norm: 14.09708799769117.
Norm before scaling: 13.909014823465212. Distance: 0.6518676299485905
Total norm for 2 adversaries is: 13.909014823465212. distance: 0.6518676299485905
___Test Local_Simple poisoned: True, epoch: 95: Average loss: 3.4539, Accuracy: 3373/8991 (37.5153%)
___Train Local_Simple,  epoch  95, local model 52, internal_epoch   1,  Average loss: 0.0041, Accuracy: 687/705 (97.4468%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 13.5832, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  95, local model 93, internal_epoch   1,  Average loss: 0.0255, Accuracy: 27/30 (90.0000%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 1.0497, Accuracy: 6638/10000 (66.3800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  95, local model 89, internal_epoch   1,  Average loss: 0.0293, Accuracy: 40/69 (57.9710%)
___Test Local_Simple poisoned: False, epoch: 95: Average loss: 1.0312, Accuracy: 6919/10000 (69.1900%), Attack Success Rate:0/10000(0.000)
time spent on training: 42.827409982681274
[foolsgold agg] training data poison_ratio: 0.5561393267172602  data num: [27, 456, 678, 607, 128, 259, 2180, 705, 30, 69]
[foolsgold agg] considering poison per batch poison_fraction: 0.5561393267172602
[foolsgold agg] wv: [1.         1.         0.         0.37708485 1.         0.
 0.         0.9737599  0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 95: Average loss: 0.9633, Accuracy: 7593/10000 (75.9300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 95: Average loss: 0.7824, Accuracy: 7678/8991 (85.3965%)
Done in 130.725932598114 sec.
Server Epoch:96 choose agents : [46, 20, 0, 79, 78, 82, 87, 33, 62, 76].
___Train Local_Simple,  epoch  96, local model 46, internal_epoch   1,  Average loss: 0.0220, Accuracy: 193/310 (62.2581%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 2.3542, Accuracy: 2210/10000 (22.1000%), Attack Success Rate:23/10000(0.230)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  96, local model 20, internal_epoch   1,  Average loss: 0.0014, Accuracy: 2155/2180 (98.8532%), train_poison_data_count: 2180
Global model norm: 14.097794791851811.
Norm before scaling: 13.915592784146124. Distance: 0.6678945712121214
Total norm for 2 adversaries is: 13.915592784146124. distance: 0.6678945712121214
___Test Local_Simple poisoned: True, epoch: 96: Average loss: 3.8483, Accuracy: 3264/8991 (36.3030%)
___Train Local_Simple,  epoch  96, local model 0, internal_epoch   1,  Average loss: 0.0053, Accuracy: 284/300 (94.6667%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 2.6508, Accuracy: 2673/10000 (26.7300%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  96, local model 79, internal_epoch   1,  Average loss: 0.0464, Accuracy: 18/25 (72.0000%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 1.0329, Accuracy: 6642/10000 (66.4200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  96, local model 78, internal_epoch   1,  Average loss: 0.0052, Accuracy: 2153/2324 (92.6420%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 2.4191, Accuracy: 5442/10000 (54.4200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  96, local model 82, internal_epoch   1,  Average loss: 0.0101, Accuracy: 104/114 (91.2281%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 1.4922, Accuracy: 4253/10000 (42.5300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  96, local model 87, internal_epoch   1,  Average loss: 0.0121, Accuracy: 33/33 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 0.9697, Accuracy: 7364/10000 (73.6400%), Attack Success Rate:0/10000(0.000)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  96, local model 33, internal_epoch   1,  Average loss: 0.0075, Accuracy: 593/644 (92.0807%), train_poison_data_count: 644
Global model norm: 14.097794791851811.
Norm before scaling: 14.119042144360174. Distance: 0.7048761813009599
Total norm for 2 adversaries is: 14.119042144360174. distance: 0.7048761813009599
___Test Local_Simple poisoned: True, epoch: 96: Average loss: 5.7532, Accuracy: 2648/8991 (29.4517%)
___Train Local_Simple,  epoch  96, local model 62, internal_epoch   1,  Average loss: 0.1919, Accuracy: 2/2 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 1.0264, Accuracy: 6931/10000 (69.3100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  96, local model 76, internal_epoch   1,  Average loss: 0.0186, Accuracy: 74/87 (85.0575%)
___Test Local_Simple poisoned: False, epoch: 96: Average loss: 1.2283, Accuracy: 5247/10000 (52.4700%), Attack Success Rate:0/10000(0.000)
time spent on training: 45.22766137123108
[foolsgold agg] training data poison_ratio: 0.46918092706429637  data num: [310, 2180, 300, 25, 2324, 114, 33, 644, 2, 87]
[foolsgold agg] considering poison per batch poison_fraction: 0.46918092706429637
[foolsgold agg] wv: [1.         1.         0.43814659 1.         0.82945683 0.
 0.50901721 1.         0.         0.43814659]
___Test Target_Simple poisoned: False, epoch: 96: Average loss: 0.9601, Accuracy: 7595/10000 (75.9500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 96: Average loss: 0.7700, Accuracy: 7651/8991 (85.0962%)
Done in 132.93956923484802 sec.
Server Epoch:97 choose agents : [56, 34, 5, 20, 94, 22, 14, 63, 4, 67].
___Train Local_Simple,  epoch  97, local model 56, internal_epoch   1,  Average loss: 0.0048, Accuracy: 673/704 (95.5966%)
___Test Local_Simple poisoned: False, epoch: 97: Average loss: 4.3830, Accuracy: 1841/10000 (18.4100%), Attack Success Rate:38/10000(0.380)
___Train Local_Simple,  epoch  97, local model 34, internal_epoch   1,  Average loss: 0.0091, Accuracy: 1021/1203 (84.8712%)
___Test Local_Simple poisoned: False, epoch: 97: Average loss: 2.9843, Accuracy: 4825/10000 (48.2500%), Attack Success Rate:0/10000(0.000)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  97, local model 5, internal_epoch   1,  Average loss: 0.0075, Accuracy: 975/1046 (93.2122%), train_poison_data_count: 1046
Global model norm: 14.100397610300027.
Norm before scaling: 14.057105084943366. Distance: 0.9660102803984436
Total norm for 5 adversaries is: 14.057105084943366. distance: 0.9660102803984436
___Test Local_Simple poisoned: True, epoch: 97: Average loss: 4.5196, Accuracy: 1098/8991 (12.2122%)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  97, local model 20, internal_epoch   1,  Average loss: 0.0015, Accuracy: 2146/2180 (98.4404%), train_poison_data_count: 2180
Global model norm: 14.100397610300027.
Norm before scaling: 13.920316358457205. Distance: 0.6958804008037213
Total norm for 5 adversaries is: 13.920316358457205. distance: 0.6958804008037213
___Test Local_Simple poisoned: True, epoch: 97: Average loss: 3.6239, Accuracy: 3203/8991 (35.6245%)
___Train Local_Simple,  epoch  97, local model 94, internal_epoch   1,  Average loss: 0.0064, Accuracy: 576/607 (94.8929%)
___Test Local_Simple poisoned: False, epoch: 97: Average loss: 1.7750, Accuracy: 4117/10000 (41.1700%), Attack Success Rate:0/10000(0.000)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch  97, local model 22, internal_epoch   1,  Average loss: 0.0316, Accuracy: 24/34 (70.5882%), train_poison_data_count: 34
Global model norm: 14.100397610300027.
Norm before scaling: 14.101654475115566. Distance: 0.08554006107401418
Total norm for 5 adversaries is: 14.101654475115566. distance: 0.08554006107401418
___Test Local_Simple poisoned: True, epoch: 97: Average loss: 0.8556, Accuracy: 6635/8991 (73.7960%)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  97, local model 14, internal_epoch   1,  Average loss: 0.0115, Accuracy: 47/48 (97.9167%), train_poison_data_count: 48
Global model norm: 14.100397610300027.
Norm before scaling: 14.102198739109577. Distance: 0.06295930210587776
Total norm for 5 adversaries is: 14.102198739109577. distance: 0.06295930210587776
___Test Local_Simple poisoned: True, epoch: 97: Average loss: 0.7963, Accuracy: 7168/8991 (79.7242%)
___Train Local_Simple,  epoch  97, local model 63, internal_epoch   1,  Average loss: 0.0045, Accuracy: 2875/3022 (95.1357%)
___Test Local_Simple poisoned: False, epoch: 97: Average loss: 3.2927, Accuracy: 1920/10000 (19.2000%), Attack Success Rate:34/10000(0.340)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  97, local model 4, internal_epoch   1,  Average loss: 0.0083, Accuracy: 442/463 (95.4644%), train_poison_data_count: 463
Global model norm: 14.100397610300027.
Norm before scaling: 14.109254416185998. Distance: 0.8495123095257638
Total norm for 5 adversaries is: 14.109254416185998. distance: 0.8495123095257638
___Test Local_Simple poisoned: True, epoch: 97: Average loss: 12.1938, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  97, local model 67, internal_epoch   1,  Average loss: 0.0123, Accuracy: 469/568 (82.5704%)
___Test Local_Simple poisoned: False, epoch: 97: Average loss: 2.8354, Accuracy: 4543/10000 (45.4300%), Attack Success Rate:0/10000(0.000)
time spent on training: 61.925097942352295
[foolsgold agg] training data poison_ratio: 0.381873417721519  data num: [704, 1203, 1046, 2180, 607, 34, 48, 3022, 463, 568]
[foolsgold agg] considering poison per batch poison_fraction: 0.38187341772151906
[foolsgold agg] wv: [1. 1. 0. 1. 0. 0. 1. 0. 0. 0.]
___Test Target_Simple poisoned: False, epoch: 97: Average loss: 0.9588, Accuracy: 7556/10000 (75.5600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 97: Average loss: 0.7649, Accuracy: 7609/8991 (84.6291%)
Done in 150.0096950531006 sec.
Server Epoch:98 choose agents : [91, 64, 77, 14, 67, 90, 75, 97, 92, 40].
___Train Local_Simple,  epoch  98, local model 91, internal_epoch   1,  Average loss: 0.0122, Accuracy: 161/182 (88.4615%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 2.6754, Accuracy: 2708/10000 (27.0800%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  98, local model 64, internal_epoch   1,  Average loss: 0.0165, Accuracy: 165/216 (76.3889%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 4.4853, Accuracy: 974/10000 (9.7400%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  98, local model 77, internal_epoch   1,  Average loss: 0.0043, Accuracy: 1450/1544 (93.9119%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 3.1760, Accuracy: 4065/10000 (40.6500%), Attack Success Rate:0/10000(0.000)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  98, local model 14, internal_epoch   1,  Average loss: 0.0101, Accuracy: 48/48 (100.0000%), train_poison_data_count: 48
Global model norm: 14.101815159613263.
Norm before scaling: 14.103522522199185. Distance: 0.056678773513118175
Total norm for 1 adversaries is: 14.103522522199185. distance: 0.056678773513118175
___Test Local_Simple poisoned: True, epoch: 98: Average loss: 0.7968, Accuracy: 7124/8991 (79.2348%)
___Train Local_Simple,  epoch  98, local model 67, internal_epoch   1,  Average loss: 0.0117, Accuracy: 464/568 (81.6901%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 3.0477, Accuracy: 4194/10000 (41.9400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  98, local model 90, internal_epoch   1,  Average loss: 0.0055, Accuracy: 710/768 (92.4479%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 4.2580, Accuracy: 2717/10000 (27.1700%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  98, local model 75, internal_epoch   1,  Average loss: 0.0053, Accuracy: 455/497 (91.5493%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 5.9661, Accuracy: 2142/10000 (21.4200%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch  98, local model 97, internal_epoch   1,  Average loss: 0.0982, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 1.0724, Accuracy: 7132/10000 (71.3200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  98, local model 92, internal_epoch   1,  Average loss: 0.0084, Accuracy: 185/202 (91.5842%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 5.9772, Accuracy: 1075/10000 (10.7500%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  98, local model 40, internal_epoch   1,  Average loss: 0.0114, Accuracy: 361/436 (82.7982%)
___Test Local_Simple poisoned: False, epoch: 98: Average loss: 4.0379, Accuracy: 2723/10000 (27.2300%), Attack Success Rate:6/10000(0.060)
time spent on training: 44.943902015686035
[foolsgold agg] training data poison_ratio: 0.010747872816838333  data num: [182, 216, 1544, 48, 568, 768, 497, 5, 202, 436]
[foolsgold agg] considering poison per batch poison_fraction: 0.010747872816838333
[foolsgold agg] wv: [0.        1.        1.        0.7403217 0.        1.        0.7403217
 1.        0.        0.       ]
___Test Target_Simple poisoned: False, epoch: 98: Average loss: 0.9481, Accuracy: 7557/10000 (75.5700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 98: Average loss: 0.7627, Accuracy: 7585/8991 (84.3621%)
Done in 132.93516421318054 sec.
Server Epoch:99 choose agents : [76, 6, 8, 88, 2, 82, 12, 27, 61, 21].
___Train Local_Simple,  epoch  99, local model 76, internal_epoch   1,  Average loss: 0.0174, Accuracy: 77/87 (88.5057%)
___Test Local_Simple poisoned: False, epoch: 99: Average loss: 1.2067, Accuracy: 5312/10000 (53.1200%), Attack Success Rate:0/10000(0.000)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  99, local model 6, internal_epoch   1,  Average loss: 0.0061, Accuracy: 1783/1982 (89.9596%), train_poison_data_count: 1982
Global model norm: 14.103154666868587.
Norm before scaling: 14.032491854147601. Distance: 1.2712534329978478
Total norm for 6 adversaries is: 14.032491854147601. distance: 1.2712534329978478
___Test Local_Simple poisoned: True, epoch: 99: Average loss: 3.9746, Accuracy: 2572/8991 (28.6064%)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  99, local model 8, internal_epoch   1,  Average loss: 0.0136, Accuracy: 149/171 (87.1345%), train_poison_data_count: 171
Global model norm: 14.103154666868587.
Norm before scaling: 14.109682132592942. Distance: 0.3148377003810295
Total norm for 6 adversaries is: 14.109682132592942. distance: 0.3148377003810295
___Test Local_Simple poisoned: True, epoch: 99: Average loss: 2.7154, Accuracy: 1311/8991 (14.5812%)
___Train Local_Simple,  epoch  99, local model 88, internal_epoch   1,  Average loss: 0.0208, Accuracy: 69/96 (71.8750%)
___Test Local_Simple poisoned: False, epoch: 99: Average loss: 1.9886, Accuracy: 2127/10000 (21.2700%), Attack Success Rate:25/10000(0.250)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  99, local model 2, internal_epoch   1,  Average loss: 0.0169, Accuracy: 102/119 (85.7143%), train_poison_data_count: 119
Global model norm: 14.103154666868587.
Norm before scaling: 14.110749474511334. Distance: 0.24801468828084844
Total norm for 6 adversaries is: 14.110749474511334. distance: 0.24801468828084844
___Test Local_Simple poisoned: True, epoch: 99: Average loss: 1.6963, Accuracy: 4125/8991 (45.8792%)
___Train Local_Simple,  epoch  99, local model 82, internal_epoch   1,  Average loss: 0.0123, Accuracy: 104/114 (91.2281%)
___Test Local_Simple poisoned: False, epoch: 99: Average loss: 1.4576, Accuracy: 4347/10000 (43.4700%), Attack Success Rate:0/10000(0.000)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  99, local model 12, internal_epoch   1,  Average loss: 0.0045, Accuracy: 614/648 (94.7531%), train_poison_data_count: 648
Global model norm: 14.103154666868587.
Norm before scaling: 14.111595072085779. Distance: 0.5316997475581694
Total norm for 6 adversaries is: 14.111595072085779. distance: 0.5316997475581694
___Test Local_Simple poisoned: True, epoch: 99: Average loss: 2.6081, Accuracy: 4390/8991 (48.8266%)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  99, local model 27, internal_epoch   1,  Average loss: 0.0074, Accuracy: 618/678 (91.1504%), train_poison_data_count: 678
Global model norm: 14.103154666868587.
Norm before scaling: 14.086812750123118. Distance: 0.7075701182770475
Total norm for 6 adversaries is: 14.086812750123118. distance: 0.7075701182770475
___Test Local_Simple poisoned: True, epoch: 99: Average loss: 4.5995, Accuracy: 1253/8991 (13.9362%)
___Train Local_Simple,  epoch  99, local model 61, internal_epoch   1,  Average loss: 0.0077, Accuracy: 683/767 (89.0482%)
___Test Local_Simple poisoned: False, epoch: 99: Average loss: 4.1089, Accuracy: 2752/10000 (27.5200%), Attack Success Rate:4/10000(0.040)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  99, local model 21, internal_epoch   1,  Average loss: 0.0037, Accuracy: 1969/2072 (95.0290%), train_poison_data_count: 2072
Global model norm: 14.103154666868587.
Norm before scaling: 13.99030458698178. Distance: 1.23744182835268
Total norm for 6 adversaries is: 13.99030458698178. distance: 1.23744182835268
___Test Local_Simple poisoned: True, epoch: 99: Average loss: 3.8395, Accuracy: 2799/8991 (31.1311%)
time spent on training: 50.34898567199707
[foolsgold agg] training data poison_ratio: 0.841995841995842  data num: [87, 1982, 171, 96, 119, 114, 648, 678, 767, 2072]
[foolsgold agg] considering poison per batch poison_fraction: 0.841995841995842
[foolsgold agg] wv: [1. 1. 0. 1. 1. 1. 1. 0. 1. 1.]
___Test Target_Simple poisoned: False, epoch: 99: Average loss: 0.9501, Accuracy: 7479/10000 (74.7900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 99: Average loss: 0.7520, Accuracy: 7508/8991 (83.5057%)
Done in 138.64843273162842 sec.
Server Epoch:100 choose agents : [35, 57, 43, 34, 76, 26, 92, 3, 13, 16].
___Train Local_Simple,  epoch 100, local model 35, internal_epoch   1,  Average loss: 0.0028, Accuracy: 947/978 (96.8303%)
___Test Local_Simple poisoned: False, epoch: 100: Average loss: 5.6573, Accuracy: 2722/10000 (27.2200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch 100, local model 57, internal_epoch   1,  Average loss: 0.0061, Accuracy: 1295/1437 (90.1183%)
___Test Local_Simple poisoned: False, epoch: 100: Average loss: 3.6660, Accuracy: 3698/10000 (36.9800%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch 100, local model 43, internal_epoch   1,  Average loss: 0.0986, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 100: Average loss: 0.9640, Accuracy: 7402/10000 (74.0200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch 100, local model 34, internal_epoch   1,  Average loss: 0.0087, Accuracy: 1044/1203 (86.7830%)
___Test Local_Simple poisoned: False, epoch: 100: Average loss: 3.4196, Accuracy: 4438/10000 (44.3800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch 100, local model 76, internal_epoch   1,  Average loss: 0.0163, Accuracy: 76/87 (87.3563%)
___Test Local_Simple poisoned: False, epoch: 100: Average loss: 1.1880, Accuracy: 5471/10000 (54.7100%), Attack Success Rate:0/10000(0.000)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch 100, local model 26, internal_epoch   1,  Average loss: 0.0031, Accuracy: 1263/1311 (96.3387%), train_poison_data_count: 1311
Global model norm: 14.106785736254512.
Norm before scaling: 14.053380832290243. Distance: 0.9985655987489669
Total norm for 4 adversaries is: 14.053380832290243. distance: 0.9985655987489669
___Test Local_Simple poisoned: True, epoch: 100: Average loss: 12.0349, Accuracy: 1711/8991 (19.0301%)
___Train Local_Simple,  epoch 100, local model 92, internal_epoch   1,  Average loss: 0.0081, Accuracy: 186/202 (92.0792%)
___Test Local_Simple poisoned: False, epoch: 100: Average loss: 6.2231, Accuracy: 1050/10000 (10.5000%), Attack Success Rate:7/10000(0.070)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch 100, local model 3, internal_epoch   1,  Average loss: 0.0074, Accuracy: 901/1010 (89.2079%), train_poison_data_count: 1010
Global model norm: 14.106785736254512.
Norm before scaling: 14.125795055057964. Distance: 0.839385577466817
Total norm for 4 adversaries is: 14.125795055057964. distance: 0.839385577466817
___Test Local_Simple poisoned: True, epoch: 100: Average loss: 4.1023, Accuracy: 3667/8991 (40.7852%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch 100, local model 13, internal_epoch   1,  Average loss: 0.2128, Accuracy: 4/5 (80.0000%), train_poison_data_count: 5
Global model norm: 14.106785736254512.
Norm before scaling: 14.107559104145306. Distance: 0.0730671412102904
Total norm for 4 adversaries is: 14.107559104145306. distance: 0.0730671412102904
___Test Local_Simple poisoned: True, epoch: 100: Average loss: 0.7806, Accuracy: 7252/8991 (80.6584%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch 100, local model 16, internal_epoch   1,  Average loss: 0.0049, Accuracy: 933/994 (93.8632%), train_poison_data_count: 994
Global model norm: 14.106785736254512.
Norm before scaling: 14.101478639812974. Distance: 0.5823475023317133
Total norm for 4 adversaries is: 14.101478639812974. distance: 0.5823475023317133
___Test Local_Simple poisoned: True, epoch: 100: Average loss: 2.2334, Accuracy: 4806/8991 (53.4535%)
time spent on training: 52.804787397384644
[foolsgold agg] training data poison_ratio: 0.4590073275266141  data num: [978, 1437, 6, 1203, 87, 1311, 202, 1010, 5, 994]
[foolsgold agg] considering poison per batch poison_fraction: 0.4590073275266141
[foolsgold agg] wv: [0.88390831 0.56429525 1.         1.         0.         0.
 0.88390831 1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 100: Average loss: 0.9434, Accuracy: 7532/10000 (75.3200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 100: Average loss: 0.7294, Accuracy: 7558/8991 (84.0618%)
Done in 141.11750411987305 sec.
Saving all the graphs.
This run has a label: Mar.06_17.22.49. Visdom environment: mnist_DBA
