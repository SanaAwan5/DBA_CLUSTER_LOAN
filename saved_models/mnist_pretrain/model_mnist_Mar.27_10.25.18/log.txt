current path: saved_models/mnist_pretrain/model_mnist_Mar.27_10.25.18
Loading data
build_classes_dict done
train loaders done
get poison test loader
load data done
create model done
Poisoned following participants: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33]
We use following environment for graphs:  mnist_DBA
Server Epoch:1 choose agents : [23, 72, 61, 11, 71, 42, 45, 37, 21, 35].
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch   1, local model 23, internal_epoch   1,  Average loss: 0.0233, Accuracy: 326/428 (76.1682%), train_poison_data_count: 428
Global model norm: 1.828686293811075.
Norm before scaling: 2.121465660915952. Distance: 1.0773453035405653
Total norm for 3 adversaries is: 2.121465660915952. distance: 1.0773453035405653
___Test Local_Simple poisoned: True, epoch: 1: Average loss: 3.8155, Accuracy: 1947/8991 (21.6550%)
___Train Local_Simple,  epoch   1, local model 72, internal_epoch   1,  Average loss: 0.2135, Accuracy: 3/10 (30.0000%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 2.2781, Accuracy: 1382/10000 (13.8200%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch   1, local model 61, internal_epoch   1,  Average loss: 0.0199, Accuracy: 550/767 (71.7080%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 3.9649, Accuracy: 2537/10000 (25.3700%), Attack Success Rate:18/10000(0.180)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch   1, local model 11, internal_epoch   1,  Average loss: 0.0521, Accuracy: 23/84 (27.3810%), train_poison_data_count: 84
Global model norm: 1.828686293811075.
Norm before scaling: 1.8328772179770252. Distance: 0.1232697987949294
Total norm for 3 adversaries is: 1.8328772179770252. distance: 0.1232697987949294
___Test Local_Simple poisoned: True, epoch: 1: Average loss: 2.2856, Accuracy: 1576/8991 (17.5286%)
___Train Local_Simple,  epoch   1, local model 71, internal_epoch   1,  Average loss: 0.0379, Accuracy: 137/342 (40.0585%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 2.6909, Accuracy: 892/10000 (8.9200%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch   1, local model 42, internal_epoch   1,  Average loss: 0.0635, Accuracy: 23/63 (36.5079%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 2.3527, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   1, local model 45, internal_epoch   1,  Average loss: 0.0263, Accuracy: 253/388 (65.2062%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 3.9754, Accuracy: 1094/10000 (10.9400%), Attack Success Rate:13/10000(0.130)
___Train Local_Simple,  epoch   1, local model 37, internal_epoch   1,  Average loss: 0.0259, Accuracy: 337/578 (58.3045%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 3.5704, Accuracy: 2635/10000 (26.3500%), Attack Success Rate:9/10000(0.090)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch   1, local model 21, internal_epoch   1,  Average loss: 0.0107, Accuracy: 1758/2072 (84.8456%), train_poison_data_count: 2072
Global model norm: 1.828686293811075.
Norm before scaling: 2.8240671288613926. Distance: 2.2079824372781722
Total norm for 3 adversaries is: 2.8240671288613926. distance: 2.2079824372781722
___Test Local_Simple poisoned: True, epoch: 1: Average loss: 4.8825, Accuracy: 2730/8991 (30.3637%)
___Train Local_Simple,  epoch   1, local model 35, internal_epoch   1,  Average loss: 0.0147, Accuracy: 830/978 (84.8671%)
___Test Local_Simple poisoned: False, epoch: 1: Average loss: 5.4991, Accuracy: 1148/10000 (11.4800%), Attack Success Rate:8/10000(0.080)
time spent on training: 15.294390678405762
[foolsgold agg] training data poison_ratio: 0.45253940455341507  data num: [428, 10, 767, 84, 342, 63, 388, 578, 2072, 978]
[foolsgold agg] considering poison per batch poison_fraction: 0.45253940455341507
[foolsgold agg] wv: [0.         0.12864643 0.         0.43950125 1.         0.43950125
 0.12864643 1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 1: Average loss: 2.2543, Accuracy: 1714/10000 (17.1400%), Attack Success Rate:32/10000(0.320)
___Test Target_Simple poisoned: True, epoch: 1: Average loss: 2.2481, Accuracy: 1440/8991 (16.0160%)
Done in 49.764785051345825 sec.
Server Epoch:2 choose agents : [11, 59, 62, 28, 65, 22, 78, 58, 41, 81].
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch   2, local model 11, internal_epoch   1,  Average loss: 0.0518, Accuracy: 24/84 (28.5714%), train_poison_data_count: 84
Global model norm: 1.8291532445022667.
Norm before scaling: 1.8334787990196308. Distance: 0.12420229142994232
Total norm for 3 adversaries is: 1.8334787990196308. distance: 0.12420229142994232
___Test Local_Simple poisoned: True, epoch: 2: Average loss: 2.2426, Accuracy: 1680/8991 (18.6854%)
___Train Local_Simple,  epoch   2, local model 59, internal_epoch   1,  Average loss: 0.0822, Accuracy: 5/27 (18.5185%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 2.2531, Accuracy: 1445/10000 (14.4500%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch   2, local model 62, internal_epoch   1,  Average loss: 1.2634, Accuracy: 0/2 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 2.2437, Accuracy: 2069/10000 (20.6900%), Attack Success Rate:25/10000(0.250)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch   2, local model 28, internal_epoch   1,  Average loss: 0.0341, Accuracy: 128/237 (54.0084%), train_poison_data_count: 237
Global model norm: 1.8291532445022667.
Norm before scaling: 1.9063318578935946. Distance: 0.5452978553007851
Total norm for 3 adversaries is: 1.9063318578935946. distance: 0.5452978553007851
___Test Local_Simple poisoned: True, epoch: 2: Average loss: 2.9094, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch   2, local model 65, internal_epoch   1,  Average loss: 0.0148, Accuracy: 1058/1326 (79.7888%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 4.4018, Accuracy: 2138/10000 (21.3800%), Attack Success Rate:21/10000(0.210)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch   2, local model 22, internal_epoch   1,  Average loss: 0.0654, Accuracy: 6/34 (17.6471%), train_poison_data_count: 34
Global model norm: 1.8291532445022667.
Norm before scaling: 1.8299876448208998. Distance: 0.04571509011055633
Total norm for 3 adversaries is: 1.8299876448208998. distance: 0.04571509011055633
___Test Local_Simple poisoned: True, epoch: 2: Average loss: 2.2379, Accuracy: 1487/8991 (16.5388%)
___Train Local_Simple,  epoch   2, local model 78, internal_epoch   1,  Average loss: 0.0150, Accuracy: 1848/2324 (79.5181%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 3.2402, Accuracy: 3661/10000 (36.6100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch   2, local model 58, internal_epoch   1,  Average loss: 0.0211, Accuracy: 696/1015 (68.5714%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 4.0051, Accuracy: 2676/10000 (26.7600%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch   2, local model 41, internal_epoch   1,  Average loss: 0.0238, Accuracy: 334/509 (65.6189%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 4.5530, Accuracy: 1510/10000 (15.1000%), Attack Success Rate:18/10000(0.180)
___Train Local_Simple,  epoch   2, local model 81, internal_epoch   1,  Average loss: 0.0615, Accuracy: 26/68 (38.2353%)
___Test Local_Simple poisoned: False, epoch: 2: Average loss: 2.2580, Accuracy: 1043/10000 (10.4300%), Attack Success Rate:11/10000(0.110)
time spent on training: 15.76903247833252
[foolsgold agg] training data poison_ratio: 0.06309989335229292  data num: [84, 27, 2, 237, 1326, 34, 2324, 1015, 509, 68]
[foolsgold agg] considering poison per batch poison_fraction: 0.06309989335229292
[foolsgold agg] wv: [0.         0.         1.         0.3681545  1.         0.
 1.         0.27663232 0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 2: Average loss: 2.2233, Accuracy: 2158/10000 (21.5800%), Attack Success Rate:21/10000(0.210)
___Test Target_Simple poisoned: True, epoch: 2: Average loss: 2.2118, Accuracy: 1921/8991 (21.3658%)
Done in 50.37770104408264 sec.
Server Epoch:3 choose agents : [54, 55, 61, 73, 18, 42, 87, 41, 50, 28].
___Train Local_Simple,  epoch   3, local model 54, internal_epoch   1,  Average loss: 0.0455, Accuracy: 44/91 (48.3516%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.2212, Accuracy: 1976/10000 (19.7600%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch   3, local model 55, internal_epoch   1,  Average loss: 0.0151, Accuracy: 2206/2803 (78.7014%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 3.6713, Accuracy: 4532/10000 (45.3200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch   3, local model 61, internal_epoch   1,  Average loss: 0.0210, Accuracy: 537/767 (70.0130%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 3.8319, Accuracy: 2592/10000 (25.9200%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch   3, local model 73, internal_epoch   1,  Average loss: 0.0135, Accuracy: 1014/1205 (84.1494%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 5.2500, Accuracy: 1743/10000 (17.4300%), Attack Success Rate:27/10000(0.270)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch   3, local model 18, internal_epoch   1,  Average loss: 0.0351, Accuracy: 171/264 (64.7727%), train_poison_data_count: 264
Global model norm: 1.8299977418228974.
Norm before scaling: 1.9261960710604467. Distance: 0.5596404506006664
Total norm for 2 adversaries is: 1.9261960710604467. distance: 0.5596404506006664
___Test Local_Simple poisoned: True, epoch: 3: Average loss: 3.0490, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch   3, local model 42, internal_epoch   1,  Average loss: 0.0650, Accuracy: 22/63 (34.9206%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.2762, Accuracy: 1010/10000 (10.1000%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch   3, local model 87, internal_epoch   1,  Average loss: 0.0686, Accuracy: 3/33 (9.0909%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.2098, Accuracy: 2798/10000 (27.9800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch   3, local model 41, internal_epoch   1,  Average loss: 0.0217, Accuracy: 349/509 (68.5658%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 4.4938, Accuracy: 1460/10000 (14.6000%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch   3, local model 50, internal_epoch   1,  Average loss: 0.0359, Accuracy: 94/151 (62.2517%)
___Test Local_Simple poisoned: False, epoch: 3: Average loss: 2.9358, Accuracy: 980/10000 (9.8000%), Attack Success Rate:5/10000(0.050)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch   3, local model 28, internal_epoch   1,  Average loss: 0.0330, Accuracy: 140/237 (59.0717%), train_poison_data_count: 237
Global model norm: 1.8299977418228974.
Norm before scaling: 1.906304843301268. Distance: 0.5251820373559761
Total norm for 2 adversaries is: 1.906304843301268. distance: 0.5251820373559761
___Test Local_Simple poisoned: True, epoch: 3: Average loss: 2.8745, Accuracy: 1032/8991 (11.4781%)
time spent on training: 15.24364423751831
[foolsgold agg] training data poison_ratio: 0.08182263596276335  data num: [91, 2803, 767, 1205, 264, 63, 33, 509, 151, 237]
[foolsgold agg] considering poison per batch poison_fraction: 0.08182263596276335
[foolsgold agg] wv: [0.         0.         0.         0.         1.         1.
 1.         1.         0.49765657 1.        ]
___Test Target_Simple poisoned: False, epoch: 3: Average loss: 2.2073, Accuracy: 2248/10000 (22.4800%), Attack Success Rate:25/10000(0.250)
___Test Target_Simple poisoned: True, epoch: 3: Average loss: 2.1896, Accuracy: 2034/8991 (22.6226%)
Done in 49.65074825286865 sec.
Server Epoch:4 choose agents : [37, 92, 95, 76, 13, 99, 94, 74, 45, 44].
___Train Local_Simple,  epoch   4, local model 37, internal_epoch   1,  Average loss: 0.0246, Accuracy: 343/578 (59.3426%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 3.4429, Accuracy: 2699/10000 (26.9900%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch   4, local model 92, internal_epoch   1,  Average loss: 0.0300, Accuracy: 152/202 (75.2475%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 3.3094, Accuracy: 958/10000 (9.5800%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch   4, local model 95, internal_epoch   1,  Average loss: 0.0751, Accuracy: 9/29 (31.0345%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 2.1940, Accuracy: 2036/10000 (20.3600%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch   4, local model 76, internal_epoch   1,  Average loss: 0.0480, Accuracy: 34/87 (39.0805%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 2.2083, Accuracy: 1337/10000 (13.3700%), Attack Success Rate:13/10000(0.130)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch   4, local model 13, internal_epoch   1,  Average loss: 0.4570, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 1.8310377603384251.
Norm before scaling: 1.8315677015708762. Distance: 0.047415679773633305
Total norm for 1 adversaries is: 1.8315677015708762. distance: 0.047415679773633305
___Test Local_Simple poisoned: True, epoch: 4: Average loss: 2.1828, Accuracy: 1823/8991 (20.2758%)
___Train Local_Simple,  epoch   4, local model 99, internal_epoch   1,  Average loss: 0.0160, Accuracy: 341/411 (82.9684%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 5.4031, Accuracy: 980/10000 (9.8000%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch   4, local model 94, internal_epoch   1,  Average loss: 0.0183, Accuracy: 530/607 (87.3147%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 5.2254, Accuracy: 1135/10000 (11.3500%), Attack Success Rate:11/10000(0.110)
___Train Local_Simple,  epoch   4, local model 74, internal_epoch   1,  Average loss: 0.0233, Accuracy: 471/762 (61.8110%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 3.6892, Accuracy: 2460/10000 (24.6000%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch   4, local model 45, internal_epoch   1,  Average loss: 0.0256, Accuracy: 251/388 (64.6907%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 3.8992, Accuracy: 1159/10000 (11.5900%), Attack Success Rate:13/10000(0.130)
___Train Local_Simple,  epoch   4, local model 44, internal_epoch   1,  Average loss: 0.0462, Accuracy: 10/47 (21.2766%)
___Test Local_Simple poisoned: False, epoch: 4: Average loss: 2.2036, Accuracy: 1881/10000 (18.8100%), Attack Success Rate:35/10000(0.350)
time spent on training: 13.492936849594116
[foolsgold agg] training data poison_ratio: 0.0016046213093709885  data num: [578, 202, 29, 87, 5, 411, 607, 762, 388, 47]
[foolsgold agg] considering poison per batch poison_fraction: 0.0016046213093709885
[foolsgold agg] wv: [0.44015889 0.44015889 0.         0.         1.         0.
 1.         1.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 4: Average loss: 2.1852, Accuracy: 2753/10000 (27.5300%), Attack Success Rate:7/10000(0.070)
___Test Target_Simple poisoned: True, epoch: 4: Average loss: 2.1677, Accuracy: 2591/8991 (28.8177%)
Done in 48.24022579193115 sec.
Server Epoch:5 choose agents : [60, 49, 65, 14, 36, 24, 7, 4, 76, 39].
___Train Local_Simple,  epoch   5, local model 60, internal_epoch   1,  Average loss: 0.0231, Accuracy: 341/399 (85.4637%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 3.6976, Accuracy: 1862/10000 (18.6200%), Attack Success Rate:37/10000(0.370)
___Train Local_Simple,  epoch   5, local model 49, internal_epoch   1,  Average loss: 0.0351, Accuracy: 132/196 (67.3469%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 2.5658, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch   5, local model 65, internal_epoch   1,  Average loss: 0.0138, Accuracy: 1086/1326 (81.9005%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 4.2287, Accuracy: 2146/10000 (21.4600%), Attack Success Rate:23/10000(0.230)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 14, internal_epoch   1,  Average loss: 0.0443, Accuracy: 20/48 (41.6667%), train_poison_data_count: 48
Global model norm: 1.8323524697780138.
Norm before scaling: 1.8337859187544612. Distance: 0.04822342272149739
Total norm for 4 adversaries is: 1.8337859187544612. distance: 0.04822342272149739
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 2.1589, Accuracy: 2788/8991 (31.0088%)
___Train Local_Simple,  epoch   5, local model 36, internal_epoch   1,  Average loss: 0.0201, Accuracy: 249/304 (81.9079%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 4.9422, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 24, internal_epoch   1,  Average loss: 0.4632, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 1.8323524697780138.
Norm before scaling: 1.8328219986691403. Distance: 0.05025623887656973
Total norm for 4 adversaries is: 1.8328219986691403. distance: 0.05025623887656973
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 2.1519, Accuracy: 3215/8991 (35.7580%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 7, internal_epoch   1,  Average loss: 0.0442, Accuracy: 47/86 (54.6512%), train_poison_data_count: 86
Global model norm: 1.8323524697780138.
Norm before scaling: 1.8413697735584924. Distance: 0.1414428018253888
Total norm for 4 adversaries is: 1.8413697735584924. distance: 0.1414428018253888
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 2.1853, Accuracy: 1083/8991 (12.0454%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch   5, local model 4, internal_epoch   1,  Average loss: 0.0161, Accuracy: 430/463 (92.8726%), train_poison_data_count: 463
Global model norm: 1.8323524697780138.
Norm before scaling: 2.1959449155809043. Distance: 1.167294770281536
Total norm for 4 adversaries is: 2.1959449155809043. distance: 1.167294770281536
___Test Local_Simple poisoned: True, epoch: 5: Average loss: 6.3563, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch   5, local model 76, internal_epoch   1,  Average loss: 0.0484, Accuracy: 29/87 (33.3333%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 2.1798, Accuracy: 1496/10000 (14.9600%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch   5, local model 39, internal_epoch   1,  Average loss: 0.0119, Accuracy: 1107/1259 (87.9269%)
___Test Local_Simple poisoned: False, epoch: 5: Average loss: 4.6766, Accuracy: 1867/10000 (18.6700%), Attack Success Rate:35/10000(0.350)
time spent on training: 16.77867031097412
[foolsgold agg] training data poison_ratio: 0.14426072369997603  data num: [399, 196, 1326, 48, 304, 5, 86, 463, 87, 1259]
[foolsgold agg] considering poison per batch poison_fraction: 0.14426072369997603
[foolsgold agg] wv: [0.         0.         0.56033119 1.         0.         0.
 1.         0.         0.72559284 0.89945465]
___Test Target_Simple poisoned: False, epoch: 5: Average loss: 2.1696, Accuracy: 3023/10000 (30.2300%), Attack Success Rate:3/10000(0.030)
___Test Target_Simple poisoned: True, epoch: 5: Average loss: 2.1472, Accuracy: 2907/8991 (32.3323%)
Done in 51.50812530517578 sec.
Server Epoch:6 choose agents : [26, 29, 4, 41, 99, 67, 91, 76, 8, 25].
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 26, internal_epoch   1,  Average loss: 0.0100, Accuracy: 1104/1311 (84.2105%), train_poison_data_count: 1311
Global model norm: 1.8334481102243205.
Norm before scaling: 2.721604263032538. Distance: 1.9970920403005066
Total norm for 5 adversaries is: 2.721604263032538. distance: 1.9970920403005066
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 6.6332, Accuracy: 1909/8991 (21.2323%)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 29, internal_epoch   1,  Average loss: 0.0171, Accuracy: 1045/1232 (84.8214%), train_poison_data_count: 1232
Global model norm: 1.8334481102243205.
Norm before scaling: 2.2894018136551906. Distance: 1.3695585344972911
Total norm for 5 adversaries is: 2.2894018136551906. distance: 1.3695585344972911
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 4.6915, Accuracy: 982/8991 (10.9220%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 4, internal_epoch   1,  Average loss: 0.0160, Accuracy: 429/463 (92.6566%), train_poison_data_count: 463
Global model norm: 1.8334481102243205.
Norm before scaling: 2.2000014435156507. Distance: 1.1761619990607874
Total norm for 5 adversaries is: 2.2000014435156507. distance: 1.1761619990607874
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 6.3218, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch   6, local model 41, internal_epoch   1,  Average loss: 0.0218, Accuracy: 348/509 (68.3694%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 4.5204, Accuracy: 1466/10000 (14.6600%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch   6, local model 99, internal_epoch   1,  Average loss: 0.0145, Accuracy: 344/411 (83.6983%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 5.3400, Accuracy: 980/10000 (9.8000%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   6, local model 67, internal_epoch   1,  Average loss: 0.0294, Accuracy: 309/568 (54.4014%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 3.3575, Accuracy: 2022/10000 (20.2200%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch   6, local model 91, internal_epoch   1,  Average loss: 0.0358, Accuracy: 156/182 (85.7143%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 2.3857, Accuracy: 1625/10000 (16.2500%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch   6, local model 76, internal_epoch   1,  Average loss: 0.0475, Accuracy: 36/87 (41.3793%)
___Test Local_Simple poisoned: False, epoch: 6: Average loss: 2.1665, Accuracy: 1502/10000 (15.0200%), Attack Success Rate:21/10000(0.210)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 8, internal_epoch   1,  Average loss: 0.0328, Accuracy: 136/171 (79.5322%), train_poison_data_count: 171
Global model norm: 1.8334481102243205.
Norm before scaling: 1.8930961285792187. Distance: 0.42096014079466376
Total norm for 5 adversaries is: 1.8930961285792187. distance: 0.42096014079466376
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 2.6449, Accuracy: 1010/8991 (11.2335%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch   6, local model 25, internal_epoch   1,  Average loss: 0.0471, Accuracy: 55/128 (42.9688%), train_poison_data_count: 128
Global model norm: 1.8334481102243205.
Norm before scaling: 1.8448937957713938. Distance: 0.15939000634061298
Total norm for 5 adversaries is: 1.8448937957713938. distance: 0.15939000634061298
___Test Local_Simple poisoned: True, epoch: 6: Average loss: 2.1218, Accuracy: 2190/8991 (24.3577%)
time spent on training: 17.243022680282593
[foolsgold agg] training data poison_ratio: 0.652903990517582  data num: [1311, 1232, 463, 509, 411, 568, 182, 87, 171, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.652903990517582
[foolsgold agg] wv: [0. 1. 1. 0. 1. 1. 1. 0. 0. 0.]
___Test Target_Simple poisoned: False, epoch: 6: Average loss: 2.1463, Accuracy: 3192/10000 (31.9200%), Attack Success Rate:4/10000(0.040)
___Test Target_Simple poisoned: True, epoch: 6: Average loss: 2.1245, Accuracy: 3082/8991 (34.2787%)
Done in 51.819111824035645 sec.
Server Epoch:7 choose agents : [66, 68, 59, 62, 31, 10, 23, 7, 99, 45].
___Train Local_Simple,  epoch   7, local model 66, internal_epoch   1,  Average loss: 0.0191, Accuracy: 503/681 (73.8620%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 4.9279, Accuracy: 1115/10000 (11.1500%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   7, local model 68, internal_epoch   1,  Average loss: 0.0121, Accuracy: 1372/1591 (86.2351%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 4.2299, Accuracy: 1956/10000 (19.5600%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch   7, local model 59, internal_epoch   1,  Average loss: 0.0843, Accuracy: 1/27 (3.7037%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 2.1395, Accuracy: 3592/10000 (35.9200%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch   7, local model 62, internal_epoch   1,  Average loss: 1.2179, Accuracy: 0/2 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 2.1356, Accuracy: 3780/10000 (37.8000%), Attack Success Rate:0/10000(0.000)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 31, internal_epoch   1,  Average loss: 0.0143, Accuracy: 1437/1839 (78.1403%), train_poison_data_count: 1839
Global model norm: 1.8351884977934751.
Norm before scaling: 2.818787984317197. Distance: 2.1439181425922564
Total norm for 4 adversaries is: 2.818787984317197. distance: 2.1439181425922564
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 4.3032, Accuracy: 2747/8991 (30.5528%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 10, internal_epoch   1,  Average loss: 0.0214, Accuracy: 507/688 (73.6919%), train_poison_data_count: 688
Global model norm: 1.8351884977934751.
Norm before scaling: 2.312862883267591. Distance: 1.3949659508819106
Total norm for 4 adversaries is: 2.312862883267591. distance: 1.3949659508819106
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 4.5534, Accuracy: 1840/8991 (20.4649%)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 23, internal_epoch   1,  Average loss: 0.0210, Accuracy: 376/428 (87.8505%), train_poison_data_count: 428
Global model norm: 1.8351884977934751.
Norm before scaling: 2.1172113733951528. Distance: 1.007169059752679
Total norm for 4 adversaries is: 2.1172113733951528. distance: 1.007169059752679
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 3.5834, Accuracy: 1947/8991 (21.6550%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch   7, local model 7, internal_epoch   1,  Average loss: 0.0430, Accuracy: 60/86 (69.7674%), train_poison_data_count: 86
Global model norm: 1.8351884977934751.
Norm before scaling: 1.8447672090752592. Distance: 0.140230831749657
Total norm for 4 adversaries is: 1.8447672090752592. distance: 0.140230831749657
___Test Local_Simple poisoned: True, epoch: 7: Average loss: 2.1446, Accuracy: 1277/8991 (14.2031%)
___Train Local_Simple,  epoch   7, local model 99, internal_epoch   1,  Average loss: 0.0141, Accuracy: 351/411 (85.4015%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 5.1043, Accuracy: 980/10000 (9.8000%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch   7, local model 45, internal_epoch   1,  Average loss: 0.0244, Accuracy: 259/388 (66.7526%)
___Test Local_Simple poisoned: False, epoch: 7: Average loss: 3.7474, Accuracy: 1200/10000 (12.0000%), Attack Success Rate:15/10000(0.150)
time spent on training: 16.801424264907837
[foolsgold agg] training data poison_ratio: 0.49519622211366227  data num: [681, 1591, 27, 2, 1839, 688, 428, 86, 411, 388]
[foolsgold agg] considering poison per batch poison_fraction: 0.49519622211366227
[foolsgold agg] wv: [0.52894087 1.         0.776182   0.52894087 1.         0.776182
 0.75679256 0.23719779 0.75679256 0.23719779]
___Test Target_Simple poisoned: False, epoch: 7: Average loss: 2.1090, Accuracy: 3914/10000 (39.1400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 7: Average loss: 2.0739, Accuracy: 3767/8991 (41.8975%)
Done in 51.38810324668884 sec.
Server Epoch:8 choose agents : [63, 55, 79, 9, 62, 56, 96, 12, 92, 86].
___Train Local_Simple,  epoch   8, local model 63, internal_epoch   1,  Average loss: 0.0075, Accuracy: 2822/3022 (93.3819%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 5.0547, Accuracy: 1707/10000 (17.0700%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch   8, local model 55, internal_epoch   1,  Average loss: 0.0144, Accuracy: 2282/2803 (81.4128%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 3.5238, Accuracy: 4558/10000 (45.5800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch   8, local model 79, internal_epoch   1,  Average loss: 0.0845, Accuracy: 10/25 (40.0000%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 2.1042, Accuracy: 2939/10000 (29.3900%), Attack Success Rate:6/10000(0.060)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch   8, local model 9, internal_epoch   1,  Average loss: 0.0349, Accuracy: 160/263 (60.8365%), train_poison_data_count: 263
Global model norm: 1.8382412356112332.
Norm before scaling: 1.9431812914047055. Distance: 0.5970097704220471
Total norm for 2 adversaries is: 1.9431812914047055. distance: 0.5970097704220471
___Test Local_Simple poisoned: True, epoch: 8: Average loss: 2.8881, Accuracy: 1410/8991 (15.6823%)
___Train Local_Simple,  epoch   8, local model 62, internal_epoch   1,  Average loss: 1.1718, Accuracy: 0/2 (0.0000%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 2.0999, Accuracy: 4468/10000 (44.6800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch   8, local model 56, internal_epoch   1,  Average loss: 0.0119, Accuracy: 627/704 (89.0625%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 7.5031, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch   8, local model 96, internal_epoch   1,  Average loss: 0.0259, Accuracy: 339/505 (67.1287%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 3.2277, Accuracy: 2496/10000 (24.9600%), Attack Success Rate:13/10000(0.130)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch   8, local model 12, internal_epoch   1,  Average loss: 0.0228, Accuracy: 459/648 (70.8333%), train_poison_data_count: 648
Global model norm: 1.8382412356112332.
Norm before scaling: 2.2459622286561385. Distance: 1.240857690085766
Total norm for 2 adversaries is: 2.2459622286561385. distance: 1.240857690085766
___Test Local_Simple poisoned: True, epoch: 8: Average loss: 3.5108, Accuracy: 2698/8991 (30.0078%)
___Train Local_Simple,  epoch   8, local model 92, internal_epoch   1,  Average loss: 0.0282, Accuracy: 164/202 (81.1881%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 3.1590, Accuracy: 958/10000 (9.5800%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch   8, local model 86, internal_epoch   1,  Average loss: 0.0642, Accuracy: 10/34 (29.4118%)
___Test Local_Simple poisoned: False, epoch: 8: Average loss: 2.0996, Accuracy: 4274/10000 (42.7400%), Attack Success Rate:0/10000(0.000)
time spent on training: 16.939751386642456
[foolsgold agg] training data poison_ratio: 0.11098927875243665  data num: [3022, 2803, 25, 263, 2, 704, 505, 648, 202, 34]
[foolsgold agg] considering poison per batch poison_fraction: 0.11098927875243665
[foolsgold agg] wv: [1.         1.         1.         1.         1.         0.25516941
 1.         1.         1.         0.25516941]
___Test Target_Simple poisoned: False, epoch: 8: Average loss: 2.0659, Accuracy: 4559/10000 (45.5900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 8: Average loss: 2.0347, Accuracy: 4405/8991 (48.9934%)
Done in 51.774922132492065 sec.
Server Epoch:9 choose agents : [28, 63, 33, 71, 13, 32, 76, 97, 23, 25].
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 28, internal_epoch   1,  Average loss: 0.0331, Accuracy: 140/237 (59.0717%), train_poison_data_count: 237
Global model norm: 1.8430941433553394.
Norm before scaling: 1.9228880158587507. Distance: 0.5429634807523099
Total norm for 6 adversaries is: 1.9228880158587507. distance: 0.5429634807523099
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 2.6496, Accuracy: 1032/8991 (11.4781%)
___Train Local_Simple,  epoch   9, local model 63, internal_epoch   1,  Average loss: 0.0075, Accuracy: 2822/3022 (93.3819%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 4.9587, Accuracy: 1802/10000 (18.0200%), Attack Success Rate:37/10000(0.370)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 33, internal_epoch   1,  Average loss: 0.0243, Accuracy: 465/644 (72.2050%), train_poison_data_count: 644
Global model norm: 1.8430941433553394.
Norm before scaling: 2.214975827431798. Distance: 1.1724507761141119
Total norm for 6 adversaries is: 2.214975827431798. distance: 1.1724507761141119
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 3.9270, Accuracy: 1827/8991 (20.3203%)
___Train Local_Simple,  epoch   9, local model 71, internal_epoch   1,  Average loss: 0.0352, Accuracy: 173/342 (50.5848%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 2.5150, Accuracy: 930/10000 (9.3000%), Attack Success Rate:3/10000(0.030)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 13, internal_epoch   1,  Average loss: 0.4673, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 1.8430941433553394.
Norm before scaling: 1.843300069447894. Distance: 0.04875387506871388
Total norm for 6 adversaries is: 1.843300069447894. distance: 0.04875387506871388
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 2.0231, Accuracy: 4653/8991 (51.7518%)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 32, internal_epoch   1,  Average loss: 0.0753, Accuracy: 15/28 (53.5714%), train_poison_data_count: 28
Global model norm: 1.8430941433553394.
Norm before scaling: 1.844963837969603. Distance: 0.06122584880696674
Total norm for 6 adversaries is: 1.844963837969603. distance: 0.06122584880696674
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 2.0336, Accuracy: 3526/8991 (39.2170%)
___Train Local_Simple,  epoch   9, local model 76, internal_epoch   1,  Average loss: 0.0487, Accuracy: 23/87 (26.4368%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 2.0495, Accuracy: 3201/10000 (32.0100%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch   9, local model 97, internal_epoch   1,  Average loss: 0.3875, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 9: Average loss: 2.0680, Accuracy: 3611/10000 (36.1100%), Attack Success Rate:1/10000(0.010)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 23, internal_epoch   1,  Average loss: 0.0191, Accuracy: 404/428 (94.3925%), train_poison_data_count: 428
Global model norm: 1.8430941433553394.
Norm before scaling: 2.1166150209428976. Distance: 0.9448706484877479
Total norm for 6 adversaries is: 2.1166150209428976. distance: 0.9448706484877479
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 3.4174, Accuracy: 1951/8991 (21.6995%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch   9, local model 25, internal_epoch   1,  Average loss: 0.0472, Accuracy: 64/128 (50.0000%), train_poison_data_count: 128
Global model norm: 1.8430941433553394.
Norm before scaling: 1.854790236239621. Distance: 0.16498625773943326
Total norm for 6 adversaries is: 1.854790236239621. distance: 0.16498625773943326
___Test Local_Simple poisoned: True, epoch: 9: Average loss: 1.9958, Accuracy: 2799/8991 (31.1311%)
time spent on training: 19.115001678466797
[foolsgold agg] training data poison_ratio: 0.2984165651644336  data num: [237, 3022, 644, 342, 5, 28, 87, 5, 428, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.2984165651644336
[foolsgold agg] wv: [0.         1.         0.25923207 0.25923207 1.         0.
 0.         0.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 9: Average loss: 2.0535, Accuracy: 4312/10000 (43.1200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 9: Average loss: 2.0276, Accuracy: 4149/8991 (46.1461%)
Done in 53.92003583908081 sec.
Server Epoch:10 choose agents : [12, 56, 19, 11, 13, 78, 49, 34, 14, 99].
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 12, internal_epoch   1,  Average loss: 0.0210, Accuracy: 507/648 (78.2407%), train_poison_data_count: 648
Global model norm: 1.844875703258524.
Norm before scaling: 2.2353050590400887. Distance: 1.175740035339087
Total norm for 5 adversaries is: 2.2353050590400887. distance: 1.175740035339087
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 3.4507, Accuracy: 2645/8991 (29.4183%)
___Train Local_Simple,  epoch  10, local model 56, internal_epoch   1,  Average loss: 0.0127, Accuracy: 613/704 (87.0739%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 7.6051, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:6/10000(0.060)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 19, internal_epoch   1,  Average loss: 0.0332, Accuracy: 135/244 (55.3279%), train_poison_data_count: 244
Global model norm: 1.844875703258524.
Norm before scaling: 1.9234641723270938. Distance: 0.5361136622387411
Total norm for 5 adversaries is: 1.9234641723270938. distance: 0.5361136622387411
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.5278, Accuracy: 1032/8991 (11.4781%)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 11, internal_epoch   1,  Average loss: 0.0502, Accuracy: 32/84 (38.0952%), train_poison_data_count: 84
Global model norm: 1.844875703258524.
Norm before scaling: 1.849974518677779. Distance: 0.12373905919820324
Total norm for 5 adversaries is: 1.849974518677779. distance: 0.12373905919820324
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.0148, Accuracy: 3108/8991 (34.5679%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 13, internal_epoch   1,  Average loss: 0.4665, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 1.844875703258524.
Norm before scaling: 1.8450965490122737. Distance: 0.04882123660136139
Total norm for 5 adversaries is: 1.8450965490122737. distance: 0.04882123660136139
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.0154, Accuracy: 4459/8991 (49.5940%)
___Train Local_Simple,  epoch  10, local model 78, internal_epoch   1,  Average loss: 0.0139, Accuracy: 1909/2324 (82.1429%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 3.0862, Accuracy: 3646/10000 (36.4600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  10, local model 49, internal_epoch   1,  Average loss: 0.0325, Accuracy: 136/196 (69.3878%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 2.4187, Accuracy: 1028/10000 (10.2800%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  10, local model 34, internal_epoch   1,  Average loss: 0.0214, Accuracy: 924/1203 (76.8080%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 3.0140, Accuracy: 3304/10000 (33.0400%), Attack Success Rate:0/10000(0.000)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  10, local model 14, internal_epoch   1,  Average loss: 0.0441, Accuracy: 14/48 (29.1667%), train_poison_data_count: 48
Global model norm: 1.844875703258524.
Norm before scaling: 1.846337394118069. Distance: 0.04822120412862699
Total norm for 5 adversaries is: 1.846337394118069. distance: 0.04822120412862699
___Test Local_Simple poisoned: True, epoch: 10: Average loss: 2.0158, Accuracy: 4657/8991 (51.7962%)
___Train Local_Simple,  epoch  10, local model 99, internal_epoch   1,  Average loss: 0.0122, Accuracy: 393/411 (95.6204%)
___Test Local_Simple poisoned: False, epoch: 10: Average loss: 4.6357, Accuracy: 980/10000 (9.8000%), Attack Success Rate:6/10000(0.060)
time spent on training: 19.03904700279236
[foolsgold agg] training data poison_ratio: 0.1753877620589739  data num: [648, 704, 244, 84, 5, 2324, 196, 1203, 48, 411]
[foolsgold agg] considering poison per batch poison_fraction: 0.1753877620589739
[foolsgold agg] wv: [1. 0. 0. 1. 1. 1. 1. 1. 1. 1.]
___Test Target_Simple poisoned: False, epoch: 10: Average loss: 2.0179, Accuracy: 4297/10000 (42.9700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 10: Average loss: 1.9824, Accuracy: 4230/8991 (47.0470%)
Done in 53.494741916656494 sec.
Server Epoch:11 choose agents : [53, 56, 51, 14, 36, 6, 46, 99, 88, 37].
___Train Local_Simple,  epoch  11, local model 53, internal_epoch   1,  Average loss: 0.0237, Accuracy: 406/456 (89.0351%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 3.3859, Accuracy: 2091/10000 (20.9100%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  11, local model 56, internal_epoch   1,  Average loss: 0.0120, Accuracy: 617/704 (87.6420%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 7.4325, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:11/10000(0.110)
___Train Local_Simple,  epoch  11, local model 51, internal_epoch   1,  Average loss: 0.0251, Accuracy: 205/259 (79.1506%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 2.8259, Accuracy: 981/10000 (9.8100%), Attack Success Rate:5/10000(0.050)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  11, local model 14, internal_epoch   1,  Average loss: 0.0423, Accuracy: 29/48 (60.4167%), train_poison_data_count: 48
Global model norm: 1.8518793663877213.
Norm before scaling: 1.8537778839668784. Distance: 0.047581188603596704
Total norm for 2 adversaries is: 1.8537778839668784. distance: 0.047581188603596704
___Test Local_Simple poisoned: True, epoch: 11: Average loss: 1.9715, Accuracy: 4305/8991 (47.8812%)
___Train Local_Simple,  epoch  11, local model 36, internal_epoch   1,  Average loss: 0.0189, Accuracy: 264/304 (86.8421%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 4.7155, Accuracy: 974/10000 (9.7400%), Attack Success Rate:6/10000(0.060)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  11, local model 6, internal_epoch   1,  Average loss: 0.0115, Accuracy: 1697/1982 (85.6206%), train_poison_data_count: 1982
Global model norm: 1.8518793663877213.
Norm before scaling: 2.7846930119945044. Distance: 1.972301609907038
Total norm for 2 adversaries is: 2.7846930119945044. distance: 1.972301609907038
___Test Local_Simple poisoned: True, epoch: 11: Average loss: 5.0642, Accuracy: 2477/8991 (27.5498%)
___Train Local_Simple,  epoch  11, local model 46, internal_epoch   1,  Average loss: 0.0374, Accuracy: 161/310 (51.9355%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 2.5647, Accuracy: 1609/10000 (16.0900%), Attack Success Rate:32/10000(0.320)
___Train Local_Simple,  epoch  11, local model 99, internal_epoch   1,  Average loss: 0.0106, Accuracy: 396/411 (96.3504%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 4.4519, Accuracy: 980/10000 (9.8000%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  11, local model 88, internal_epoch   1,  Average loss: 0.0387, Accuracy: 62/96 (64.5833%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 2.0608, Accuracy: 1457/10000 (14.5700%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  11, local model 37, internal_epoch   1,  Average loss: 0.0209, Accuracy: 427/578 (73.8754%)
___Test Local_Simple poisoned: False, epoch: 11: Average loss: 3.1863, Accuracy: 2699/10000 (26.9900%), Attack Success Rate:8/10000(0.080)
time spent on training: 15.471861600875854
[foolsgold agg] training data poison_ratio: 0.39432789432789433  data num: [456, 704, 259, 48, 304, 1982, 310, 411, 96, 578]
[foolsgold agg] considering poison per batch poison_fraction: 0.39432789432789433
[foolsgold agg] wv: [0. 1. 0. 0. 0. 1. 1. 0. 0. 1.]
___Test Target_Simple poisoned: False, epoch: 11: Average loss: 1.9961, Accuracy: 4346/10000 (43.4600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 11: Average loss: 1.9635, Accuracy: 4268/8991 (47.4697%)
Done in 49.96212077140808 sec.
Server Epoch:12 choose agents : [42, 17, 2, 64, 6, 38, 37, 44, 77, 4].
___Train Local_Simple,  epoch  12, local model 42, internal_epoch   1,  Average loss: 0.0544, Accuracy: 49/63 (77.7778%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 2.0624, Accuracy: 1846/10000 (18.4600%), Attack Success Rate:33/10000(0.330)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 17, internal_epoch   1,  Average loss: 0.0368, Accuracy: 76/94 (80.8511%), train_poison_data_count: 94
Global model norm: 1.8555150718930027.
Norm before scaling: 1.8667600772964221. Distance: 0.14058707308595447
Total norm for 4 adversaries is: 1.8667600772964221. distance: 0.14058707308595447
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 1.9997, Accuracy: 2251/8991 (25.0361%)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 2, internal_epoch   1,  Average loss: 0.0475, Accuracy: 50/119 (42.0168%), train_poison_data_count: 119
Global model norm: 1.8555150718930027.
Norm before scaling: 1.8736859485349147. Distance: 0.22767264411193694
Total norm for 4 adversaries is: 1.8736859485349147. distance: 0.22767264411193694
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 1.9773, Accuracy: 2073/8991 (23.0564%)
___Train Local_Simple,  epoch  12, local model 64, internal_epoch   1,  Average loss: 0.0311, Accuracy: 152/216 (70.3704%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 3.0134, Accuracy: 974/10000 (9.7400%), Attack Success Rate:7/10000(0.070)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 6, internal_epoch   1,  Average loss: 0.0111, Accuracy: 1703/1982 (85.9233%), train_poison_data_count: 1982
Global model norm: 1.8555150718930027.
Norm before scaling: 2.7930055415791335. Distance: 1.9632880117024427
Total norm for 4 adversaries is: 2.7930055415791335. distance: 1.9632880117024427
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 5.1655, Accuracy: 2376/8991 (26.4264%)
___Train Local_Simple,  epoch  12, local model 38, internal_epoch   1,  Average loss: 0.0351, Accuracy: 156/179 (87.1508%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 2.1497, Accuracy: 2002/10000 (20.0200%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  12, local model 37, internal_epoch   1,  Average loss: 0.0210, Accuracy: 430/578 (74.3945%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 3.1556, Accuracy: 2713/10000 (27.1300%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  12, local model 44, internal_epoch   1,  Average loss: 0.0483, Accuracy: 2/47 (4.2553%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 1.9840, Accuracy: 4833/10000 (48.3300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  12, local model 77, internal_epoch   1,  Average loss: 0.0148, Accuracy: 1196/1544 (77.4611%)
___Test Local_Simple poisoned: False, epoch: 12: Average loss: 3.4956, Accuracy: 3180/10000 (31.8000%), Attack Success Rate:3/10000(0.030)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  12, local model 4, internal_epoch   1,  Average loss: 0.0171, Accuracy: 416/463 (89.8488%), train_poison_data_count: 463
Global model norm: 1.8555150718930027.
Norm before scaling: 2.2184657599829105. Distance: 1.1815781758097628
Total norm for 4 adversaries is: 2.2184657599829105. distance: 1.1815781758097628
___Test Local_Simple poisoned: True, epoch: 12: Average loss: 6.1040, Accuracy: 892/8991 (9.9210%)
time spent on training: 17.081621885299683
[foolsgold agg] training data poison_ratio: 0.5029328287606434  data num: [63, 94, 119, 216, 1982, 179, 578, 47, 1544, 463]
[foolsgold agg] considering poison per batch poison_fraction: 0.5029328287606434
[foolsgold agg] wv: [0. 0. 0. 1. 1. 1. 1. 0. 1. 1.]
___Test Target_Simple poisoned: False, epoch: 12: Average loss: 1.9720, Accuracy: 4900/10000 (49.0000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 12: Average loss: 1.9370, Accuracy: 4826/8991 (53.6759%)
Done in 52.1050124168396 sec.
Server Epoch:13 choose agents : [24, 38, 52, 10, 11, 76, 97, 7, 70, 14].
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 24, internal_epoch   1,  Average loss: 0.4262, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 1.8615956869684411.
Norm before scaling: 1.8629020768955642. Distance: 0.04926858131589592
Total norm for 5 adversaries is: 1.8629020768955642. distance: 0.04926858131589592
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 1.9216, Accuracy: 5315/8991 (59.1147%)
___Train Local_Simple,  epoch  13, local model 38, internal_epoch   1,  Average loss: 0.0336, Accuracy: 160/179 (89.3855%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 2.1158, Accuracy: 2026/10000 (20.2600%), Attack Success Rate:37/10000(0.370)
___Train Local_Simple,  epoch  13, local model 52, internal_epoch   1,  Average loss: 0.0099, Accuracy: 633/705 (89.7872%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 7.9222, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:1/10000(0.010)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 10, internal_epoch   1,  Average loss: 0.0189, Accuracy: 575/688 (83.5756%), train_poison_data_count: 688
Global model norm: 1.8615956869684411.
Norm before scaling: 2.318354541545351. Distance: 1.270094151048203
Total norm for 5 adversaries is: 2.318354541545351. distance: 1.270094151048203
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 4.2407, Accuracy: 1859/8991 (20.6762%)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 11, internal_epoch   1,  Average loss: 0.0486, Accuracy: 38/84 (45.2381%), train_poison_data_count: 84
Global model norm: 1.8615956869684411.
Norm before scaling: 1.8675829097620285. Distance: 0.12386892485926483
Total norm for 5 adversaries is: 1.8675829097620285. distance: 0.12386892485926483
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 1.9231, Accuracy: 4190/8991 (46.6022%)
___Train Local_Simple,  epoch  13, local model 76, internal_epoch   1,  Average loss: 0.0481, Accuracy: 24/87 (27.5862%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 1.9507, Accuracy: 4690/10000 (46.9000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  13, local model 97, internal_epoch   1,  Average loss: 0.3570, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 1.9755, Accuracy: 4267/10000 (42.6700%), Attack Success Rate:0/10000(0.000)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 7, internal_epoch   1,  Average loss: 0.0407, Accuracy: 55/86 (63.9535%), train_poison_data_count: 86
Global model norm: 1.8615956869684411.
Norm before scaling: 1.8721710480444853. Distance: 0.1382564110187762
Total norm for 5 adversaries is: 1.8721710480444853. distance: 0.1382564110187762
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 1.9520, Accuracy: 2122/8991 (23.6014%)
___Train Local_Simple,  epoch  13, local model 70, internal_epoch   1,  Average loss: 0.0314, Accuracy: 339/569 (59.5782%)
___Test Local_Simple poisoned: False, epoch: 13: Average loss: 2.5990, Accuracy: 1952/10000 (19.5200%), Attack Success Rate:21/10000(0.210)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  13, local model 14, internal_epoch   1,  Average loss: 0.0414, Accuracy: 28/48 (58.3333%), train_poison_data_count: 48
Global model norm: 1.8615956869684411.
Norm before scaling: 1.8636595783775451. Distance: 0.047299277920042716
Total norm for 5 adversaries is: 1.8636595783775451. distance: 0.047299277920042716
___Test Local_Simple poisoned: True, epoch: 13: Average loss: 1.9259, Accuracy: 4943/8991 (54.9772%)
time spent on training: 17.368813276290894
[foolsgold agg] training data poison_ratio: 0.370928338762215  data num: [5, 179, 705, 688, 84, 87, 5, 86, 569, 48]
[foolsgold agg] considering poison per batch poison_fraction: 0.370928338762215
[foolsgold agg] wv: [0.43304476 0.         0.         0.76319161 0.         0.
 0.46435095 1.         0.43304476 0.        ]
___Test Target_Simple poisoned: False, epoch: 13: Average loss: 1.9648, Accuracy: 4911/10000 (49.1100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 13: Average loss: 1.9266, Accuracy: 4854/8991 (53.9873%)
Done in 51.90016555786133 sec.
Server Epoch:14 choose agents : [95, 97, 12, 89, 25, 34, 55, 67, 56, 2].
___Train Local_Simple,  epoch  14, local model 95, internal_epoch   1,  Average loss: 0.0542, Accuracy: 26/29 (89.6552%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 1.9634, Accuracy: 4039/10000 (40.3900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  14, local model 97, internal_epoch   1,  Average loss: 0.3474, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 1.9698, Accuracy: 4206/10000 (42.0600%), Attack Success Rate:0/10000(0.000)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  14, local model 12, internal_epoch   1,  Average loss: 0.0200, Accuracy: 522/648 (80.5556%), train_poison_data_count: 648
Global model norm: 1.8638146874441919.
Norm before scaling: 2.241512609054496. Distance: 1.1151466669176247
Total norm for 3 adversaries is: 2.241512609054496. distance: 1.1151466669176247
___Test Local_Simple poisoned: True, epoch: 14: Average loss: 3.2738, Accuracy: 2753/8991 (30.6195%)
___Train Local_Simple,  epoch  14, local model 89, internal_epoch   1,  Average loss: 0.0624, Accuracy: 12/69 (17.3913%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 1.9369, Accuracy: 5633/10000 (56.3300%), Attack Success Rate:0/10000(0.000)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  14, local model 25, internal_epoch   1,  Average loss: 0.0465, Accuracy: 60/128 (46.8750%), train_poison_data_count: 128
Global model norm: 1.8638146874441919.
Norm before scaling: 1.8758579198761653. Distance: 0.1673281174080078
Total norm for 3 adversaries is: 1.8758579198761653. distance: 0.1673281174080078
___Test Local_Simple poisoned: True, epoch: 14: Average loss: 1.8765, Accuracy: 4308/8991 (47.9146%)
___Train Local_Simple,  epoch  14, local model 34, internal_epoch   1,  Average loss: 0.0201, Accuracy: 943/1203 (78.3874%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 2.9194, Accuracy: 3325/10000 (33.2500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  14, local model 55, internal_epoch   1,  Average loss: 0.0137, Accuracy: 2312/2803 (82.4831%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 3.4094, Accuracy: 4545/10000 (45.4500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  14, local model 67, internal_epoch   1,  Average loss: 0.0287, Accuracy: 353/568 (62.1479%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 3.1644, Accuracy: 2256/10000 (22.5600%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch  14, local model 56, internal_epoch   1,  Average loss: 0.0124, Accuracy: 605/704 (85.9375%)
___Test Local_Simple poisoned: False, epoch: 14: Average loss: 7.3778, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:11/10000(0.110)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  14, local model 2, internal_epoch   1,  Average loss: 0.0489, Accuracy: 47/119 (39.4958%), train_poison_data_count: 119
Global model norm: 1.8638146874441919.
Norm before scaling: 1.8806581954080126. Distance: 0.22948955777873306
Total norm for 3 adversaries is: 1.8806581954080126. distance: 0.22948955777873306
___Test Local_Simple poisoned: True, epoch: 14: Average loss: 1.9286, Accuracy: 2233/8991 (24.8359%)
time spent on training: 17.99210000038147
[foolsgold agg] training data poison_ratio: 0.14260675589547483  data num: [29, 5, 648, 69, 128, 1203, 2803, 568, 704, 119]
[foolsgold agg] considering poison per batch poison_fraction: 0.14260675589547483
[foolsgold agg] wv: [1.        1.        1.        1.        1.        0.3898014 0.3898014
 1.        0.        0.       ]
___Test Target_Simple poisoned: False, epoch: 14: Average loss: 1.9375, Accuracy: 4890/10000 (48.9000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 14: Average loss: 1.9001, Accuracy: 4879/8991 (54.2654%)
Done in 52.90172004699707 sec.
Server Epoch:15 choose agents : [4, 1, 20, 48, 55, 98, 27, 42, 0, 44].
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 4, internal_epoch   1,  Average loss: 0.0154, Accuracy: 426/463 (92.0086%), train_poison_data_count: 463
Global model norm: 1.870028963323679.
Norm before scaling: 2.2321821002235347. Distance: 1.171594916887545
Total norm for 4 adversaries is: 2.2321821002235347. distance: 1.171594916887545
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 5.9978, Accuracy: 892/8991 (9.9210%)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 1, internal_epoch   1,  Average loss: 0.0457, Accuracy: 48/84 (57.1429%), train_poison_data_count: 84
Global model norm: 1.870028963323679.
Norm before scaling: 1.8766975983102712. Distance: 0.09063082072046698
Total norm for 4 adversaries is: 1.8766975983102712. distance: 0.09063082072046698
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 1.8960, Accuracy: 3976/8991 (44.2220%)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 20, internal_epoch   1,  Average loss: 0.0053, Accuracy: 2010/2180 (92.2018%), train_poison_data_count: 2180
Global model norm: 1.870028963323679.
Norm before scaling: 2.6407678328488626. Distance: 1.7471212824235862
Total norm for 4 adversaries is: 2.6407678328488626. distance: 1.7471212824235862
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 4.5082, Accuracy: 2150/8991 (23.9128%)
___Train Local_Simple,  epoch  15, local model 48, internal_epoch   1,  Average loss: 0.0434, Accuracy: 91/128 (71.0938%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 1.9680, Accuracy: 2493/10000 (24.9300%), Attack Success Rate:11/10000(0.110)
___Train Local_Simple,  epoch  15, local model 55, internal_epoch   1,  Average loss: 0.0137, Accuracy: 2337/2803 (83.3750%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 3.3946, Accuracy: 4525/10000 (45.2500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  15, local model 98, internal_epoch   1,  Average loss: 0.2474, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 1.9356, Accuracy: 4091/10000 (40.9100%), Attack Success Rate:0/10000(0.000)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  15, local model 27, internal_epoch   1,  Average loss: 0.0144, Accuracy: 600/678 (88.4956%), train_poison_data_count: 678
Global model norm: 1.870028963323679.
Norm before scaling: 2.264734553599296. Distance: 1.1772992546517909
Total norm for 4 adversaries is: 2.264734553599296. distance: 1.1772992546517909
___Test Local_Simple poisoned: True, epoch: 15: Average loss: 4.9682, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  15, local model 42, internal_epoch   1,  Average loss: 0.0526, Accuracy: 52/63 (82.5397%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 2.0081, Accuracy: 2458/10000 (24.5800%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  15, local model 0, internal_epoch   1,  Average loss: 0.0256, Accuracy: 254/300 (84.6667%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 2.5173, Accuracy: 1244/10000 (12.4400%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  15, local model 44, internal_epoch   1,  Average loss: 0.0495, Accuracy: 1/47 (2.1277%)
___Test Local_Simple poisoned: False, epoch: 15: Average loss: 1.9222, Accuracy: 5351/10000 (53.5100%), Attack Success Rate:0/10000(0.000)
time spent on training: 17.91468834877014
[foolsgold agg] training data poison_ratio: 0.5042950236966824  data num: [463, 84, 2180, 128, 2803, 6, 678, 63, 300, 47]
[foolsgold agg] considering poison per batch poison_fraction: 0.5042950236966824
[foolsgold agg] wv: [0.         0.14741627 1.         0.         0.93853078 0.43135736
 0.43135736 1.         0.88012102 1.        ]
___Test Target_Simple poisoned: False, epoch: 15: Average loss: 1.9139, Accuracy: 4711/10000 (47.1100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 15: Average loss: 1.8686, Accuracy: 4707/8991 (52.3524%)
Done in 52.9502329826355 sec.
Server Epoch:16 choose agents : [25, 8, 12, 99, 53, 26, 60, 63, 52, 90].
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 25, internal_epoch   1,  Average loss: 0.0457, Accuracy: 53/128 (41.4062%), train_poison_data_count: 128
Global model norm: 1.8771331097448682.
Norm before scaling: 1.8896162636553617. Distance: 0.16909461507891438
Total norm for 4 adversaries is: 1.8896162636553617. distance: 0.16909461507891438
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 1.8164, Accuracy: 4891/8991 (54.3988%)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 8, internal_epoch   1,  Average loss: 0.0298, Accuracy: 144/171 (84.2105%), train_poison_data_count: 171
Global model norm: 1.8771331097448682.
Norm before scaling: 1.9373988463545542. Distance: 0.3832118228776838
Total norm for 4 adversaries is: 1.9373988463545542. distance: 0.3832118228776838
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 2.2853, Accuracy: 1027/8991 (11.4225%)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 12, internal_epoch   1,  Average loss: 0.0190, Accuracy: 546/648 (84.2593%), train_poison_data_count: 648
Global model norm: 1.8771331097448682.
Norm before scaling: 2.2528549730919556. Distance: 1.06781767618668
Total norm for 4 adversaries is: 2.2528549730919556. distance: 1.06781767618668
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 3.2012, Accuracy: 2818/8991 (31.3425%)
___Train Local_Simple,  epoch  16, local model 99, internal_epoch   1,  Average loss: 0.0090, Accuracy: 396/411 (96.3504%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 4.0644, Accuracy: 980/10000 (9.8000%), Attack Success Rate:9/10000(0.090)
___Train Local_Simple,  epoch  16, local model 53, internal_epoch   1,  Average loss: 0.0218, Accuracy: 421/456 (92.3246%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 3.1598, Accuracy: 2086/10000 (20.8600%), Attack Success Rate:31/10000(0.310)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  16, local model 26, internal_epoch   1,  Average loss: 0.0092, Accuracy: 1136/1311 (86.6514%), train_poison_data_count: 1311
Global model norm: 1.8771331097448682.
Norm before scaling: 2.7486268863629. Distance: 1.9437354869239387
Total norm for 4 adversaries is: 2.7486268863629. distance: 1.9437354869239387
___Test Local_Simple poisoned: True, epoch: 16: Average loss: 6.2966, Accuracy: 1926/8991 (21.4214%)
___Train Local_Simple,  epoch  16, local model 60, internal_epoch   1,  Average loss: 0.0214, Accuracy: 326/399 (81.7043%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 3.2955, Accuracy: 1864/10000 (18.6400%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  16, local model 63, internal_epoch   1,  Average loss: 0.0074, Accuracy: 2805/3022 (92.8193%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 4.8759, Accuracy: 1712/10000 (17.1200%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  16, local model 52, internal_epoch   1,  Average loss: 0.0096, Accuracy: 623/705 (88.3688%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 7.7703, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  16, local model 90, internal_epoch   1,  Average loss: 0.0132, Accuracy: 666/768 (86.7188%)
___Test Local_Simple poisoned: False, epoch: 16: Average loss: 4.3642, Accuracy: 1478/10000 (14.7800%), Attack Success Rate:26/10000(0.260)
time spent on training: 19.47125554084778
[foolsgold agg] training data poison_ratio: 0.2815812445442075  data num: [128, 171, 648, 411, 456, 1311, 399, 3022, 705, 768]
[foolsgold agg] considering poison per batch poison_fraction: 0.2815812445442075
[foolsgold agg] wv: [0.60955971 0.18886905 0.65920685 0.65920685 0.97725321 0.
 1.         1.         0.         0.18886905]
___Test Target_Simple poisoned: False, epoch: 16: Average loss: 1.8939, Accuracy: 4697/10000 (46.9700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 16: Average loss: 1.8505, Accuracy: 4689/8991 (52.1522%)
Done in 54.39922499656677 sec.
Server Epoch:17 choose agents : [66, 33, 56, 97, 10, 13, 77, 37, 90, 59].
___Train Local_Simple,  epoch  17, local model 66, internal_epoch   1,  Average loss: 0.0165, Accuracy: 535/681 (78.5609%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 4.5298, Accuracy: 1290/10000 (12.9000%), Attack Success Rate:13/10000(0.130)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  17, local model 33, internal_epoch   1,  Average loss: 0.0225, Accuracy: 473/644 (73.4472%), train_poison_data_count: 644
Global model norm: 1.8829857837507034.
Norm before scaling: 2.2520723336157307. Distance: 1.1338715962705934
Total norm for 3 adversaries is: 2.2520723336157307. distance: 1.1338715962705934
___Test Local_Simple poisoned: True, epoch: 17: Average loss: 3.6703, Accuracy: 1861/8991 (20.6985%)
___Train Local_Simple,  epoch  17, local model 56, internal_epoch   1,  Average loss: 0.0123, Accuracy: 608/704 (86.3636%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 7.2749, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  17, local model 97, internal_epoch   1,  Average loss: 0.3146, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 1.9025, Accuracy: 4218/10000 (42.1800%), Attack Success Rate:0/10000(0.000)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  17, local model 10, internal_epoch   1,  Average loss: 0.0174, Accuracy: 582/688 (84.5930%), train_poison_data_count: 688
Global model norm: 1.8829857837507034.
Norm before scaling: 2.3298084905613274. Distance: 1.2108229552207315
Total norm for 3 adversaries is: 2.3298084905613274. distance: 1.2108229552207315
___Test Local_Simple poisoned: True, epoch: 17: Average loss: 4.0229, Accuracy: 1862/8991 (20.7096%)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  17, local model 13, internal_epoch   1,  Average loss: 0.4641, Accuracy: 0/5 (0.0000%), train_poison_data_count: 5
Global model norm: 1.8829857837507034.
Norm before scaling: 1.883130248550206. Distance: 0.04957105731855458
Total norm for 3 adversaries is: 1.883130248550206. distance: 0.04957105731855458
___Test Local_Simple poisoned: True, epoch: 17: Average loss: 1.8344, Accuracy: 5198/8991 (57.8134%)
___Train Local_Simple,  epoch  17, local model 77, internal_epoch   1,  Average loss: 0.0150, Accuracy: 1215/1544 (78.6917%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 3.2521, Accuracy: 3303/10000 (33.0300%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch  17, local model 37, internal_epoch   1,  Average loss: 0.0189, Accuracy: 480/578 (83.0450%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 2.9970, Accuracy: 2686/10000 (26.8600%), Attack Success Rate:13/10000(0.130)
___Train Local_Simple,  epoch  17, local model 90, internal_epoch   1,  Average loss: 0.0126, Accuracy: 661/768 (86.0677%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 4.3841, Accuracy: 1448/10000 (14.4800%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  17, local model 59, internal_epoch   1,  Average loss: 0.0672, Accuracy: 20/27 (74.0741%)
___Test Local_Simple poisoned: False, epoch: 17: Average loss: 1.8970, Accuracy: 4291/10000 (42.9100%), Attack Success Rate:0/10000(0.000)
time spent on training: 17.71030020713806
[foolsgold agg] training data poison_ratio: 0.23688873139617292  data num: [681, 644, 704, 5, 688, 5, 1544, 578, 768, 27]
[foolsgold agg] considering poison per batch poison_fraction: 0.23688873139617292
[foolsgold agg] wv: [0.59904719 1.         1.         0.         1.         1.
 0.59904719 1.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 17: Average loss: 1.8652, Accuracy: 4768/10000 (47.6800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 17: Average loss: 1.8136, Accuracy: 4770/8991 (53.0531%)
Done in 52.24205231666565 sec.
Server Epoch:18 choose agents : [55, 58, 88, 23, 39, 75, 82, 61, 95, 93].
___Train Local_Simple,  epoch  18, local model 55, internal_epoch   1,  Average loss: 0.0131, Accuracy: 2372/2803 (84.6236%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 3.3078, Accuracy: 4566/10000 (45.6600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  18, local model 58, internal_epoch   1,  Average loss: 0.0189, Accuracy: 776/1015 (76.4532%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 3.5473, Accuracy: 2683/10000 (26.8300%), Attack Success Rate:13/10000(0.130)
___Train Local_Simple,  epoch  18, local model 88, internal_epoch   1,  Average loss: 0.0337, Accuracy: 74/96 (77.0833%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 1.9226, Accuracy: 2099/10000 (20.9900%), Attack Success Rate:20/10000(0.200)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  18, local model 23, internal_epoch   1,  Average loss: 0.0155, Accuracy: 406/428 (94.8598%), train_poison_data_count: 428
Global model norm: 1.8918572815744943.
Norm before scaling: 2.1429231656212275. Distance: 0.8282731841320139
Total norm for 1 adversaries is: 2.1429231656212275. distance: 0.8282731841320139
___Test Local_Simple poisoned: True, epoch: 18: Average loss: 3.0877, Accuracy: 1952/8991 (21.7106%)
___Train Local_Simple,  epoch  18, local model 39, internal_epoch   1,  Average loss: 0.0103, Accuracy: 1104/1259 (87.6886%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 4.1041, Accuracy: 1874/10000 (18.7400%), Attack Success Rate:34/10000(0.340)
___Train Local_Simple,  epoch  18, local model 75, internal_epoch   1,  Average loss: 0.0130, Accuracy: 456/497 (91.7505%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 5.1183, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  18, local model 82, internal_epoch   1,  Average loss: 0.0489, Accuracy: 39/114 (34.2105%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 1.8736, Accuracy: 3602/10000 (36.0200%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  18, local model 61, internal_epoch   1,  Average loss: 0.0155, Accuracy: 601/767 (78.3572%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 3.3822, Accuracy: 2782/10000 (27.8200%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  18, local model 95, internal_epoch   1,  Average loss: 0.0473, Accuracy: 27/29 (93.1034%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 1.8672, Accuracy: 4410/10000 (44.1000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  18, local model 93, internal_epoch   1,  Average loss: 0.0597, Accuracy: 18/30 (60.0000%)
___Test Local_Simple poisoned: False, epoch: 18: Average loss: 1.8590, Accuracy: 4514/10000 (45.1400%), Attack Success Rate:0/10000(0.000)
time spent on training: 17.50686526298523
[foolsgold agg] training data poison_ratio: 0.06081273088945723  data num: [2803, 1015, 96, 428, 1259, 497, 114, 767, 29, 30]
[foolsgold agg] considering poison per batch poison_fraction: 0.06081273088945723
[foolsgold agg] wv: [0.97180546 0.21866093 0.21866093 0.         1.         1.
 1.         0.         0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 18: Average loss: 1.8475, Accuracy: 4676/10000 (46.7600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 18: Average loss: 1.7882, Accuracy: 4670/8991 (51.9408%)
Done in 52.075491189956665 sec.
Server Epoch:19 choose agents : [37, 43, 50, 84, 25, 28, 8, 16, 6, 3].
___Train Local_Simple,  epoch  19, local model 37, internal_epoch   1,  Average loss: 0.0184, Accuracy: 473/578 (81.8339%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 2.8953, Accuracy: 2728/10000 (27.2800%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  19, local model 43, internal_epoch   1,  Average loss: 0.2691, Accuracy: 3/6 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 1.8467, Accuracy: 4538/10000 (45.3800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  19, local model 50, internal_epoch   1,  Average loss: 0.0225, Accuracy: 149/151 (98.6755%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 2.3515, Accuracy: 1264/10000 (12.6400%), Attack Success Rate:18/10000(0.180)
___Train Local_Simple,  epoch  19, local model 84, internal_epoch   1,  Average loss: 0.0789, Accuracy: 6/29 (20.6897%)
___Test Local_Simple poisoned: False, epoch: 19: Average loss: 1.8319, Accuracy: 4812/10000 (48.1200%), Attack Success Rate:0/10000(0.000)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 25, internal_epoch   1,  Average loss: 0.0442, Accuracy: 54/128 (42.1875%), train_poison_data_count: 128
Global model norm: 1.9006286032986566.
Norm before scaling: 1.9143662192267519. Distance: 0.16282529046673946
Total norm for 6 adversaries is: 1.9143662192267519. distance: 0.16282529046673946
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 1.7370, Accuracy: 5343/8991 (59.4261%)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 28, internal_epoch   1,  Average loss: 0.0307, Accuracy: 160/237 (67.5105%), train_poison_data_count: 237
Global model norm: 1.9006286032986566.
Norm before scaling: 1.9832014082727822. Distance: 0.5399182479398762
Total norm for 6 adversaries is: 1.9832014082727822. distance: 0.5399182479398762
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 2.3831, Accuracy: 1032/8991 (11.4781%)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 8, internal_epoch   1,  Average loss: 0.0274, Accuracy: 145/171 (84.7953%), train_poison_data_count: 171
Global model norm: 1.9006286032986566.
Norm before scaling: 1.959357305078748. Distance: 0.3750335360472383
Total norm for 6 adversaries is: 1.959357305078748. distance: 0.3750335360472383
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 2.1763, Accuracy: 1075/8991 (11.9564%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 16, internal_epoch   1,  Average loss: 0.0163, Accuracy: 772/994 (77.6660%), train_poison_data_count: 994
Global model norm: 1.9006286032986566.
Norm before scaling: 2.3695529915365277. Distance: 1.1570152637065032
Total norm for 6 adversaries is: 2.3695529915365277. distance: 1.1570152637065032
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 2.3779, Accuracy: 2801/8991 (31.1534%)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 6, internal_epoch   1,  Average loss: 0.0103, Accuracy: 1715/1982 (86.5288%), train_poison_data_count: 1982
Global model norm: 1.9006286032986566.
Norm before scaling: 2.7875944489356876. Distance: 1.8544111269268981
Total norm for 6 adversaries is: 2.7875944489356876. distance: 1.8544111269268981
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 4.8758, Accuracy: 2418/8991 (26.8936%)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  19, local model 3, internal_epoch   1,  Average loss: 0.0173, Accuracy: 784/1010 (77.6238%), train_poison_data_count: 1010
Global model norm: 1.9006286032986566.
Norm before scaling: 2.485786468885951. Distance: 1.4417141221161212
Total norm for 6 adversaries is: 2.485786468885951. distance: 1.4417141221161212
___Test Local_Simple poisoned: True, epoch: 19: Average loss: 3.3297, Accuracy: 2917/8991 (32.4436%)
time spent on training: 18.340308666229248
[foolsgold agg] training data poison_ratio: 0.8554672720393492  data num: [578, 6, 151, 29, 128, 237, 171, 994, 1982, 1010]
[foolsgold agg] considering poison per batch poison_fraction: 0.8554672720393492
[foolsgold agg] wv: [1.         0.         0.         1.         0.         0.
 0.38985248 1.         0.38985248 1.        ]
___Test Target_Simple poisoned: False, epoch: 19: Average loss: 1.8263, Accuracy: 4871/10000 (48.7100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 19: Average loss: 1.7614, Accuracy: 4877/8991 (54.2431%)
Done in 53.4275963306427 sec.
Server Epoch:20 choose agents : [23, 43, 27, 82, 37, 35, 29, 47, 11, 42].
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 23, internal_epoch   1,  Average loss: 0.0147, Accuracy: 403/428 (94.1589%), train_poison_data_count: 428
Global model norm: 1.9085056529752158.
Norm before scaling: 2.1467974697367507. Distance: 0.7891239859920267
Total norm for 4 adversaries is: 2.1467974697367507. distance: 0.7891239859920267
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 2.9531, Accuracy: 1951/8991 (21.6995%)
___Train Local_Simple,  epoch  20, local model 43, internal_epoch   1,  Average loss: 0.2664, Accuracy: 3/6 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 1.8252, Accuracy: 4714/10000 (47.1400%), Attack Success Rate:0/10000(0.000)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 27, internal_epoch   1,  Average loss: 0.0133, Accuracy: 598/678 (88.2006%), train_poison_data_count: 678
Global model norm: 1.9085056529752158.
Norm before scaling: 2.2753998457431197. Distance: 1.1088797847475576
Total norm for 4 adversaries is: 2.2753998457431197. distance: 1.1088797847475576
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 4.6588, Accuracy: 1010/8991 (11.2335%)
___Train Local_Simple,  epoch  20, local model 82, internal_epoch   1,  Average loss: 0.0456, Accuracy: 50/114 (43.8596%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 1.8466, Accuracy: 3480/10000 (34.8000%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  20, local model 37, internal_epoch   1,  Average loss: 0.0179, Accuracy: 489/578 (84.6021%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 2.8970, Accuracy: 2716/10000 (27.1600%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  20, local model 35, internal_epoch   1,  Average loss: 0.0126, Accuracy: 874/978 (89.3661%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 4.4694, Accuracy: 1247/10000 (12.4700%), Attack Success Rate:21/10000(0.210)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 29, internal_epoch   1,  Average loss: 0.0121, Accuracy: 1088/1232 (88.3117%), train_poison_data_count: 1232
Global model norm: 1.9085056529752158.
Norm before scaling: 2.2934289109843298. Distance: 1.090287367798136
Total norm for 4 adversaries is: 2.2934289109843298. distance: 1.090287367798136
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 3.4208, Accuracy: 994/8991 (11.0555%)
___Train Local_Simple,  epoch  20, local model 47, internal_epoch   1,  Average loss: 0.0107, Accuracy: 2217/2519 (88.0111%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 3.5083, Accuracy: 3403/10000 (34.0300%), Attack Success Rate:2/10000(0.020)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  20, local model 11, internal_epoch   1,  Average loss: 0.0439, Accuracy: 43/84 (51.1905%), train_poison_data_count: 84
Global model norm: 1.9085056529752158.
Norm before scaling: 1.9166376346656082. Distance: 0.11581865988158638
Total norm for 4 adversaries is: 1.9166376346656082. distance: 0.11581865988158638
___Test Local_Simple poisoned: True, epoch: 20: Average loss: 1.7579, Accuracy: 4469/8991 (49.7053%)
___Train Local_Simple,  epoch  20, local model 42, internal_epoch   1,  Average loss: 0.0455, Accuracy: 56/63 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 20: Average loss: 1.9154, Accuracy: 3038/10000 (30.3800%), Attack Success Rate:5/10000(0.050)
time spent on training: 18.910766124725342
[foolsgold agg] training data poison_ratio: 0.3625748502994012  data num: [428, 6, 678, 114, 578, 978, 1232, 2519, 84, 63]
[foolsgold agg] considering poison per batch poison_fraction: 0.36257485029940123
[foolsgold agg] wv: [1.        1.        1.        1.        1.        0.        1.
 0.        0.6220244 0.6220244]
___Test Target_Simple poisoned: False, epoch: 20: Average loss: 1.8141, Accuracy: 4845/10000 (48.4500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 20: Average loss: 1.7418, Accuracy: 4851/8991 (53.9540%)
Done in 53.924827337265015 sec.
Server Epoch:21 choose agents : [33, 12, 93, 15, 41, 97, 20, 86, 54, 52].
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 33, internal_epoch   1,  Average loss: 0.0220, Accuracy: 462/644 (71.7391%), train_poison_data_count: 644
Global model norm: 1.9168645162329914.
Norm before scaling: 2.286901606269188. Distance: 1.1241824570365253
Total norm for 4 adversaries is: 2.286901606269188. distance: 1.1241824570365253
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 3.5913, Accuracy: 1904/8991 (21.1767%)
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 12, internal_epoch   1,  Average loss: 0.0168, Accuracy: 562/648 (86.7284%), train_poison_data_count: 648
Global model norm: 1.9168645162329914.
Norm before scaling: 2.2717851749592324. Distance: 1.0010046085057225
Total norm for 4 adversaries is: 2.2717851749592324. distance: 1.0010046085057225
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 3.0394, Accuracy: 2800/8991 (31.1423%)
___Train Local_Simple,  epoch  21, local model 93, internal_epoch   1,  Average loss: 0.0555, Accuracy: 20/30 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 1.8099, Accuracy: 4585/10000 (45.8500%), Attack Success Rate:0/10000(0.000)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 15, internal_epoch   1,  Average loss: 0.0197, Accuracy: 715/1033 (69.2159%), train_poison_data_count: 1033
Global model norm: 1.9168645162329914.
Norm before scaling: 2.5790867716586483. Distance: 1.5992349971361506
Total norm for 4 adversaries is: 2.5790867716586483. distance: 1.5992349971361506
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 3.3132, Accuracy: 3416/8991 (37.9935%)
___Train Local_Simple,  epoch  21, local model 41, internal_epoch   1,  Average loss: 0.0172, Accuracy: 385/509 (75.6385%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 3.7169, Accuracy: 1569/10000 (15.6900%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  21, local model 97, internal_epoch   1,  Average loss: 0.2722, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 1.8277, Accuracy: 4213/10000 (42.1300%), Attack Success Rate:1/10000(0.010)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  21, local model 20, internal_epoch   1,  Average loss: 0.0046, Accuracy: 2052/2180 (94.1284%), train_poison_data_count: 2180
Global model norm: 1.9168645162329914.
Norm before scaling: 2.5878361764614066. Distance: 1.5458308847961502
Total norm for 4 adversaries is: 2.5878361764614066. distance: 1.5458308847961502
___Test Local_Simple poisoned: True, epoch: 21: Average loss: 4.3073, Accuracy: 2259/8991 (25.1251%)
___Train Local_Simple,  epoch  21, local model 86, internal_epoch   1,  Average loss: 0.0539, Accuracy: 20/34 (58.8235%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 1.8098, Accuracy: 4661/10000 (46.6100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  21, local model 54, internal_epoch   1,  Average loss: 0.0410, Accuracy: 33/91 (36.2637%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 1.7987, Accuracy: 5491/10000 (54.9100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  21, local model 52, internal_epoch   1,  Average loss: 0.0101, Accuracy: 624/705 (88.5106%)
___Test Local_Simple poisoned: False, epoch: 21: Average loss: 7.5704, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:11/10000(0.110)
time spent on training: 16.92245864868164
[foolsgold agg] training data poison_ratio: 0.766286783466576  data num: [644, 648, 30, 1033, 509, 5, 2180, 34, 91, 705]
[foolsgold agg] considering poison per batch poison_fraction: 0.766286783466576
[foolsgold agg] wv: [1.         0.76066237 0.56705913 1.         0.56705913 0.69922864
 1.         0.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 21: Average loss: 1.7953, Accuracy: 4966/10000 (49.6600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 21: Average loss: 1.7124, Accuracy: 4976/8991 (55.3442%)
Done in 51.85724449157715 sec.
Server Epoch:22 choose agents : [24, 38, 42, 32, 60, 8, 35, 92, 27, 96].
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 24, internal_epoch   1,  Average loss: 0.3433, Accuracy: 3/5 (60.0000%), train_poison_data_count: 5
Global model norm: 1.925952957886041.
Norm before scaling: 1.928905498493677. Distance: 0.04583591910856511
Total norm for 4 adversaries is: 1.928905498493677. distance: 0.04583591910856511
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 1.7031, Accuracy: 5269/8991 (58.6030%)
___Train Local_Simple,  epoch  22, local model 38, internal_epoch   1,  Average loss: 0.0308, Accuracy: 164/179 (91.6201%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 1.9095, Accuracy: 2727/10000 (27.2700%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  22, local model 42, internal_epoch   1,  Average loss: 0.0414, Accuracy: 54/63 (85.7143%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 1.8824, Accuracy: 3136/10000 (31.3600%), Attack Success Rate:3/10000(0.030)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 32, internal_epoch   1,  Average loss: 0.0546, Accuracy: 26/28 (92.8571%), train_poison_data_count: 28
Global model norm: 1.925952957886041.
Norm before scaling: 1.9300785672299825. Distance: 0.053938561064681055
Total norm for 4 adversaries is: 1.9300785672299825. distance: 0.053938561064681055
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 1.7212, Accuracy: 4297/8991 (47.7922%)
___Train Local_Simple,  epoch  22, local model 60, internal_epoch   1,  Average loss: 0.0195, Accuracy: 347/399 (86.9674%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 3.0944, Accuracy: 1868/10000 (18.6800%), Attack Success Rate:29/10000(0.290)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 8, internal_epoch   1,  Average loss: 0.0265, Accuracy: 149/171 (87.1345%), train_poison_data_count: 171
Global model norm: 1.925952957886041.
Norm before scaling: 1.9830816063760455. Distance: 0.3555424582387893
Total norm for 4 adversaries is: 1.9830816063760455. distance: 0.3555424582387893
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 2.0675, Accuracy: 1193/8991 (13.2688%)
___Train Local_Simple,  epoch  22, local model 35, internal_epoch   1,  Average loss: 0.0121, Accuracy: 868/978 (88.7526%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 4.2448, Accuracy: 1380/10000 (13.8000%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  22, local model 92, internal_epoch   1,  Average loss: 0.0274, Accuracy: 144/202 (71.2871%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 2.6419, Accuracy: 958/10000 (9.5800%), Attack Success Rate:10/10000(0.100)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  22, local model 27, internal_epoch   1,  Average loss: 0.0130, Accuracy: 600/678 (88.4956%), train_poison_data_count: 678
Global model norm: 1.925952957886041.
Norm before scaling: 2.270758449707975. Distance: 1.0578718926619517
Total norm for 4 adversaries is: 2.270758449707975. distance: 1.0578718926619517
___Test Local_Simple poisoned: True, epoch: 22: Average loss: 4.3293, Accuracy: 1011/8991 (11.2446%)
___Train Local_Simple,  epoch  22, local model 96, internal_epoch   1,  Average loss: 0.0227, Accuracy: 359/505 (71.0891%)
___Test Local_Simple poisoned: False, epoch: 22: Average loss: 2.6957, Accuracy: 2652/10000 (26.5200%), Attack Success Rate:12/10000(0.120)
time spent on training: 17.373324155807495
[foolsgold agg] training data poison_ratio: 0.27493765586034913  data num: [5, 179, 63, 28, 399, 171, 978, 202, 678, 505]
[foolsgold agg] considering poison per batch poison_fraction: 0.27493765586034913
[foolsgold agg] wv: [1. 0. 0. 0. 0. 0. 0. 0. 0. 1.]
___Test Target_Simple poisoned: False, epoch: 22: Average loss: 1.7874, Accuracy: 5052/10000 (50.5200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 22: Average loss: 1.7105, Accuracy: 5065/8991 (56.3341%)
Done in 52.17138195037842 sec.
Server Epoch:23 choose agents : [56, 82, 85, 17, 76, 61, 26, 86, 89, 75].
___Train Local_Simple,  epoch  23, local model 56, internal_epoch   1,  Average loss: 0.0116, Accuracy: 616/704 (87.5000%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 6.8507, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  23, local model 82, internal_epoch   1,  Average loss: 0.0425, Accuracy: 65/114 (57.0175%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 1.8117, Accuracy: 3659/10000 (36.5900%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  23, local model 85, internal_epoch   1,  Average loss: 0.3743, Accuracy: 3/4 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 1.7892, Accuracy: 4883/10000 (48.8300%), Attack Success Rate:0/10000(0.000)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  23, local model 17, internal_epoch   1,  Average loss: 0.0293, Accuracy: 83/94 (88.2979%), train_poison_data_count: 94
Global model norm: 1.9273850763202134.
Norm before scaling: 1.9412438921516064. Distance: 0.1282537084256168
Total norm for 2 adversaries is: 1.9412438921516064. distance: 0.1282537084256168
___Test Local_Simple poisoned: True, epoch: 23: Average loss: 1.7598, Accuracy: 3354/8991 (37.3040%)
___Train Local_Simple,  epoch  23, local model 76, internal_epoch   1,  Average loss: 0.0453, Accuracy: 22/87 (25.2874%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 1.7618, Accuracy: 5588/10000 (55.8800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  23, local model 61, internal_epoch   1,  Average loss: 0.0136, Accuracy: 625/767 (81.4863%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 3.4062, Accuracy: 2666/10000 (26.6600%), Attack Success Rate:18/10000(0.180)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  23, local model 26, internal_epoch   1,  Average loss: 0.0086, Accuracy: 1173/1311 (89.4737%), train_poison_data_count: 1311
Global model norm: 1.9273850763202134.
Norm before scaling: 2.7701113245383646. Distance: 1.8920433462028619
Total norm for 2 adversaries is: 2.7701113245383646. distance: 1.8920433462028619
___Test Local_Simple poisoned: True, epoch: 23: Average loss: 6.0292, Accuracy: 1911/8991 (21.2546%)
___Train Local_Simple,  epoch  23, local model 86, internal_epoch   1,  Average loss: 0.0533, Accuracy: 21/34 (61.7647%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 1.7831, Accuracy: 4906/10000 (49.0600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  23, local model 89, internal_epoch   1,  Average loss: 0.0561, Accuracy: 25/69 (36.2319%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 1.7617, Accuracy: 5225/10000 (52.2500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  23, local model 75, internal_epoch   1,  Average loss: 0.0119, Accuracy: 462/497 (92.9577%)
___Test Local_Simple poisoned: False, epoch: 23: Average loss: 4.8306, Accuracy: 1009/10000 (10.0900%), Attack Success Rate:9/10000(0.090)
time spent on training: 15.445003509521484
[foolsgold agg] training data poison_ratio: 0.3816897582178756  data num: [704, 114, 4, 94, 87, 767, 1311, 34, 69, 497]
[foolsgold agg] considering poison per batch poison_fraction: 0.3816897582178756
[foolsgold agg] wv: [0.         0.17539849 1.         0.         0.         1.
 0.         0.         0.17539849 0.        ]
___Test Target_Simple poisoned: False, epoch: 23: Average loss: 1.7875, Accuracy: 4889/10000 (48.8900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 23: Average loss: 1.7097, Accuracy: 4897/8991 (54.4656%)
Done in 50.59229111671448 sec.
Server Epoch:24 choose agents : [36, 65, 96, 83, 63, 30, 94, 25, 52, 50].
___Train Local_Simple,  epoch  24, local model 36, internal_epoch   1,  Average loss: 0.0152, Accuracy: 271/304 (89.1447%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 4.0223, Accuracy: 974/10000 (9.7400%), Attack Success Rate:3/10000(0.030)
___Train Local_Simple,  epoch  24, local model 65, internal_epoch   1,  Average loss: 0.0124, Accuracy: 1089/1326 (82.1267%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 3.9286, Accuracy: 2222/10000 (22.2200%), Attack Success Rate:19/10000(0.190)
___Train Local_Simple,  epoch  24, local model 96, internal_epoch   1,  Average loss: 0.0218, Accuracy: 346/505 (68.5149%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 2.6611, Accuracy: 2572/10000 (25.7200%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  24, local model 83, internal_epoch   1,  Average loss: 0.0189, Accuracy: 547/750 (72.9333%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 3.6350, Accuracy: 1960/10000 (19.6000%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  24, local model 63, internal_epoch   1,  Average loss: 0.0077, Accuracy: 2795/3022 (92.4884%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 4.7199, Accuracy: 1734/10000 (17.3400%), Attack Success Rate:28/10000(0.280)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  24, local model 30, internal_epoch   1,  Average loss: 0.0194, Accuracy: 556/818 (67.9707%), train_poison_data_count: 818
Global model norm: 1.9304872160722684.
Norm before scaling: 2.4467165879848376. Distance: 1.3661246828087057
Total norm for 2 adversaries is: 2.4467165879848376. distance: 1.3661246828087057
___Test Local_Simple poisoned: True, epoch: 24: Average loss: 4.0488, Accuracy: 2844/8991 (31.6316%)
___Train Local_Simple,  epoch  24, local model 94, internal_epoch   1,  Average loss: 0.0143, Accuracy: 554/607 (91.2685%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 4.0838, Accuracy: 1157/10000 (11.5700%), Attack Success Rate:12/10000(0.120)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  24, local model 25, internal_epoch   1,  Average loss: 0.0428, Accuracy: 57/128 (44.5312%), train_poison_data_count: 128
Global model norm: 1.9304872160722684.
Norm before scaling: 1.9446764292916017. Distance: 0.1671155730280034
Total norm for 2 adversaries is: 1.9446764292916017. distance: 0.1671155730280034
___Test Local_Simple poisoned: True, epoch: 24: Average loss: 1.6524, Accuracy: 5646/8991 (62.7961%)
___Train Local_Simple,  epoch  24, local model 52, internal_epoch   1,  Average loss: 0.0095, Accuracy: 623/705 (88.3688%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 7.3947, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  24, local model 50, internal_epoch   1,  Average loss: 0.0157, Accuracy: 150/151 (99.3377%)
___Test Local_Simple poisoned: False, epoch: 24: Average loss: 2.1789, Accuracy: 1670/10000 (16.7000%), Attack Success Rate:23/10000(0.230)
time spent on training: 19.834628582000732
[foolsgold agg] training data poison_ratio: 0.11375661375661375  data num: [304, 1326, 505, 750, 3022, 818, 607, 128, 705, 151]
[foolsgold agg] considering poison per batch poison_fraction: 0.11375661375661375
[foolsgold agg] wv: [1.         1.         1.         1.         1.         1.
 1.         0.65212479 0.65212479 1.        ]
___Test Target_Simple poisoned: False, epoch: 24: Average loss: 1.7431, Accuracy: 5313/10000 (53.1300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 24: Average loss: 1.6721, Accuracy: 5318/8991 (59.1480%)
Done in 54.94879770278931 sec.
Server Epoch:25 choose agents : [45, 6, 35, 17, 20, 73, 43, 8, 74, 3].
___Train Local_Simple,  epoch  25, local model 45, internal_epoch   1,  Average loss: 0.0197, Accuracy: 310/388 (79.8969%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 3.1347, Accuracy: 1604/10000 (16.0400%), Attack Success Rate:35/10000(0.350)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 6, internal_epoch   1,  Average loss: 0.0101, Accuracy: 1723/1982 (86.9324%), train_poison_data_count: 1982
Global model norm: 1.9416892998594601.
Norm before scaling: 2.8088753125393127. Distance: 1.8443024664292464
Total norm for 5 adversaries is: 2.8088753125393127. distance: 1.8443024664292464
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 4.7474, Accuracy: 2509/8991 (27.9057%)
___Train Local_Simple,  epoch  25, local model 35, internal_epoch   1,  Average loss: 0.0116, Accuracy: 868/978 (88.7526%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 4.1076, Accuracy: 1386/10000 (13.8600%), Attack Success Rate:24/10000(0.240)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 17, internal_epoch   1,  Average loss: 0.0293, Accuracy: 82/94 (87.2340%), train_poison_data_count: 94
Global model norm: 1.9416892998594601.
Norm before scaling: 1.9553009729348911. Distance: 0.127624278202874
Total norm for 5 adversaries is: 1.9553009729348911. distance: 0.127624278202874
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 1.7166, Accuracy: 3651/8991 (40.6073%)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 20, internal_epoch   1,  Average loss: 0.0043, Accuracy: 2059/2180 (94.4495%), train_poison_data_count: 2180
Global model norm: 1.9416892998594601.
Norm before scaling: 2.5824356570357163. Distance: 1.4747073513601814
Total norm for 5 adversaries is: 2.5824356570357163. distance: 1.4747073513601814
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 4.0323, Accuracy: 2449/8991 (27.2383%)
___Train Local_Simple,  epoch  25, local model 73, internal_epoch   1,  Average loss: 0.0122, Accuracy: 1015/1205 (84.2324%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 4.7528, Accuracy: 1743/10000 (17.4300%), Attack Success Rate:35/10000(0.350)
___Train Local_Simple,  epoch  25, local model 43, internal_epoch   1,  Average loss: 0.2443, Accuracy: 4/6 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 1.7434, Accuracy: 5159/10000 (51.5900%), Attack Success Rate:0/10000(0.000)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 8, internal_epoch   1,  Average loss: 0.0268, Accuracy: 145/171 (84.7953%), train_poison_data_count: 171
Global model norm: 1.9416892998594601.
Norm before scaling: 1.9977191197568944. Distance: 0.36465565327481025
Total norm for 5 adversaries is: 1.9977191197568944. distance: 0.36465565327481025
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 1.9997, Accuracy: 1272/8991 (14.1475%)
___Train Local_Simple,  epoch  25, local model 74, internal_epoch   1,  Average loss: 0.0206, Accuracy: 485/762 (63.6483%)
___Test Local_Simple poisoned: False, epoch: 25: Average loss: 3.2049, Accuracy: 2710/10000 (27.1000%), Attack Success Rate:12/10000(0.120)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  25, local model 3, internal_epoch   1,  Average loss: 0.0166, Accuracy: 779/1010 (77.1287%), train_poison_data_count: 1010
Global model norm: 1.9416892998594601.
Norm before scaling: 2.5069739344991318. Distance: 1.3615583665674282
Total norm for 5 adversaries is: 2.5069739344991318. distance: 1.3615583665674282
___Test Local_Simple poisoned: True, epoch: 25: Average loss: 3.1209, Accuracy: 2950/8991 (32.8106%)
time spent on training: 19.638274431228638
[foolsgold agg] training data poison_ratio: 0.6195305378304466  data num: [388, 1982, 978, 94, 2180, 1205, 6, 171, 762, 1010]
[foolsgold agg] considering poison per batch poison_fraction: 0.6195305378304466
[foolsgold agg] wv: [0.         0.77786875 1.         0.77786875 1.         0.16494189
 1.         0.         0.16494189 1.        ]
___Test Target_Simple poisoned: False, epoch: 25: Average loss: 1.7219, Accuracy: 5444/10000 (54.4400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 25: Average loss: 1.6449, Accuracy: 5447/8991 (60.5828%)
Done in 54.59803771972656 sec.
Server Epoch:26 choose agents : [39, 14, 32, 4, 30, 63, 23, 3, 94, 84].
___Train Local_Simple,  epoch  26, local model 39, internal_epoch   1,  Average loss: 0.0091, Accuracy: 1130/1259 (89.7538%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 3.9766, Accuracy: 1871/10000 (18.7100%), Attack Success Rate:22/10000(0.220)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 14, internal_epoch   1,  Average loss: 0.0345, Accuracy: 40/48 (83.3333%), train_poison_data_count: 48
Global model norm: 1.95135533842098.
Norm before scaling: 1.9546809598110448. Distance: 0.044244497485602025
Total norm for 6 adversaries is: 1.9546809598110448. distance: 0.044244497485602025
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 1.6362, Accuracy: 5466/8991 (60.7941%)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 32, internal_epoch   1,  Average loss: 0.0553, Accuracy: 26/28 (92.8571%), train_poison_data_count: 28
Global model norm: 1.95135533842098.
Norm before scaling: 1.9553315172799373. Distance: 0.054221477319709985
Total norm for 6 adversaries is: 1.9553315172799373. distance: 0.054221477319709985
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 1.6507, Accuracy: 4774/8991 (53.0975%)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 4, internal_epoch   1,  Average loss: 0.0163, Accuracy: 377/463 (81.4255%), train_poison_data_count: 463
Global model norm: 1.95135533842098.
Norm before scaling: 2.298039977799122. Distance: 1.2029961851444784
Total norm for 6 adversaries is: 2.298039977799122. distance: 1.2029961851444784
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 5.6357, Accuracy: 892/8991 (9.9210%)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 30, internal_epoch   1,  Average loss: 0.0180, Accuracy: 589/818 (72.0049%), train_poison_data_count: 818
Global model norm: 1.95135533842098.
Norm before scaling: 2.4746899188993656. Distance: 1.3583415257415545
Total norm for 6 adversaries is: 2.4746899188993656. distance: 1.3583415257415545
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 4.0787, Accuracy: 2836/8991 (31.5427%)
___Train Local_Simple,  epoch  26, local model 63, internal_epoch   1,  Average loss: 0.0069, Accuracy: 2805/3022 (92.8193%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 4.6511, Accuracy: 1719/10000 (17.1900%), Attack Success Rate:39/10000(0.390)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 23, internal_epoch   1,  Average loss: 0.0140, Accuracy: 405/428 (94.6262%), train_poison_data_count: 428
Global model norm: 1.95135533842098.
Norm before scaling: 2.1754552299015275. Distance: 0.7578901270798009
Total norm for 6 adversaries is: 2.1754552299015275. distance: 0.7578901270798009
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 2.7822, Accuracy: 1948/8991 (21.6661%)
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  26, local model 3, internal_epoch   1,  Average loss: 0.0161, Accuracy: 813/1010 (80.4950%), train_poison_data_count: 1010
Global model norm: 1.95135533842098.
Norm before scaling: 2.5135461024405816. Distance: 1.3488838243956773
Total norm for 6 adversaries is: 2.5135461024405816. distance: 1.3488838243956773
___Test Local_Simple poisoned: True, epoch: 26: Average loss: 3.1255, Accuracy: 2914/8991 (32.4102%)
___Train Local_Simple,  epoch  26, local model 94, internal_epoch   1,  Average loss: 0.0127, Accuracy: 570/607 (93.9044%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 3.8534, Accuracy: 1181/10000 (11.8100%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  26, local model 84, internal_epoch   1,  Average loss: 0.0774, Accuracy: 6/29 (20.6897%)
___Test Local_Simple poisoned: False, epoch: 26: Average loss: 1.7053, Accuracy: 5538/10000 (55.3800%), Attack Success Rate:0/10000(0.000)
time spent on training: 21.88271188735962
[foolsgold agg] training data poison_ratio: 0.36242219917012447  data num: [1259, 48, 28, 463, 818, 3022, 428, 1010, 607, 29]
[foolsgold agg] considering poison per batch poison_fraction: 0.36242219917012447
[foolsgold agg] wv: [1.         0.         1.         1.         1.         0.08533276
 1.         1.         0.         0.08533276]
___Test Target_Simple poisoned: False, epoch: 26: Average loss: 1.7063, Accuracy: 5533/10000 (55.3300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 26: Average loss: 1.6230, Accuracy: 5531/8991 (61.5171%)
Done in 56.97294068336487 sec.
Server Epoch:27 choose agents : [69, 2, 42, 25, 17, 37, 45, 54, 30, 0].
___Train Local_Simple,  epoch  27, local model 69, internal_epoch   1,  Average loss: 0.0119, Accuracy: 531/586 (90.6143%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 4.3727, Accuracy: 1328/10000 (13.2800%), Attack Success Rate:15/10000(0.150)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 2, internal_epoch   1,  Average loss: 0.0433, Accuracy: 63/119 (52.9412%), train_poison_data_count: 119
Global model norm: 1.9611197459121146.
Norm before scaling: 1.980383515639977. Distance: 0.22358975558175156
Total norm for 4 adversaries is: 1.980383515639977. distance: 0.22358975558175156
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 1.6178, Accuracy: 4760/8991 (52.9418%)
___Train Local_Simple,  epoch  27, local model 42, internal_epoch   1,  Average loss: 0.0419, Accuracy: 56/63 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 1.7857, Accuracy: 3629/10000 (36.2900%), Attack Success Rate:1/10000(0.010)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 25, internal_epoch   1,  Average loss: 0.0415, Accuracy: 66/128 (51.5625%), train_poison_data_count: 128
Global model norm: 1.9611197459121146.
Norm before scaling: 1.976370097208242. Distance: 0.16096975572723993
Total norm for 4 adversaries is: 1.976370097208242. distance: 0.16096975572723993
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 1.5676, Accuracy: 6307/8991 (70.1479%)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 17, internal_epoch   1,  Average loss: 0.0282, Accuracy: 84/94 (89.3617%), train_poison_data_count: 94
Global model norm: 1.9611197459121146.
Norm before scaling: 1.9747899366281931. Distance: 0.12290910167838767
Total norm for 4 adversaries is: 1.9747899366281931. distance: 0.12290910167838767
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 1.6659, Accuracy: 3813/8991 (42.4091%)
___Train Local_Simple,  epoch  27, local model 37, internal_epoch   1,  Average loss: 0.0165, Accuracy: 496/578 (85.8131%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 2.6623, Accuracy: 2734/10000 (27.3400%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  27, local model 45, internal_epoch   1,  Average loss: 0.0196, Accuracy: 315/388 (81.1856%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 3.0663, Accuracy: 1620/10000 (16.2000%), Attack Success Rate:23/10000(0.230)
___Train Local_Simple,  epoch  27, local model 54, internal_epoch   1,  Average loss: 0.0394, Accuracy: 38/91 (41.7582%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 1.6892, Accuracy: 6229/10000 (62.2900%), Attack Success Rate:0/10000(0.000)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  27, local model 30, internal_epoch   1,  Average loss: 0.0176, Accuracy: 621/818 (75.9169%), train_poison_data_count: 818
Global model norm: 1.9611197459121146.
Norm before scaling: 2.476103731136362. Distance: 1.334229297410853
Total norm for 4 adversaries is: 2.476103731136362. distance: 1.334229297410853
___Test Local_Simple poisoned: True, epoch: 27: Average loss: 4.1482, Accuracy: 2803/8991 (31.1756%)
___Train Local_Simple,  epoch  27, local model 0, internal_epoch   1,  Average loss: 0.0215, Accuracy: 262/300 (87.3333%)
___Test Local_Simple poisoned: False, epoch: 27: Average loss: 2.1264, Accuracy: 2178/10000 (21.7800%), Attack Success Rate:31/10000(0.310)
time spent on training: 17.322351694107056
[foolsgold agg] training data poison_ratio: 0.3661927330173776  data num: [586, 119, 63, 128, 94, 578, 388, 91, 818, 300]
[foolsgold agg] considering poison per batch poison_fraction: 0.36619273301737754
[foolsgold agg] wv: [0.36320402 0.14564732 0.         0.14564732 0.         1.
 1.         1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 27: Average loss: 1.6892, Accuracy: 5703/10000 (57.0300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 27: Average loss: 1.5995, Accuracy: 5703/8991 (63.4301%)
Done in 52.605857133865356 sec.
Server Epoch:28 choose agents : [33, 51, 17, 63, 6, 24, 82, 35, 80, 81].
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 33, internal_epoch   1,  Average loss: 0.0199, Accuracy: 499/644 (77.4845%), train_poison_data_count: 644
Global model norm: 1.9694767170808432.
Norm before scaling: 2.3211394098465146. Distance: 1.0503851275089147
Total norm for 4 adversaries is: 2.3211394098465146. distance: 1.0503851275089147
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 3.3429, Accuracy: 2046/8991 (22.7561%)
___Train Local_Simple,  epoch  28, local model 51, internal_epoch   1,  Average loss: 0.0167, Accuracy: 214/259 (82.6255%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 2.1275, Accuracy: 2165/10000 (21.6500%), Attack Success Rate:29/10000(0.290)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 17, internal_epoch   1,  Average loss: 0.0278, Accuracy: 83/94 (88.2979%), train_poison_data_count: 94
Global model norm: 1.9694767170808432.
Norm before scaling: 1.9833969349106506. Distance: 0.12260448311003515
Total norm for 4 adversaries is: 1.9833969349106506. distance: 0.12260448311003515
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 1.6462, Accuracy: 3887/8991 (43.2321%)
___Train Local_Simple,  epoch  28, local model 63, internal_epoch   1,  Average loss: 0.0073, Accuracy: 2795/3022 (92.4884%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 4.5623, Accuracy: 1839/10000 (18.3900%), Attack Success Rate:40/10000(0.400)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 6, internal_epoch   1,  Average loss: 0.0102, Accuracy: 1737/1982 (87.6387%), train_poison_data_count: 1982
Global model norm: 1.9694767170808432.
Norm before scaling: 2.8103783976496963. Distance: 1.7817758152176666
Total norm for 4 adversaries is: 2.8103783976496963. distance: 1.7817758152176666
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 4.6550, Accuracy: 2348/8991 (26.1150%)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  28, local model 24, internal_epoch   1,  Average loss: 0.3334, Accuracy: 3/5 (60.0000%), train_poison_data_count: 5
Global model norm: 1.9694767170808432.
Norm before scaling: 1.9725022661899558. Distance: 0.045352535196300336
Total norm for 4 adversaries is: 1.9725022661899558. distance: 0.045352535196300336
___Test Local_Simple poisoned: True, epoch: 28: Average loss: 1.5895, Accuracy: 5947/8991 (66.1439%)
___Train Local_Simple,  epoch  28, local model 82, internal_epoch   1,  Average loss: 0.0411, Accuracy: 63/114 (55.2632%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 1.7102, Accuracy: 4874/10000 (48.7400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  28, local model 35, internal_epoch   1,  Average loss: 0.0111, Accuracy: 882/978 (90.1840%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 3.7953, Accuracy: 1406/10000 (14.0600%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch  28, local model 80, internal_epoch   1,  Average loss: 0.0452, Accuracy: 29/84 (34.5238%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 1.6854, Accuracy: 5330/10000 (53.3000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  28, local model 81, internal_epoch   1,  Average loss: 0.0514, Accuracy: 40/68 (58.8235%)
___Test Local_Simple poisoned: False, epoch: 28: Average loss: 1.6653, Accuracy: 6084/10000 (60.8400%), Attack Success Rate:0/10000(0.000)
time spent on training: 20.230456829071045
[foolsgold agg] training data poison_ratio: 0.3758620689655172  data num: [644, 259, 94, 3022, 1982, 5, 114, 978, 84, 68]
[foolsgold agg] considering poison per batch poison_fraction: 0.3758620689655172
[foolsgold agg] wv: [0.50248809 0.96330287 0.45305739 1.         0.45305739 0.
 0.         1.         0.96330287 1.        ]
___Test Target_Simple poisoned: False, epoch: 28: Average loss: 1.6699, Accuracy: 5821/10000 (58.2100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 28: Average loss: 1.5842, Accuracy: 5822/8991 (64.7536%)
Done in 55.898523807525635 sec.
Server Epoch:29 choose agents : [58, 90, 30, 72, 41, 25, 16, 91, 50, 57].
___Train Local_Simple,  epoch  29, local model 58, internal_epoch   1,  Average loss: 0.0170, Accuracy: 814/1015 (80.1970%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 3.1506, Accuracy: 2702/10000 (27.0200%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  29, local model 90, internal_epoch   1,  Average loss: 0.0124, Accuracy: 666/768 (86.7188%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 3.9807, Accuracy: 1580/10000 (15.8000%), Attack Success Rate:30/10000(0.300)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  29, local model 30, internal_epoch   1,  Average loss: 0.0171, Accuracy: 621/818 (75.9169%), train_poison_data_count: 818
Global model norm: 1.976567445530189.
Norm before scaling: 2.479736892987069. Distance: 1.2849366716446882
Total norm for 3 adversaries is: 2.479736892987069. distance: 1.2849366716446882
___Test Local_Simple poisoned: True, epoch: 29: Average loss: 3.9536, Accuracy: 2845/8991 (31.6428%)
___Train Local_Simple,  epoch  29, local model 72, internal_epoch   1,  Average loss: 0.1562, Accuracy: 7/10 (70.0000%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 1.6612, Accuracy: 5841/10000 (58.4100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  29, local model 41, internal_epoch   1,  Average loss: 0.0171, Accuracy: 387/509 (76.0314%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 3.6059, Accuracy: 1567/10000 (15.6700%), Attack Success Rate:34/10000(0.340)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  29, local model 25, internal_epoch   1,  Average loss: 0.0403, Accuracy: 71/128 (55.4688%), train_poison_data_count: 128
Global model norm: 1.976567445530189.
Norm before scaling: 1.9930567023273615. Distance: 0.15741726463893257
Total norm for 3 adversaries is: 1.9930567023273615. distance: 0.15741726463893257
___Test Local_Simple poisoned: True, epoch: 29: Average loss: 1.5365, Accuracy: 6318/8991 (70.2703%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  29, local model 16, internal_epoch   1,  Average loss: 0.0144, Accuracy: 812/994 (81.6901%), train_poison_data_count: 994
Global model norm: 1.976567445530189.
Norm before scaling: 2.424924149261001. Distance: 1.0788024211536718
Total norm for 3 adversaries is: 2.424924149261001. distance: 1.0788024211536718
___Test Local_Simple poisoned: True, epoch: 29: Average loss: 2.2301, Accuracy: 2833/8991 (31.5093%)
___Train Local_Simple,  epoch  29, local model 91, internal_epoch   1,  Average loss: 0.0305, Accuracy: 141/182 (77.4725%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 1.8083, Accuracy: 3481/10000 (34.8100%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  29, local model 50, internal_epoch   1,  Average loss: 0.0163, Accuracy: 150/151 (99.3377%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 2.0554, Accuracy: 2317/10000 (23.1700%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  29, local model 57, internal_epoch   1,  Average loss: 0.0136, Accuracy: 1179/1437 (82.0459%)
___Test Local_Simple poisoned: False, epoch: 29: Average loss: 4.1482, Accuracy: 2814/10000 (28.1400%), Attack Success Rate:7/10000(0.070)
time spent on training: 18.861891508102417
[foolsgold agg] training data poison_ratio: 0.3226879574184963  data num: [1015, 768, 818, 10, 509, 128, 994, 182, 151, 1437]
[foolsgold agg] considering poison per batch poison_fraction: 0.3226879574184963
[foolsgold agg] wv: [0.00216863 0.46223701 1.         0.46223701 0.00216863 1.
 0.26253104 0.21306887 1.         0.26253104]
___Test Target_Simple poisoned: False, epoch: 29: Average loss: 1.6640, Accuracy: 5630/10000 (56.3000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 29: Average loss: 1.5733, Accuracy: 5621/8991 (62.5181%)
Done in 55.40804386138916 sec.
Server Epoch:30 choose agents : [50, 77, 73, 21, 10, 8, 40, 52, 45, 30].
___Train Local_Simple,  epoch  30, local model 50, internal_epoch   1,  Average loss: 0.0199, Accuracy: 150/151 (99.3377%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 2.0151, Accuracy: 2469/10000 (24.6900%), Attack Success Rate:16/10000(0.160)
___Train Local_Simple,  epoch  30, local model 77, internal_epoch   1,  Average loss: 0.0124, Accuracy: 1295/1544 (83.8731%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 3.1224, Accuracy: 3412/10000 (34.1200%), Attack Success Rate:2/10000(0.020)
___Train Local_Simple,  epoch  30, local model 73, internal_epoch   1,  Average loss: 0.0114, Accuracy: 1021/1205 (84.7303%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 4.5392, Accuracy: 1745/10000 (17.4500%), Attack Success Rate:33/10000(0.330)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 21, internal_epoch   1,  Average loss: 0.0084, Accuracy: 1848/2072 (89.1892%), train_poison_data_count: 2072
Global model norm: 1.983984240407802.
Norm before scaling: 2.8546548875972233. Distance: 1.9047252623121627
Total norm for 4 adversaries is: 2.8546548875972233. distance: 1.9047252623121627
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 3.9562, Accuracy: 2755/8991 (30.6418%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 10, internal_epoch   1,  Average loss: 0.0145, Accuracy: 605/688 (87.9360%), train_poison_data_count: 688
Global model norm: 1.983984240407802.
Norm before scaling: 2.38622572281539. Distance: 1.0910685230383226
Total norm for 4 adversaries is: 2.38622572281539. distance: 1.0910685230383226
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 3.5719, Accuracy: 1890/8991 (21.0210%)
poison local model 8 index 7 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 8, internal_epoch   1,  Average loss: 0.0265, Accuracy: 142/171 (83.0409%), train_poison_data_count: 171
Global model norm: 1.983984240407802.
Norm before scaling: 2.038901136305517. Distance: 0.36336229302254325
Total norm for 4 adversaries is: 2.038901136305517. distance: 0.36336229302254325
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 1.8807, Accuracy: 1551/8991 (17.2506%)
___Train Local_Simple,  epoch  30, local model 40, internal_epoch   1,  Average loss: 0.0244, Accuracy: 283/436 (64.9083%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 2.9018, Accuracy: 1685/10000 (16.8500%), Attack Success Rate:33/10000(0.330)
___Train Local_Simple,  epoch  30, local model 52, internal_epoch   1,  Average loss: 0.0082, Accuracy: 645/705 (91.4894%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 6.8801, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  30, local model 45, internal_epoch   1,  Average loss: 0.0188, Accuracy: 320/388 (82.4742%)
___Test Local_Simple poisoned: False, epoch: 30: Average loss: 3.0418, Accuracy: 1655/10000 (16.5500%), Attack Success Rate:33/10000(0.330)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  30, local model 30, internal_epoch   1,  Average loss: 0.0169, Accuracy: 634/818 (77.5061%), train_poison_data_count: 818
Global model norm: 1.983984240407802.
Norm before scaling: 2.483178864439014. Distance: 1.2748180465267125
Total norm for 4 adversaries is: 2.483178864439014. distance: 1.2748180465267125
___Test Local_Simple poisoned: True, epoch: 30: Average loss: 3.9697, Accuracy: 2843/8991 (31.6205%)
time spent on training: 21.633634090423584
[foolsgold agg] training data poison_ratio: 0.45842504279775004  data num: [151, 1544, 1205, 2072, 688, 171, 436, 705, 388, 818]
[foolsgold agg] considering poison per batch poison_fraction: 0.4584250427977501
[foolsgold agg] wv: [1.         1.         0.70743212 0.70743212 1.         0.
 0.         0.         0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 30: Average loss: 1.6466, Accuracy: 5771/10000 (57.7100%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 30: Average loss: 1.5546, Accuracy: 5759/8991 (64.0529%)
Done in 59.49327516555786 sec.
Server Epoch:31 choose agents : [74, 9, 99, 85, 4, 11, 24, 42, 23, 25].
___Train Local_Simple,  epoch  31, local model 74, internal_epoch   1,  Average loss: 0.0194, Accuracy: 521/762 (68.3727%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 3.0892, Accuracy: 2943/10000 (29.4300%), Attack Success Rate:3/10000(0.030)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 9, internal_epoch   1,  Average loss: 0.0272, Accuracy: 218/263 (82.8897%), train_poison_data_count: 263
Global model norm: 1.9953179391474662.
Norm before scaling: 2.1017550128556186. Distance: 0.5298781071702512
Total norm for 6 adversaries is: 2.1017550128556186. distance: 0.5298781071702512
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 2.3045, Accuracy: 1757/8991 (19.5418%)
___Train Local_Simple,  epoch  31, local model 99, internal_epoch   1,  Average loss: 0.0066, Accuracy: 401/411 (97.5669%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 3.0488, Accuracy: 1315/10000 (13.1500%), Attack Success Rate:11/10000(0.110)
___Train Local_Simple,  epoch  31, local model 85, internal_epoch   1,  Average loss: 0.3885, Accuracy: 2/4 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 1.6426, Accuracy: 5716/10000 (57.1600%), Attack Success Rate:0/10000(0.000)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 4, internal_epoch   1,  Average loss: 0.0148, Accuracy: 412/463 (88.9849%), train_poison_data_count: 463
Global model norm: 1.9953179391474662.
Norm before scaling: 2.325934589368277. Distance: 1.13944052243644
Total norm for 6 adversaries is: 2.325934589368277. distance: 1.13944052243644
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 5.3971, Accuracy: 892/8991 (9.9210%)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 11, internal_epoch   1,  Average loss: 0.0371, Accuracy: 51/84 (60.7143%), train_poison_data_count: 84
Global model norm: 1.9953179391474662.
Norm before scaling: 2.0050657015188373. Distance: 0.10741362540039384
Total norm for 6 adversaries is: 2.0050657015188373. distance: 0.10741362540039384
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 1.5592, Accuracy: 5052/8991 (56.1895%)
poison local model 24 index 23 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 24, internal_epoch   1,  Average loss: 0.3348, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 1.9953179391474662.
Norm before scaling: 1.9981577256105776. Distance: 0.04556318360798295
Total norm for 6 adversaries is: 1.9981577256105776. distance: 0.04556318360798295
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 1.5421, Accuracy: 6134/8991 (68.2238%)
___Train Local_Simple,  epoch  31, local model 42, internal_epoch   1,  Average loss: 0.0374, Accuracy: 59/63 (93.6508%)
___Test Local_Simple poisoned: False, epoch: 31: Average loss: 1.7372, Accuracy: 3727/10000 (37.2700%), Attack Success Rate:1/10000(0.010)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 23, internal_epoch   1,  Average loss: 0.0140, Accuracy: 394/428 (92.0561%), train_poison_data_count: 428
Global model norm: 1.9953179391474662.
Norm before scaling: 2.2119010200705436. Distance: 0.7563121533665352
Total norm for 6 adversaries is: 2.2119010200705436. distance: 0.7563121533665352
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 2.6777, Accuracy: 1948/8991 (21.6661%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  31, local model 25, internal_epoch   1,  Average loss: 0.0392, Accuracy: 73/128 (57.0312%), train_poison_data_count: 128
Global model norm: 1.9953179391474662.
Norm before scaling: 2.011957187781059. Distance: 0.1581258290630967
Total norm for 6 adversaries is: 2.011957187781059. distance: 0.1581258290630967
___Test Local_Simple poisoned: True, epoch: 31: Average loss: 1.5068, Accuracy: 6285/8991 (69.9032%)
time spent on training: 20.302358627319336
[foolsgold agg] training data poison_ratio: 0.5250861738797395  data num: [762, 263, 411, 4, 463, 84, 5, 63, 428, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.5250861738797395
[foolsgold agg] wv: [1.         0.         0.05399586 0.46586333 0.         0.10297622
 1.         0.10297622 0.05399586 0.40223152]
___Test Target_Simple poisoned: False, epoch: 31: Average loss: 1.6347, Accuracy: 5974/10000 (59.7400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 31: Average loss: 1.5491, Accuracy: 5960/8991 (66.2885%)
Done in 58.31586146354675 sec.
Server Epoch:32 choose agents : [93, 87, 55, 70, 15, 90, 91, 86, 67, 20].
___Train Local_Simple,  epoch  32, local model 93, internal_epoch   1,  Average loss: 0.0563, Accuracy: 17/30 (56.6667%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 1.6230, Accuracy: 6018/10000 (60.1800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  32, local model 87, internal_epoch   1,  Average loss: 0.0393, Accuracy: 30/33 (90.9091%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 1.6293, Accuracy: 5915/10000 (59.1500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  32, local model 55, internal_epoch   1,  Average loss: 0.0123, Accuracy: 2394/2803 (85.4085%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 3.0771, Accuracy: 4554/10000 (45.5400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  32, local model 70, internal_epoch   1,  Average loss: 0.0274, Accuracy: 381/569 (66.9596%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 2.2653, Accuracy: 2056/10000 (20.5600%), Attack Success Rate:31/10000(0.310)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  32, local model 15, internal_epoch   1,  Average loss: 0.0182, Accuracy: 792/1033 (76.6699%), train_poison_data_count: 1033
Global model norm: 1.9974936039026097.
Norm before scaling: 2.6194798692897057. Distance: 1.4946508396636735
Total norm for 2 adversaries is: 2.6194798692897057. distance: 1.4946508396636735
___Test Local_Simple poisoned: True, epoch: 32: Average loss: 3.0910, Accuracy: 3471/8991 (38.6053%)
___Train Local_Simple,  epoch  32, local model 90, internal_epoch   1,  Average loss: 0.0114, Accuracy: 669/768 (87.1094%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 4.3594, Accuracy: 1401/10000 (14.0100%), Attack Success Rate:27/10000(0.270)
___Train Local_Simple,  epoch  32, local model 91, internal_epoch   1,  Average loss: 0.0297, Accuracy: 153/182 (84.0659%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 1.7462, Accuracy: 3995/10000 (39.9500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  32, local model 86, internal_epoch   1,  Average loss: 0.0483, Accuracy: 23/34 (67.6471%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 1.6336, Accuracy: 5820/10000 (58.2000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  32, local model 67, internal_epoch   1,  Average loss: 0.0237, Accuracy: 403/568 (70.9507%)
___Test Local_Simple poisoned: False, epoch: 32: Average loss: 2.9971, Accuracy: 2386/10000 (23.8600%), Attack Success Rate:15/10000(0.150)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  32, local model 20, internal_epoch   1,  Average loss: 0.0040, Accuracy: 2085/2180 (95.6422%), train_poison_data_count: 2180
Global model norm: 1.9974936039026097.
Norm before scaling: 2.619559599429759. Distance: 1.4380775618241255
Total norm for 2 adversaries is: 2.619559599429759. distance: 1.4380775618241255
___Test Local_Simple poisoned: True, epoch: 32: Average loss: 3.8829, Accuracy: 2696/8991 (29.9855%)
time spent on training: 19.892378091812134
[foolsgold agg] training data poison_ratio: 0.39182926829268294  data num: [30, 33, 2803, 569, 1033, 768, 182, 34, 568, 2180]
[foolsgold agg] considering poison per batch poison_fraction: 0.39182926829268294
[foolsgold agg] wv: [0.13478055 0.86791135 0.96607906 0.         0.         0.13478055
 1.         1.         1.         0.86791135]
___Test Target_Simple poisoned: False, epoch: 32: Average loss: 1.6132, Accuracy: 6009/10000 (60.0900%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 32: Average loss: 1.5302, Accuracy: 6002/8991 (66.7556%)
Done in 57.91715908050537 sec.
Server Epoch:33 choose agents : [77, 57, 21, 67, 14, 97, 28, 22, 70, 93].
___Train Local_Simple,  epoch  33, local model 77, internal_epoch   1,  Average loss: 0.0122, Accuracy: 1285/1544 (83.2254%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 2.9867, Accuracy: 3472/10000 (34.7200%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  33, local model 57, internal_epoch   1,  Average loss: 0.0128, Accuracy: 1223/1437 (85.1079%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 4.0716, Accuracy: 2833/10000 (28.3300%), Attack Success Rate:10/10000(0.100)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 21, internal_epoch   1,  Average loss: 0.0077, Accuracy: 1897/2072 (91.5541%), train_poison_data_count: 2072
Global model norm: 2.00885623862216.
Norm before scaling: 2.8687113108966042. Distance: 1.8773148552317558
Total norm for 4 adversaries is: 2.8687113108966042. distance: 1.8773148552317558
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 3.9303, Accuracy: 2784/8991 (30.9643%)
___Train Local_Simple,  epoch  33, local model 67, internal_epoch   1,  Average loss: 0.0233, Accuracy: 398/568 (70.0704%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 3.0464, Accuracy: 2260/10000 (22.6000%), Attack Success Rate:15/10000(0.150)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 14, internal_epoch   1,  Average loss: 0.0296, Accuracy: 48/48 (100.0000%), train_poison_data_count: 48
Global model norm: 2.00885623862216.
Norm before scaling: 2.0129251066660148. Distance: 0.041221653247955
Total norm for 4 adversaries is: 2.0129251066660148. distance: 0.041221653247955
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 1.5252, Accuracy: 5876/8991 (65.3542%)
___Train Local_Simple,  epoch  33, local model 97, internal_epoch   1,  Average loss: 0.2248, Accuracy: 5/5 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 1.6299, Accuracy: 5246/10000 (52.4600%), Attack Success Rate:0/10000(0.000)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 28, internal_epoch   1,  Average loss: 0.0268, Accuracy: 177/237 (74.6835%), train_poison_data_count: 237
Global model norm: 2.00885623862216.
Norm before scaling: 2.086731605961486. Distance: 0.5021712723432267
Total norm for 4 adversaries is: 2.086731605961486. distance: 0.5021712723432267
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 2.0286, Accuracy: 1203/8991 (13.3800%)
poison local model 22 index 21 
poison_now
___PoisonTrain Local_Simple ,  epoch  33, local model 22, internal_epoch   1,  Average loss: 0.0485, Accuracy: 24/34 (70.5882%), train_poison_data_count: 34
Global model norm: 2.00885623862216.
Norm before scaling: 2.0117951906366125. Distance: 0.04116668585227926
Total norm for 4 adversaries is: 2.0117951906366125. distance: 0.04116668585227926
___Test Local_Simple poisoned: True, epoch: 33: Average loss: 1.5232, Accuracy: 5961/8991 (66.2996%)
___Train Local_Simple,  epoch  33, local model 70, internal_epoch   1,  Average loss: 0.0281, Accuracy: 340/569 (59.7540%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 2.1506, Accuracy: 2545/10000 (25.4500%), Attack Success Rate:17/10000(0.170)
___Train Local_Simple,  epoch  33, local model 93, internal_epoch   1,  Average loss: 0.0551, Accuracy: 17/30 (56.6667%)
___Test Local_Simple poisoned: False, epoch: 33: Average loss: 1.6022, Accuracy: 6043/10000 (60.4300%), Attack Success Rate:0/10000(0.000)
time spent on training: 21.076525688171387
[foolsgold agg] training data poison_ratio: 0.3653728606356968  data num: [1544, 1437, 2072, 568, 48, 5, 237, 34, 569, 30]
[foolsgold agg] considering poison per batch poison_fraction: 0.3653728606356968
[foolsgold agg] wv: [0.98033397 0.85846365 1.         0.98033397 1.         1.
 0.85846365 0.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 33: Average loss: 1.5726, Accuracy: 6644/10000 (66.4400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 33: Average loss: 1.4942, Accuracy: 6641/8991 (73.8628%)
Done in 59.19365310668945 sec.
Server Epoch:34 choose agents : [37, 49, 41, 50, 71, 60, 42, 83, 26, 48].
___Train Local_Simple,  epoch  34, local model 37, internal_epoch   1,  Average loss: 0.0162, Accuracy: 500/578 (86.5052%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 2.5569, Accuracy: 2747/10000 (27.4700%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  34, local model 49, internal_epoch   1,  Average loss: 0.0210, Accuracy: 179/196 (91.3265%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 1.8315, Accuracy: 2790/10000 (27.9000%), Attack Success Rate:4/10000(0.040)
___Train Local_Simple,  epoch  34, local model 41, internal_epoch   1,  Average loss: 0.0183, Accuracy: 374/509 (73.4774%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 3.3250, Accuracy: 1726/10000 (17.2600%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  34, local model 50, internal_epoch   1,  Average loss: 0.0181, Accuracy: 150/151 (99.3377%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 1.9296, Accuracy: 2760/10000 (27.6000%), Attack Success Rate:6/10000(0.060)
___Train Local_Simple,  epoch  34, local model 71, internal_epoch   1,  Average loss: 0.0287, Accuracy: 238/342 (69.5906%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 1.9788, Accuracy: 2465/10000 (24.6500%), Attack Success Rate:18/10000(0.180)
___Train Local_Simple,  epoch  34, local model 60, internal_epoch   1,  Average loss: 0.0180, Accuracy: 365/399 (91.4787%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 2.7856, Accuracy: 1870/10000 (18.7000%), Attack Success Rate:20/10000(0.200)
___Train Local_Simple,  epoch  34, local model 42, internal_epoch   1,  Average loss: 0.0376, Accuracy: 57/63 (90.4762%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 1.6497, Accuracy: 4223/10000 (42.2300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  34, local model 83, internal_epoch   1,  Average loss: 0.0155, Accuracy: 628/750 (83.7333%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 3.1552, Accuracy: 1967/10000 (19.6700%), Attack Success Rate:33/10000(0.330)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  34, local model 26, internal_epoch   1,  Average loss: 0.0079, Accuracy: 1186/1311 (90.4653%), train_poison_data_count: 1311
Global model norm: 2.0217136418901385.
Norm before scaling: 2.781793948355262. Distance: 1.7506717346337888
Total norm for 1 adversaries is: 2.781793948355262. distance: 1.7506717346337888
___Test Local_Simple poisoned: True, epoch: 34: Average loss: 5.5517, Accuracy: 1925/8991 (21.4103%)
___Train Local_Simple,  epoch  34, local model 48, internal_epoch   1,  Average loss: 0.0357, Accuracy: 96/128 (75.0000%)
___Test Local_Simple poisoned: False, epoch: 34: Average loss: 1.5991, Accuracy: 5458/10000 (54.5800%), Attack Success Rate:0/10000(0.000)
time spent on training: 17.14150309562683
[foolsgold agg] training data poison_ratio: 0.296137339055794  data num: [578, 196, 509, 151, 342, 399, 63, 750, 1311, 128]
[foolsgold agg] considering poison per batch poison_fraction: 0.296137339055794
[foolsgold agg] wv: [0.         1.         1.         1.         0.         0.
 0.29732401 0.47262335 0.29732401 0.        ]
___Test Target_Simple poisoned: False, epoch: 34: Average loss: 1.5656, Accuracy: 6582/10000 (65.8200%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 34: Average loss: 1.4838, Accuracy: 6588/8991 (73.2733%)
Done in 55.26210355758667 sec.
Server Epoch:35 choose agents : [50, 36, 53, 79, 33, 25, 15, 1, 65, 98].
___Train Local_Simple,  epoch  35, local model 50, internal_epoch   1,  Average loss: 0.0148, Accuracy: 150/151 (99.3377%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 1.8752, Accuracy: 3000/10000 (30.0000%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  35, local model 36, internal_epoch   1,  Average loss: 0.0157, Accuracy: 273/304 (89.8026%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 3.7306, Accuracy: 974/10000 (9.7400%), Attack Success Rate:7/10000(0.070)
___Train Local_Simple,  epoch  35, local model 53, internal_epoch   1,  Average loss: 0.0176, Accuracy: 427/456 (93.6404%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 2.5855, Accuracy: 2147/10000 (21.4700%), Attack Success Rate:23/10000(0.230)
___Train Local_Simple,  epoch  35, local model 79, internal_epoch   1,  Average loss: 0.0652, Accuracy: 19/25 (76.0000%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 1.5618, Accuracy: 6500/10000 (65.0000%), Attack Success Rate:0/10000(0.000)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 33, internal_epoch   1,  Average loss: 0.0195, Accuracy: 515/644 (79.9689%), train_poison_data_count: 644
Global model norm: 2.0272163836210795.
Norm before scaling: 2.3743497058618637. Distance: 1.0315066509503925
Total norm for 4 adversaries is: 2.3743497058618637. distance: 1.0315066509503925
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 3.2313, Accuracy: 2087/8991 (23.2121%)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 25, internal_epoch   1,  Average loss: 0.0371, Accuracy: 89/128 (69.5312%), train_poison_data_count: 128
Global model norm: 2.0272163836210795.
Norm before scaling: 2.0455933263688473. Distance: 0.1495613357169445
Total norm for 4 adversaries is: 2.0455933263688473. distance: 0.1495613357169445
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 1.4474, Accuracy: 6659/8991 (74.0630%)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 15, internal_epoch   1,  Average loss: 0.0174, Accuracy: 813/1033 (78.7028%), train_poison_data_count: 1033
Global model norm: 2.0272163836210795.
Norm before scaling: 2.635901475625157. Distance: 1.4551417804081763
Total norm for 4 adversaries is: 2.635901475625157. distance: 1.4551417804081763
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 3.0183, Accuracy: 3477/8991 (38.6720%)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  35, local model 1, internal_epoch   1,  Average loss: 0.0391, Accuracy: 56/84 (66.6667%), train_poison_data_count: 84
Global model norm: 2.0272163836210795.
Norm before scaling: 2.0357524562306972. Distance: 0.08597392155717419
Total norm for 4 adversaries is: 2.0357524562306972. distance: 0.08597392155717419
___Test Local_Simple poisoned: True, epoch: 35: Average loss: 1.4776, Accuracy: 6572/8991 (73.0953%)
___Train Local_Simple,  epoch  35, local model 65, internal_epoch   1,  Average loss: 0.0116, Accuracy: 1138/1326 (85.8220%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 3.4087, Accuracy: 2545/10000 (25.4500%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  35, local model 98, internal_epoch   1,  Average loss: 0.1800, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 35: Average loss: 1.5639, Accuracy: 6354/10000 (63.5400%), Attack Success Rate:0/10000(0.000)
time spent on training: 19.32258939743042
[foolsgold agg] training data poison_ratio: 0.45441424103921096  data num: [151, 304, 456, 25, 644, 128, 1033, 84, 1326, 6]
[foolsgold agg] considering poison per batch poison_fraction: 0.4544142410392109
[foolsgold agg] wv: [1.         0.         0.45257674 0.         0.08573897 1.
 0.         0.08573897 0.         0.45257674]
___Test Target_Simple poisoned: False, epoch: 35: Average loss: 1.5628, Accuracy: 6495/10000 (64.9500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 35: Average loss: 1.4792, Accuracy: 6495/8991 (72.2389%)
Done in 57.40354776382446 sec.
Server Epoch:36 choose agents : [82, 4, 79, 32, 47, 44, 89, 48, 70, 77].
___Train Local_Simple,  epoch  36, local model 82, internal_epoch   1,  Average loss: 0.0350, Accuracy: 88/114 (77.1930%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 1.6003, Accuracy: 5409/10000 (54.0900%), Attack Success Rate:0/10000(0.000)
poison local model 4 index 3 
poison_now
___PoisonTrain Local_Simple ,  epoch  36, local model 4, internal_epoch   1,  Average loss: 0.0156, Accuracy: 404/463 (87.2570%), train_poison_data_count: 463
Global model norm: 2.0306260544482706.
Norm before scaling: 2.3621910417966485. Distance: 1.167482306695542
Total norm for 2 adversaries is: 2.3621910417966485. distance: 1.167482306695542
___Test Local_Simple poisoned: True, epoch: 36: Average loss: 5.3013, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  36, local model 79, internal_epoch   1,  Average loss: 0.0661, Accuracy: 18/25 (72.0000%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 1.5577, Accuracy: 6483/10000 (64.8300%), Attack Success Rate:0/10000(0.000)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  36, local model 32, internal_epoch   1,  Average loss: 0.0518, Accuracy: 26/28 (92.8571%), train_poison_data_count: 28
Global model norm: 2.0306260544482706.
Norm before scaling: 2.034714898048154. Distance: 0.05238492070719801
Total norm for 2 adversaries is: 2.034714898048154. distance: 0.05238492070719801
___Test Local_Simple poisoned: True, epoch: 36: Average loss: 1.4840, Accuracy: 5860/8991 (65.1763%)
___Train Local_Simple,  epoch  36, local model 47, internal_epoch   1,  Average loss: 0.0092, Accuracy: 2228/2519 (88.4478%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 3.1767, Accuracy: 3695/10000 (36.9500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  36, local model 44, internal_epoch   1,  Average loss: 0.0398, Accuracy: 18/47 (38.2979%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 1.5540, Accuracy: 6751/10000 (67.5100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  36, local model 89, internal_epoch   1,  Average loss: 0.0494, Accuracy: 35/69 (50.7246%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 1.5410, Accuracy: 6391/10000 (63.9100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  36, local model 48, internal_epoch   1,  Average loss: 0.0365, Accuracy: 90/128 (70.3125%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 1.5788, Accuracy: 5763/10000 (57.6300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  36, local model 70, internal_epoch   1,  Average loss: 0.0274, Accuracy: 379/569 (66.6081%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 2.1819, Accuracy: 2161/10000 (21.6100%), Attack Success Rate:25/10000(0.250)
___Train Local_Simple,  epoch  36, local model 77, internal_epoch   1,  Average loss: 0.0116, Accuracy: 1318/1544 (85.3627%)
___Test Local_Simple poisoned: False, epoch: 36: Average loss: 2.9696, Accuracy: 3447/10000 (34.4700%), Attack Success Rate:0/10000(0.000)
time spent on training: 20.01920199394226
[foolsgold agg] training data poison_ratio: 0.08917544496912459  data num: [114, 463, 25, 28, 2519, 47, 69, 128, 569, 1544]
[foolsgold agg] considering poison per batch poison_fraction: 0.08917544496912459
[foolsgold agg] wv: [0.50701858 0.         1.         1.         0.36358341 1.
 0.         0.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 36: Average loss: 1.5536, Accuracy: 6668/10000 (66.6800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 36: Average loss: 1.4653, Accuracy: 6680/8991 (74.2965%)
Done in 58.00945711135864 sec.
Server Epoch:37 choose agents : [27, 30, 33, 41, 5, 52, 84, 43, 62, 18].
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 27, internal_epoch   1,  Average loss: 0.0127, Accuracy: 599/678 (88.3481%), train_poison_data_count: 678
Global model norm: 2.035709474314116.
Norm before scaling: 2.381350910121188. Distance: 1.0963708267697887
Total norm for 5 adversaries is: 2.381350910121188. distance: 1.0963708267697887
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 4.0720, Accuracy: 1011/8991 (11.2446%)
poison local model 30 index 29 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 30, internal_epoch   1,  Average loss: 0.0158, Accuracy: 680/818 (83.1296%), train_poison_data_count: 818
Global model norm: 2.035709474314116.
Norm before scaling: 2.545346415687753. Distance: 1.3108586538835627
Total norm for 5 adversaries is: 2.545346415687753. distance: 1.3108586538835627
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 4.0598, Accuracy: 2772/8991 (30.8308%)
poison local model 33 index 32 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 33, internal_epoch   1,  Average loss: 0.0191, Accuracy: 522/644 (81.0559%), train_poison_data_count: 644
Global model norm: 2.035709474314116.
Norm before scaling: 2.3832811238721447. Distance: 1.0368795194061733
Total norm for 5 adversaries is: 2.3832811238721447. distance: 1.0368795194061733
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 3.2885, Accuracy: 1993/8991 (22.1666%)
___Train Local_Simple,  epoch  37, local model 41, internal_epoch   1,  Average loss: 0.0173, Accuracy: 393/509 (77.2102%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 3.4169, Accuracy: 1652/10000 (16.5200%), Attack Success Rate:30/10000(0.300)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 5, internal_epoch   1,  Average loss: 0.0136, Accuracy: 916/1046 (87.5717%), train_poison_data_count: 1046
Global model norm: 2.035709474314116.
Norm before scaling: 2.5109861263558804. Distance: 1.3882109015076993
Total norm for 5 adversaries is: 2.5109861263558804. distance: 1.3882109015076993
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 5.9703, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  37, local model 52, internal_epoch   1,  Average loss: 0.0080, Accuracy: 661/705 (93.7589%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 6.6137, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  37, local model 84, internal_epoch   1,  Average loss: 0.0736, Accuracy: 8/29 (27.5862%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 1.5370, Accuracy: 6670/10000 (66.7000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  37, local model 43, internal_epoch   1,  Average loss: 0.2097, Accuracy: 5/6 (83.3333%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 1.5559, Accuracy: 6540/10000 (65.4000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  37, local model 62, internal_epoch   1,  Average loss: 0.7499, Accuracy: 1/2 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 37: Average loss: 1.5532, Accuracy: 6629/10000 (66.2900%), Attack Success Rate:0/10000(0.000)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  37, local model 18, internal_epoch   1,  Average loss: 0.0302, Accuracy: 175/264 (66.2879%), train_poison_data_count: 264
Global model norm: 2.035709474314116.
Norm before scaling: 2.1328840418404136. Distance: 0.5455476729228611
Total norm for 5 adversaries is: 2.1328840418404136. distance: 0.5455476729228611
___Test Local_Simple poisoned: True, epoch: 37: Average loss: 2.1833, Accuracy: 950/8991 (10.5661%)
time spent on training: 19.4519259929657
[foolsgold agg] training data poison_ratio: 0.7338864071474155  data num: [678, 818, 644, 509, 1046, 705, 29, 6, 2, 264]
[foolsgold agg] considering poison per batch poison_fraction: 0.7338864071474156
[foolsgold agg] wv: [0. 0. 0. 0. 0. 1. 1. 1. 1. 0.]
___Test Target_Simple poisoned: False, epoch: 37: Average loss: 1.5474, Accuracy: 6776/10000 (67.7600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 37: Average loss: 1.4606, Accuracy: 6792/8991 (75.5422%)
Done in 57.510072231292725 sec.
Server Epoch:38 choose agents : [39, 29, 87, 78, 53, 83, 19, 45, 52, 17].
___Train Local_Simple,  epoch  38, local model 39, internal_epoch   1,  Average loss: 0.0094, Accuracy: 1142/1259 (90.7069%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 3.4745, Accuracy: 1872/10000 (18.7200%), Attack Success Rate:38/10000(0.380)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  38, local model 29, internal_epoch   1,  Average loss: 0.0116, Accuracy: 1092/1232 (88.6364%), train_poison_data_count: 1232
Global model norm: 2.037019956240985.
Norm before scaling: 2.3930944516216495. Distance: 0.9860250781740838
Total norm for 3 adversaries is: 2.3930944516216495. distance: 0.9860250781740838
___Test Local_Simple poisoned: True, epoch: 38: Average loss: 2.7914, Accuracy: 1377/8991 (15.3153%)
___Train Local_Simple,  epoch  38, local model 87, internal_epoch   1,  Average loss: 0.0358, Accuracy: 31/33 (93.9394%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 1.5440, Accuracy: 6647/10000 (66.4700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  38, local model 78, internal_epoch   1,  Average loss: 0.0111, Accuracy: 2008/2324 (86.4028%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 2.6235, Accuracy: 3947/10000 (39.4700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  38, local model 53, internal_epoch   1,  Average loss: 0.0182, Accuracy: 425/456 (93.2018%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 2.5926, Accuracy: 2152/10000 (21.5200%), Attack Success Rate:38/10000(0.380)
___Train Local_Simple,  epoch  38, local model 83, internal_epoch   1,  Average loss: 0.0163, Accuracy: 624/750 (83.2000%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 3.1639, Accuracy: 1976/10000 (19.7600%), Attack Success Rate:23/10000(0.230)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  38, local model 19, internal_epoch   1,  Average loss: 0.0251, Accuracy: 187/244 (76.6393%), train_poison_data_count: 244
Global model norm: 2.037019956240985.
Norm before scaling: 2.111421962350132. Distance: 0.4501604410100217
Total norm for 3 adversaries is: 2.111421962350132. distance: 0.4501604410100217
___Test Local_Simple poisoned: True, epoch: 38: Average loss: 1.8553, Accuracy: 1792/8991 (19.9310%)
___Train Local_Simple,  epoch  38, local model 45, internal_epoch   1,  Average loss: 0.0177, Accuracy: 346/388 (89.1753%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 2.8583, Accuracy: 1716/10000 (17.1600%), Attack Success Rate:28/10000(0.280)
___Train Local_Simple,  epoch  38, local model 52, internal_epoch   1,  Average loss: 0.0076, Accuracy: 669/705 (94.8936%)
___Test Local_Simple poisoned: False, epoch: 38: Average loss: 6.2808, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:8/10000(0.080)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  38, local model 17, internal_epoch   1,  Average loss: 0.0270, Accuracy: 85/94 (90.4255%), train_poison_data_count: 94
Global model norm: 2.037019956240985.
Norm before scaling: 2.0500831214986652. Distance: 0.11812358746239118
Total norm for 3 adversaries is: 2.0500831214986652. distance: 0.11812358746239118
___Test Local_Simple poisoned: True, epoch: 38: Average loss: 1.4936, Accuracy: 4951/8991 (55.0662%)
time spent on training: 22.424219846725464
[foolsgold agg] training data poison_ratio: 0.20975283901135605  data num: [1259, 1232, 33, 2324, 456, 750, 244, 388, 705, 94]
[foolsgold agg] considering poison per batch poison_fraction: 0.20975283901135605
[foolsgold agg] wv: [1.         1.         0.50038484 0.85375564 0.50038484 1.
 0.         1.         0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 38: Average loss: 1.5268, Accuracy: 6697/10000 (66.9700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 38: Average loss: 1.4355, Accuracy: 6705/8991 (74.5746%)
Done in 60.40547013282776 sec.
Server Epoch:39 choose agents : [3, 34, 32, 5, 73, 14, 40, 88, 72, 13].
poison local model 3 index 2 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 3, internal_epoch   1,  Average loss: 0.0150, Accuracy: 819/1010 (81.0891%), train_poison_data_count: 1010
Global model norm: 2.0516843714545376.
Norm before scaling: 2.591813157123169. Distance: 1.2725139615655108
Total norm for 5 adversaries is: 2.591813157123169. distance: 1.2725139615655108
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 2.8537, Accuracy: 2973/8991 (33.0664%)
___Train Local_Simple,  epoch  39, local model 34, internal_epoch   1,  Average loss: 0.0161, Accuracy: 973/1203 (80.8811%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 2.5366, Accuracy: 3376/10000 (33.7600%), Attack Success Rate:0/10000(0.000)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 32, internal_epoch   1,  Average loss: 0.0527, Accuracy: 26/28 (92.8571%), train_poison_data_count: 28
Global model norm: 2.0516843714545376.
Norm before scaling: 2.0556341391082187. Distance: 0.052796413434148426
Total norm for 5 adversaries is: 2.0556341391082187. distance: 0.052796413434148426
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 1.4383, Accuracy: 6283/8991 (69.8810%)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 5, internal_epoch   1,  Average loss: 0.0124, Accuracy: 921/1046 (88.0497%), train_poison_data_count: 1046
Global model norm: 2.0516843714545376.
Norm before scaling: 2.5575107291584804. Distance: 1.4486037437728712
Total norm for 5 adversaries is: 2.5575107291584804. distance: 1.4486037437728712
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 6.1757, Accuracy: 892/8991 (9.9210%)
___Train Local_Simple,  epoch  39, local model 73, internal_epoch   1,  Average loss: 0.0098, Accuracy: 1065/1205 (88.3817%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 4.1759, Accuracy: 1738/10000 (17.3800%), Attack Success Rate:21/10000(0.210)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 14, internal_epoch   1,  Average loss: 0.0272, Accuracy: 48/48 (100.0000%), train_poison_data_count: 48
Global model norm: 2.0516843714545376.
Norm before scaling: 2.055985537511522. Distance: 0.03940026464713025
Total norm for 5 adversaries is: 2.055985537511522. distance: 0.03940026464713025
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 1.4322, Accuracy: 6563/8991 (72.9952%)
___Train Local_Simple,  epoch  39, local model 40, internal_epoch   1,  Average loss: 0.0230, Accuracy: 273/436 (62.6147%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 2.5829, Accuracy: 1853/10000 (18.5300%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  39, local model 88, internal_epoch   1,  Average loss: 0.0327, Accuracy: 69/96 (71.8750%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 1.5512, Accuracy: 5600/10000 (56.0000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  39, local model 72, internal_epoch   1,  Average loss: 0.1351, Accuracy: 8/10 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 39: Average loss: 1.5230, Accuracy: 6590/10000 (65.9000%), Attack Success Rate:0/10000(0.000)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  39, local model 13, internal_epoch   1,  Average loss: 0.3669, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 2.0516843714545376.
Norm before scaling: 2.0536990961231374. Distance: 0.043941734751127
Total norm for 5 adversaries is: 2.0536990961231374. distance: 0.043941734751127
___Test Local_Simple poisoned: True, epoch: 39: Average loss: 1.4282, Accuracy: 6952/8991 (77.3218%)
time spent on training: 21.285454034805298
[foolsgold agg] training data poison_ratio: 0.42009042657755064  data num: [1010, 1203, 28, 1046, 1205, 48, 436, 96, 10, 5]
[foolsgold agg] considering poison per batch poison_fraction: 0.4200904265775506
[foolsgold agg] wv: [1.         1.         1.         0.04367802 0.04367802 1.
 1.         1.         1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 39: Average loss: 1.5078, Accuracy: 6806/10000 (68.0600%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 39: Average loss: 1.4191, Accuracy: 6810/8991 (75.7424%)
Done in 59.26219201087952 sec.
Server Epoch:40 choose agents : [12, 23, 87, 98, 51, 83, 52, 90, 71, 11].
poison local model 12 index 11 
poison_now
___PoisonTrain Local_Simple ,  epoch  40, local model 12, internal_epoch   1,  Average loss: 0.0141, Accuracy: 593/648 (91.5123%), train_poison_data_count: 648
Global model norm: 2.061539050413107.
Norm before scaling: 2.390727122001798. Distance: 0.9235361295075566
Total norm for 3 adversaries is: 2.390727122001798. distance: 0.9235361295075566
___Test Local_Simple poisoned: True, epoch: 40: Average loss: 2.7671, Accuracy: 2824/8991 (31.4092%)
poison local model 23 index 22 
poison_now
___PoisonTrain Local_Simple ,  epoch  40, local model 23, internal_epoch   1,  Average loss: 0.0125, Accuracy: 408/428 (95.3271%), train_poison_data_count: 428
Global model norm: 2.061539050413107.
Norm before scaling: 2.2582953441657523. Distance: 0.6908403440617468
Total norm for 3 adversaries is: 2.2582953441657523. distance: 0.6908403440617468
___Test Local_Simple poisoned: True, epoch: 40: Average loss: 2.4086, Accuracy: 1955/8991 (21.7440%)
___Train Local_Simple,  epoch  40, local model 87, internal_epoch   1,  Average loss: 0.0337, Accuracy: 31/33 (93.9394%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 1.5051, Accuracy: 6694/10000 (66.9400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  40, local model 98, internal_epoch   1,  Average loss: 0.1630, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 1.5083, Accuracy: 6562/10000 (65.6200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  40, local model 51, internal_epoch   1,  Average loss: 0.0153, Accuracy: 226/259 (87.2587%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 1.8739, Accuracy: 3217/10000 (32.1700%), Attack Success Rate:1/10000(0.010)
___Train Local_Simple,  epoch  40, local model 83, internal_epoch   1,  Average loss: 0.0151, Accuracy: 635/750 (84.6667%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 2.9633, Accuracy: 1985/10000 (19.8500%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch  40, local model 52, internal_epoch   1,  Average loss: 0.0073, Accuracy: 678/705 (96.1702%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 6.3083, Accuracy: 1032/10000 (10.3200%), Attack Success Rate:10/10000(0.100)
___Train Local_Simple,  epoch  40, local model 90, internal_epoch   1,  Average loss: 0.0104, Accuracy: 686/768 (89.3229%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 3.9896, Accuracy: 1516/10000 (15.1600%), Attack Success Rate:22/10000(0.220)
___Train Local_Simple,  epoch  40, local model 71, internal_epoch   1,  Average loss: 0.0280, Accuracy: 240/342 (70.1754%)
___Test Local_Simple poisoned: False, epoch: 40: Average loss: 1.8661, Accuracy: 3041/10000 (30.4100%), Attack Success Rate:5/10000(0.050)
poison local model 11 index 10 
poison_now
___PoisonTrain Local_Simple ,  epoch  40, local model 11, internal_epoch   1,  Average loss: 0.0356, Accuracy: 61/84 (72.6190%), train_poison_data_count: 84
Global model norm: 2.061539050413107.
Norm before scaling: 2.072094765539624. Distance: 0.10647675286131238
Total norm for 3 adversaries is: 2.072094765539624. distance: 0.10647675286131238
___Test Local_Simple poisoned: True, epoch: 40: Average loss: 1.4268, Accuracy: 6063/8991 (67.4341%)
time spent on training: 19.399689197540283
[foolsgold agg] training data poison_ratio: 0.28834203330847624  data num: [648, 428, 33, 6, 259, 750, 705, 768, 342, 84]
[foolsgold agg] considering poison per batch poison_fraction: 0.28834203330847624
[foolsgold agg] wv: [1.         0.         1.         0.         1.         1.
 0.         0.34543523 1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 40: Average loss: 1.5001, Accuracy: 6754/10000 (67.5400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 40: Average loss: 1.4048, Accuracy: 6759/8991 (75.1752%)
Done in 57.442994117736816 sec.
Server Epoch:41 choose agents : [51, 28, 20, 95, 83, 18, 55, 42, 29, 46].
___Train Local_Simple,  epoch  41, local model 51, internal_epoch   1,  Average loss: 0.0141, Accuracy: 228/259 (88.0309%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 1.8395, Accuracy: 3394/10000 (33.9400%), Attack Success Rate:3/10000(0.030)
poison local model 28 index 27 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 28, internal_epoch   1,  Average loss: 0.0230, Accuracy: 192/237 (81.0127%), train_poison_data_count: 237
Global model norm: 2.070866694140084.
Norm before scaling: 2.147847819465969. Distance: 0.44682705295206165
Total norm for 4 adversaries is: 2.147847819465969. distance: 0.44682705295206165
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 1.8936, Accuracy: 1818/8991 (20.2202%)
poison local model 20 index 19 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 20, internal_epoch   1,  Average loss: 0.0037, Accuracy: 2104/2180 (96.5138%), train_poison_data_count: 2180
Global model norm: 2.070866694140084.
Norm before scaling: 2.654595611580594. Distance: 1.3451332690641749
Total norm for 4 adversaries is: 2.654595611580594. distance: 1.3451332690641749
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 3.6860, Accuracy: 2884/8991 (32.0765%)
___Train Local_Simple,  epoch  41, local model 95, internal_epoch   1,  Average loss: 0.0349, Accuracy: 27/29 (93.1034%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 1.5028, Accuracy: 6520/10000 (65.2000%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  41, local model 83, internal_epoch   1,  Average loss: 0.0152, Accuracy: 633/750 (84.4000%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 3.0404, Accuracy: 1976/10000 (19.7600%), Attack Success Rate:23/10000(0.230)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 18, internal_epoch   1,  Average loss: 0.0295, Accuracy: 191/264 (72.3485%), train_poison_data_count: 264
Global model norm: 2.070866694140084.
Norm before scaling: 2.166354731577579. Distance: 0.5429580742314767
Total norm for 4 adversaries is: 2.166354731577579. distance: 0.5429580742314767
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 2.0701, Accuracy: 1197/8991 (13.3133%)
___Train Local_Simple,  epoch  41, local model 55, internal_epoch   1,  Average loss: 0.0118, Accuracy: 2441/2803 (87.0853%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 2.9357, Accuracy: 4545/10000 (45.4500%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  41, local model 42, internal_epoch   1,  Average loss: 0.0398, Accuracy: 56/63 (88.8889%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 1.5653, Accuracy: 4855/10000 (48.5500%), Attack Success Rate:0/10000(0.000)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  41, local model 29, internal_epoch   1,  Average loss: 0.0104, Accuracy: 1096/1232 (88.9610%), train_poison_data_count: 1232
Global model norm: 2.070866694140084.
Norm before scaling: 2.4424862845434987. Distance: 1.002454665626355
Total norm for 4 adversaries is: 2.4424862845434987. distance: 1.002454665626355
___Test Local_Simple poisoned: True, epoch: 41: Average loss: 2.7932, Accuracy: 1487/8991 (16.5388%)
___Train Local_Simple,  epoch  41, local model 46, internal_epoch   1,  Average loss: 0.0320, Accuracy: 169/310 (54.5161%)
___Test Local_Simple poisoned: False, epoch: 41: Average loss: 1.9174, Accuracy: 2846/10000 (28.4600%), Attack Success Rate:6/10000(0.060)
time spent on training: 22.180468797683716
[foolsgold agg] training data poison_ratio: 0.48148148148148145  data num: [259, 237, 2180, 29, 750, 264, 2803, 63, 1232, 310]
[foolsgold agg] considering poison per batch poison_fraction: 0.48148148148148145
[foolsgold agg] wv: [0.00508226 1.         0.00508226 1.         1.         1.
 1.         0.87701115 0.87701115 1.        ]
___Test Target_Simple poisoned: False, epoch: 41: Average loss: 1.4792, Accuracy: 6778/10000 (67.7800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 41: Average loss: 1.3854, Accuracy: 6780/8991 (75.4087%)
Done in 59.97020506858826 sec.
Server Epoch:42 choose agents : [87, 73, 89, 48, 81, 10, 92, 62, 26, 29].
___Train Local_Simple,  epoch  42, local model 87, internal_epoch   1,  Average loss: 0.0327, Accuracy: 31/33 (93.9394%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.4763, Accuracy: 6686/10000 (66.8600%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  42, local model 73, internal_epoch   1,  Average loss: 0.0097, Accuracy: 1048/1205 (86.9710%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 4.1700, Accuracy: 1735/10000 (17.3500%), Attack Success Rate:33/10000(0.330)
___Train Local_Simple,  epoch  42, local model 89, internal_epoch   1,  Average loss: 0.0478, Accuracy: 36/69 (52.1739%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.4557, Accuracy: 6711/10000 (67.1100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  42, local model 48, internal_epoch   1,  Average loss: 0.0350, Accuracy: 92/128 (71.8750%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.4938, Accuracy: 6288/10000 (62.8800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  42, local model 81, internal_epoch   1,  Average loss: 0.0428, Accuracy: 57/68 (83.8235%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.4698, Accuracy: 6889/10000 (68.8900%), Attack Success Rate:0/10000(0.000)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  42, local model 10, internal_epoch   1,  Average loss: 0.0144, Accuracy: 594/688 (86.3372%), train_poison_data_count: 688
Global model norm: 2.0854193225987228.
Norm before scaling: 2.472873479331584. Distance: 1.1077447114550043
Total norm for 3 adversaries is: 2.472873479331584. distance: 1.1077447114550043
___Test Local_Simple poisoned: True, epoch: 42: Average loss: 3.4248, Accuracy: 1909/8991 (21.2323%)
___Train Local_Simple,  epoch  42, local model 92, internal_epoch   1,  Average loss: 0.0221, Accuracy: 179/202 (88.6139%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 2.1098, Accuracy: 1840/10000 (18.4000%), Attack Success Rate:34/10000(0.340)
___Train Local_Simple,  epoch  42, local model 62, internal_epoch   1,  Average loss: 0.7372, Accuracy: 1/2 (50.0000%)
___Test Local_Simple poisoned: False, epoch: 42: Average loss: 1.4768, Accuracy: 6804/10000 (68.0400%), Attack Success Rate:0/10000(0.000)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  42, local model 26, internal_epoch   1,  Average loss: 0.0072, Accuracy: 1215/1311 (92.6773%), train_poison_data_count: 1311
Global model norm: 2.0854193225987228.
Norm before scaling: 2.794820105234643. Distance: 1.666631443923055
Total norm for 3 adversaries is: 2.794820105234643. distance: 1.666631443923055
___Test Local_Simple poisoned: True, epoch: 42: Average loss: 5.2390, Accuracy: 1928/8991 (21.4437%)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  42, local model 29, internal_epoch   1,  Average loss: 0.0102, Accuracy: 1095/1232 (88.8799%), train_poison_data_count: 1232
Global model norm: 2.0854193225987228.
Norm before scaling: 2.4483761836336493. Distance: 0.9839356062412362
Total norm for 3 adversaries is: 2.4483761836336493. distance: 0.9839356062412362
___Test Local_Simple poisoned: True, epoch: 42: Average loss: 2.7922, Accuracy: 1480/8991 (16.4609%)
time spent on training: 18.0919189453125
[foolsgold agg] training data poison_ratio: 0.6543134872417983  data num: [33, 1205, 69, 128, 68, 688, 202, 2, 1311, 1232]
[foolsgold agg] considering poison per batch poison_fraction: 0.6543134872417983
[foolsgold agg] wv: [1.        1.        0.6259167 1.        0.        1.        0.
 0.6259167 1.        1.       ]
___Test Target_Simple poisoned: False, epoch: 42: Average loss: 1.4694, Accuracy: 6858/10000 (68.5800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 42: Average loss: 1.3696, Accuracy: 6851/8991 (76.1984%)
Done in 55.910990476608276 sec.
Server Epoch:43 choose agents : [38, 78, 26, 18, 72, 75, 93, 39, 44, 90].
___Train Local_Simple,  epoch  43, local model 38, internal_epoch   1,  Average loss: 0.0204, Accuracy: 177/179 (98.8827%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 1.5686, Accuracy: 4493/10000 (44.9300%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  43, local model 78, internal_epoch   1,  Average loss: 0.0108, Accuracy: 2019/2324 (86.8761%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 2.5443, Accuracy: 3958/10000 (39.5800%), Attack Success Rate:0/10000(0.000)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  43, local model 26, internal_epoch   1,  Average loss: 0.0070, Accuracy: 1219/1311 (92.9825%), train_poison_data_count: 1311
Global model norm: 2.095594134878509.
Norm before scaling: 2.7758747406108806. Distance: 1.618038893228655
Total norm for 2 adversaries is: 2.7758747406108806. distance: 1.618038893228655
___Test Local_Simple poisoned: True, epoch: 43: Average loss: 5.2053, Accuracy: 1926/8991 (21.4214%)
poison local model 18 index 17 
poison_now
___PoisonTrain Local_Simple ,  epoch  43, local model 18, internal_epoch   1,  Average loss: 0.0284, Accuracy: 193/264 (73.1061%), train_poison_data_count: 264
Global model norm: 2.095594134878509.
Norm before scaling: 2.1897224036083895. Distance: 0.5361482934158516
Total norm for 2 adversaries is: 2.1897224036083895. distance: 0.5361482934158516
___Test Local_Simple poisoned: True, epoch: 43: Average loss: 2.0653, Accuracy: 1154/8991 (12.8351%)
___Train Local_Simple,  epoch  43, local model 72, internal_epoch   1,  Average loss: 0.1271, Accuracy: 8/10 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 1.4667, Accuracy: 6767/10000 (67.6700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  43, local model 75, internal_epoch   1,  Average loss: 0.0099, Accuracy: 466/497 (93.7626%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 4.0732, Accuracy: 1050/10000 (10.5000%), Attack Success Rate:5/10000(0.050)
___Train Local_Simple,  epoch  43, local model 93, internal_epoch   1,  Average loss: 0.0450, Accuracy: 25/30 (83.3333%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 1.4662, Accuracy: 6739/10000 (67.3900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  43, local model 39, internal_epoch   1,  Average loss: 0.0081, Accuracy: 1151/1259 (91.4218%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 3.2607, Accuracy: 1879/10000 (18.7900%), Attack Success Rate:30/10000(0.300)
___Train Local_Simple,  epoch  43, local model 44, internal_epoch   1,  Average loss: 0.0351, Accuracy: 26/47 (55.3191%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 1.4666, Accuracy: 6949/10000 (69.4900%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  43, local model 90, internal_epoch   1,  Average loss: 0.0102, Accuracy: 674/768 (87.7604%)
___Test Local_Simple poisoned: False, epoch: 43: Average loss: 3.7760, Accuracy: 1509/10000 (15.0900%), Attack Success Rate:25/10000(0.250)
time spent on training: 20.961028575897217
[foolsgold agg] training data poison_ratio: 0.2354612049633727  data num: [179, 2324, 1311, 264, 10, 497, 30, 1259, 47, 768]
[foolsgold agg] considering poison per batch poison_fraction: 0.2354612049633727
[foolsgold agg] wv: [0.67661215 0.67661215 0.         1.         0.         0.86267211
 0.         1.         0.         0.67848164]
___Test Target_Simple poisoned: False, epoch: 43: Average loss: 1.4636, Accuracy: 6640/10000 (66.4000%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 43: Average loss: 1.3614, Accuracy: 6634/8991 (73.7849%)
Done in 58.80725598335266 sec.
Server Epoch:44 choose agents : [31, 1, 38, 9, 6, 19, 65, 66, 73, 15].
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 31, internal_epoch   1,  Average loss: 0.0103, Accuracy: 1626/1839 (88.4176%), train_poison_data_count: 1839
Global model norm: 2.1066666912529537.
Norm before scaling: 2.907737925299342. Distance: 1.6662744855405216
Total norm for 6 adversaries is: 2.907737925299342. distance: 1.6662744855405216
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 3.1044, Accuracy: 2775/8991 (30.8642%)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 1, internal_epoch   1,  Average loss: 0.0349, Accuracy: 55/84 (65.4762%), train_poison_data_count: 84
Global model norm: 2.1066666912529537.
Norm before scaling: 2.1157848032969477. Distance: 0.08389829504674286
Total norm for 6 adversaries is: 2.1157848032969477. distance: 0.08389829504674286
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 1.3611, Accuracy: 6638/8991 (73.8294%)
___Train Local_Simple,  epoch  44, local model 38, internal_epoch   1,  Average loss: 0.0194, Accuracy: 178/179 (99.4413%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 1.5618, Accuracy: 4545/10000 (45.4500%), Attack Success Rate:0/10000(0.000)
poison local model 9 index 8 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 9, internal_epoch   1,  Average loss: 0.0260, Accuracy: 215/263 (81.7490%), train_poison_data_count: 263
Global model norm: 2.1066666912529537.
Norm before scaling: 2.2050827742629795. Distance: 0.5223680360142283
Total norm for 6 adversaries is: 2.2050827742629795. distance: 0.5223680360142283
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 2.0544, Accuracy: 2189/8991 (24.3466%)
poison local model 6 index 5 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 6, internal_epoch   1,  Average loss: 0.0094, Accuracy: 1750/1982 (88.2947%), train_poison_data_count: 1982
Global model norm: 2.1066666912529537.
Norm before scaling: 2.8630953906680183. Distance: 1.634293464100171
Total norm for 6 adversaries is: 2.8630953906680183. distance: 1.634293464100171
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 4.1368, Accuracy: 2450/8991 (27.2495%)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 19, internal_epoch   1,  Average loss: 0.0255, Accuracy: 168/244 (68.8525%), train_poison_data_count: 244
Global model norm: 2.1066666912529537.
Norm before scaling: 2.176404771203853. Distance: 0.4521969631182935
Total norm for 6 adversaries is: 2.176404771203853. distance: 0.4521969631182935
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 1.7188, Accuracy: 2280/8991 (25.3587%)
___Train Local_Simple,  epoch  44, local model 65, internal_epoch   1,  Average loss: 0.0104, Accuracy: 1144/1326 (86.2745%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 3.2932, Accuracy: 2496/10000 (24.9600%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch  44, local model 66, internal_epoch   1,  Average loss: 0.0114, Accuracy: 609/681 (89.4273%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 3.5398, Accuracy: 2018/10000 (20.1800%), Attack Success Rate:24/10000(0.240)
___Train Local_Simple,  epoch  44, local model 73, internal_epoch   1,  Average loss: 0.0093, Accuracy: 1063/1205 (88.2158%)
___Test Local_Simple poisoned: False, epoch: 44: Average loss: 4.1220, Accuracy: 1739/10000 (17.3900%), Attack Success Rate:34/10000(0.340)
poison local model 15 index 14 
poison_now
___PoisonTrain Local_Simple ,  epoch  44, local model 15, internal_epoch   1,  Average loss: 0.0168, Accuracy: 811/1033 (78.5092%), train_poison_data_count: 1033
Global model norm: 2.1066666912529537.
Norm before scaling: 2.682632029644735. Distance: 1.4231061530927975
Total norm for 6 adversaries is: 2.682632029644735. distance: 1.4231061530927975
___Test Local_Simple poisoned: True, epoch: 44: Average loss: 2.8843, Accuracy: 3463/8991 (38.5163%)
time spent on training: 23.26463770866394
[foolsgold agg] training data poison_ratio: 0.6162290629244002  data num: [1839, 84, 179, 263, 1982, 244, 1326, 681, 1205, 1033]
[foolsgold agg] considering poison per batch poison_fraction: 0.6162290629244002
[foolsgold agg] wv: [1.         0.         1.         0.         1.         0.03413914
 0.         1.         1.         0.        ]
___Test Target_Simple poisoned: False, epoch: 44: Average loss: 1.4560, Accuracy: 6668/10000 (66.6800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 44: Average loss: 1.3441, Accuracy: 6665/8991 (74.1297%)
Done in 61.15152716636658 sec.
Server Epoch:45 choose agents : [53, 75, 1, 37, 94, 51, 29, 39, 60, 5].
___Train Local_Simple,  epoch  45, local model 53, internal_epoch   1,  Average loss: 0.0155, Accuracy: 428/456 (93.8596%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 2.3509, Accuracy: 2253/10000 (22.5300%), Attack Success Rate:23/10000(0.230)
___Train Local_Simple,  epoch  45, local model 75, internal_epoch   1,  Average loss: 0.0091, Accuracy: 475/497 (95.5734%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 3.9770, Accuracy: 1101/10000 (11.0100%), Attack Success Rate:8/10000(0.080)
poison local model 1 index 0 
poison_now
___PoisonTrain Local_Simple ,  epoch  45, local model 1, internal_epoch   1,  Average loss: 0.0346, Accuracy: 58/84 (69.0476%), train_poison_data_count: 84
Global model norm: 2.119545612223271.
Norm before scaling: 2.1286551511178065. Distance: 0.08004675227358166
Total norm for 3 adversaries is: 2.1286551511178065. distance: 0.08004675227358166
___Test Local_Simple poisoned: True, epoch: 45: Average loss: 1.3439, Accuracy: 6626/8991 (73.6959%)
___Train Local_Simple,  epoch  45, local model 37, internal_epoch   1,  Average loss: 0.0150, Accuracy: 516/578 (89.2734%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 2.4274, Accuracy: 2750/10000 (27.5000%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  45, local model 94, internal_epoch   1,  Average loss: 0.0122, Accuracy: 576/607 (94.8929%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 2.8898, Accuracy: 1937/10000 (19.3700%), Attack Success Rate:32/10000(0.320)
___Train Local_Simple,  epoch  45, local model 51, internal_epoch   1,  Average loss: 0.0141, Accuracy: 233/259 (89.9614%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 1.7801, Accuracy: 3714/10000 (37.1400%), Attack Success Rate:0/10000(0.000)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  45, local model 29, internal_epoch   1,  Average loss: 0.0089, Accuracy: 1108/1232 (89.9351%), train_poison_data_count: 1232
Global model norm: 2.119545612223271.
Norm before scaling: 2.4680020128733435. Distance: 0.927012723026801
Total norm for 3 adversaries is: 2.4680020128733435. distance: 0.927012723026801
___Test Local_Simple poisoned: True, epoch: 45: Average loss: 2.7396, Accuracy: 1520/8991 (16.9058%)
___Train Local_Simple,  epoch  45, local model 39, internal_epoch   1,  Average loss: 0.0075, Accuracy: 1152/1259 (91.5012%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 3.3295, Accuracy: 1872/10000 (18.7200%), Attack Success Rate:29/10000(0.290)
___Train Local_Simple,  epoch  45, local model 60, internal_epoch   1,  Average loss: 0.0169, Accuracy: 358/399 (89.7243%)
___Test Local_Simple poisoned: False, epoch: 45: Average loss: 2.6070, Accuracy: 1869/10000 (18.6900%), Attack Success Rate:20/10000(0.200)
poison local model 5 index 4 
poison_now
___PoisonTrain Local_Simple ,  epoch  45, local model 5, internal_epoch   1,  Average loss: 0.0128, Accuracy: 932/1046 (89.1013%), train_poison_data_count: 1046
Global model norm: 2.119545612223271.
Norm before scaling: 2.5574985169288014. Distance: 1.3112872288076405
Total norm for 3 adversaries is: 2.5574985169288014. distance: 1.3112872288076405
___Test Local_Simple poisoned: True, epoch: 45: Average loss: 5.4078, Accuracy: 892/8991 (9.9210%)
time spent on training: 20.957619428634644
[foolsgold agg] training data poison_ratio: 0.3680847748168926  data num: [456, 497, 84, 578, 607, 259, 1232, 1259, 399, 1046]
[foolsgold agg] considering poison per batch poison_fraction: 0.3680847748168926
[foolsgold agg] wv: [0.         0.61909567 0.         0.         0.         1.
 0.61909567 0.         0.         0.        ]
___Test Target_Simple poisoned: False, epoch: 45: Average loss: 1.4585, Accuracy: 6535/10000 (65.3500%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 45: Average loss: 1.3439, Accuracy: 6527/8991 (72.5948%)
Done in 58.95560574531555 sec.
Server Epoch:46 choose agents : [75, 78, 14, 39, 7, 10, 40, 2, 68, 54].
___Train Local_Simple,  epoch  46, local model 75, internal_epoch   1,  Average loss: 0.0088, Accuracy: 479/497 (96.3783%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 3.8960, Accuracy: 1172/10000 (11.7200%), Attack Success Rate:15/10000(0.150)
___Train Local_Simple,  epoch  46, local model 78, internal_epoch   1,  Average loss: 0.0106, Accuracy: 2033/2324 (87.4785%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 2.3839, Accuracy: 4131/10000 (41.3100%), Attack Success Rate:0/10000(0.000)
poison local model 14 index 13 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 14, internal_epoch   1,  Average loss: 0.0241, Accuracy: 48/48 (100.0000%), train_poison_data_count: 48
Global model norm: 2.123430345535857.
Norm before scaling: 2.127887671144678. Distance: 0.036896162133346636
Total norm for 4 adversaries is: 2.127887671144678. distance: 0.036896162133346636
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 1.3421, Accuracy: 6425/8991 (71.4603%)
___Train Local_Simple,  epoch  46, local model 39, internal_epoch   1,  Average loss: 0.0083, Accuracy: 1162/1259 (92.2955%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 3.3486, Accuracy: 1872/10000 (18.7200%), Attack Success Rate:21/10000(0.210)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 7, internal_epoch   1,  Average loss: 0.0293, Accuracy: 76/86 (88.3721%), train_poison_data_count: 86
Global model norm: 2.123430345535857.
Norm before scaling: 2.135688268245128. Distance: 0.11711909363865854
Total norm for 4 adversaries is: 2.135688268245128. distance: 0.11711909363865854
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 1.3563, Accuracy: 5968/8991 (66.3775%)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 10, internal_epoch   1,  Average loss: 0.0139, Accuracy: 586/688 (85.1744%), train_poison_data_count: 688
Global model norm: 2.123430345535857.
Norm before scaling: 2.492562962294473. Distance: 1.0553294735832102
Total norm for 4 adversaries is: 2.492562962294473. distance: 1.0553294735832102
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 3.2161, Accuracy: 2032/8991 (22.6004%)
___Train Local_Simple,  epoch  46, local model 40, internal_epoch   1,  Average loss: 0.0235, Accuracy: 278/436 (63.7615%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 2.4785, Accuracy: 1845/10000 (18.4500%), Attack Success Rate:34/10000(0.340)
poison local model 2 index 1 
poison_now
___PoisonTrain Local_Simple ,  epoch  46, local model 2, internal_epoch   1,  Average loss: 0.0354, Accuracy: 79/119 (66.3866%), train_poison_data_count: 119
Global model norm: 2.123430345535857.
Norm before scaling: 2.14486730614176. Distance: 0.19726950575533284
Total norm for 4 adversaries is: 2.14486730614176. distance: 0.19726950575533284
___Test Local_Simple poisoned: True, epoch: 46: Average loss: 1.3625, Accuracy: 5740/8991 (63.8416%)
___Train Local_Simple,  epoch  46, local model 68, internal_epoch   1,  Average loss: 0.0090, Accuracy: 1417/1591 (89.0635%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 3.4238, Accuracy: 2461/10000 (24.6100%), Attack Success Rate:14/10000(0.140)
___Train Local_Simple,  epoch  46, local model 54, internal_epoch   1,  Average loss: 0.0352, Accuracy: 52/91 (57.1429%)
___Test Local_Simple poisoned: False, epoch: 46: Average loss: 1.4391, Accuracy: 6939/10000 (69.3900%), Attack Success Rate:0/10000(0.000)
time spent on training: 24.663174390792847
[foolsgold agg] training data poison_ratio: 0.1318111780361395  data num: [497, 2324, 48, 1259, 86, 688, 436, 119, 1591, 91]
[foolsgold agg] considering poison per batch poison_fraction: 0.1318111780361395
[foolsgold agg] wv: [1. 1. 1. 1. 1. 1. 1. 1. 1. 1.]
___Test Target_Simple poisoned: False, epoch: 46: Average loss: 1.4365, Accuracy: 6453/10000 (64.5300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 46: Average loss: 1.3273, Accuracy: 6445/8991 (71.6828%)
Done in 62.5347216129303 sec.
Server Epoch:47 choose agents : [94, 48, 82, 25, 26, 16, 7, 90, 68, 43].
___Train Local_Simple,  epoch  47, local model 94, internal_epoch   1,  Average loss: 0.0097, Accuracy: 578/607 (95.2224%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 2.9070, Accuracy: 1948/10000 (19.4800%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  47, local model 48, internal_epoch   1,  Average loss: 0.0329, Accuracy: 90/128 (70.3125%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 1.4526, Accuracy: 6148/10000 (61.4800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  47, local model 82, internal_epoch   1,  Average loss: 0.0338, Accuracy: 75/114 (65.7895%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 1.4455, Accuracy: 6301/10000 (63.0100%), Attack Success Rate:0/10000(0.000)
poison local model 25 index 24 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 25, internal_epoch   1,  Average loss: 0.0323, Accuracy: 95/128 (74.2188%), train_poison_data_count: 128
Global model norm: 2.140999754241544.
Norm before scaling: 2.161049518453873. Distance: 0.136219632664617
Total norm for 4 adversaries is: 2.161049518453873. distance: 0.136219632664617
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 1.3017, Accuracy: 6507/8991 (72.3724%)
poison local model 26 index 25 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 26, internal_epoch   1,  Average loss: 0.0072, Accuracy: 1213/1311 (92.5248%), train_poison_data_count: 1311
Global model norm: 2.140999754241544.
Norm before scaling: 2.810947752801879. Distance: 1.6090875757826502
Total norm for 4 adversaries is: 2.810947752801879. distance: 1.6090875757826502
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 5.0367, Accuracy: 1934/8991 (21.5104%)
poison local model 16 index 15 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 16, internal_epoch   1,  Average loss: 0.0124, Accuracy: 837/994 (84.2052%), train_poison_data_count: 994
Global model norm: 2.140999754241544.
Norm before scaling: 2.5313665104177816. Distance: 0.9154489549774534
Total norm for 4 adversaries is: 2.5313665104177816. distance: 0.9154489549774534
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 1.8614, Accuracy: 3513/8991 (39.0724%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  47, local model 7, internal_epoch   1,  Average loss: 0.0287, Accuracy: 74/86 (86.0465%), train_poison_data_count: 86
Global model norm: 2.140999754241544.
Norm before scaling: 2.1532403701855665. Distance: 0.11483016079670683
Total norm for 4 adversaries is: 2.1532403701855665. distance: 0.11483016079670683
___Test Local_Simple poisoned: True, epoch: 47: Average loss: 1.3387, Accuracy: 5936/8991 (66.0216%)
___Train Local_Simple,  epoch  47, local model 90, internal_epoch   1,  Average loss: 0.0095, Accuracy: 693/768 (90.2344%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 3.6528, Accuracy: 1558/10000 (15.5800%), Attack Success Rate:31/10000(0.310)
___Train Local_Simple,  epoch  47, local model 68, internal_epoch   1,  Average loss: 0.0087, Accuracy: 1414/1591 (88.8749%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 3.2756, Accuracy: 2610/10000 (26.1000%), Attack Success Rate:8/10000(0.080)
___Train Local_Simple,  epoch  47, local model 43, internal_epoch   1,  Average loss: 0.1920, Accuracy: 4/6 (66.6667%)
___Test Local_Simple poisoned: False, epoch: 47: Average loss: 1.4369, Accuracy: 6456/10000 (64.5600%), Attack Success Rate:0/10000(0.000)
time spent on training: 21.119446277618408
[foolsgold agg] training data poison_ratio: 0.43938601081458223  data num: [607, 128, 114, 128, 1311, 994, 86, 768, 1591, 6]
[foolsgold agg] considering poison per batch poison_fraction: 0.43938601081458223
[foolsgold agg] wv: [1.         1.         1.         0.81783508 0.81783508 1.
 0.38189774 0.38189774 1.         1.        ]
___Test Target_Simple poisoned: False, epoch: 47: Average loss: 1.4258, Accuracy: 6457/10000 (64.5700%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 47: Average loss: 1.3087, Accuracy: 6452/8991 (71.7606%)
Done in 58.92956757545471 sec.
Server Epoch:48 choose agents : [74, 27, 75, 19, 58, 83, 91, 96, 17, 57].
___Train Local_Simple,  epoch  48, local model 74, internal_epoch   1,  Average loss: 0.0178, Accuracy: 560/762 (73.4908%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 2.7098, Accuracy: 3278/10000 (32.7800%), Attack Success Rate:3/10000(0.030)
poison local model 27 index 26 
poison_now
___PoisonTrain Local_Simple ,  epoch  48, local model 27, internal_epoch   1,  Average loss: 0.0116, Accuracy: 600/678 (88.4956%), train_poison_data_count: 678
Global model norm: 2.154751021657034.
Norm before scaling: 2.4598662451690974. Distance: 1.0230776321547672
Total norm for 3 adversaries is: 2.4598662451690974. distance: 1.0230776321547672
___Test Local_Simple poisoned: True, epoch: 48: Average loss: 3.5937, Accuracy: 1017/8991 (11.3113%)
___Train Local_Simple,  epoch  48, local model 75, internal_epoch   1,  Average loss: 0.0087, Accuracy: 478/497 (96.1771%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 3.7377, Accuracy: 1274/10000 (12.7400%), Attack Success Rate:14/10000(0.140)
poison local model 19 index 18 
poison_now
___PoisonTrain Local_Simple ,  epoch  48, local model 19, internal_epoch   1,  Average loss: 0.0247, Accuracy: 178/244 (72.9508%), train_poison_data_count: 244
Global model norm: 2.154751021657034.
Norm before scaling: 2.2212998688036736. Distance: 0.44473972627761293
Total norm for 3 adversaries is: 2.2212998688036736. distance: 0.44473972627761293
___Test Local_Simple poisoned: True, epoch: 48: Average loss: 1.6308, Accuracy: 2838/8991 (31.5649%)
___Train Local_Simple,  epoch  48, local model 58, internal_epoch   1,  Average loss: 0.0154, Accuracy: 833/1015 (82.0690%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 2.8220, Accuracy: 2712/10000 (27.1200%), Attack Success Rate:12/10000(0.120)
___Train Local_Simple,  epoch  48, local model 83, internal_epoch   1,  Average loss: 0.0145, Accuracy: 641/750 (85.4667%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 2.6551, Accuracy: 2125/10000 (21.2500%), Attack Success Rate:21/10000(0.210)
___Train Local_Simple,  epoch  48, local model 91, internal_epoch   1,  Average loss: 0.0247, Accuracy: 157/182 (86.2637%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 1.5222, Accuracy: 5232/10000 (52.3200%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  48, local model 96, internal_epoch   1,  Average loss: 0.0185, Accuracy: 402/505 (79.6040%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 2.1072, Accuracy: 3417/10000 (34.1700%), Attack Success Rate:1/10000(0.010)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  48, local model 17, internal_epoch   1,  Average loss: 0.0205, Accuracy: 87/94 (92.5532%), train_poison_data_count: 94
Global model norm: 2.154751021657034.
Norm before scaling: 2.1678041137867443. Distance: 0.09535920374662875
Total norm for 3 adversaries is: 2.1678041137867443. distance: 0.09535920374662875
___Test Local_Simple poisoned: True, epoch: 48: Average loss: 1.3530, Accuracy: 5145/8991 (57.2239%)
___Train Local_Simple,  epoch  48, local model 57, internal_epoch   1,  Average loss: 0.0112, Accuracy: 1255/1437 (87.3347%)
___Test Local_Simple poisoned: False, epoch: 48: Average loss: 3.6547, Accuracy: 2826/10000 (28.2600%), Attack Success Rate:8/10000(0.080)
time spent on training: 22.37970542907715
[foolsgold agg] training data poison_ratio: 0.16482803374432187  data num: [762, 678, 497, 244, 1015, 750, 182, 505, 94, 1437]
[foolsgold agg] considering poison per batch poison_fraction: 0.16482803374432187
[foolsgold agg] wv: [1.         0.58312266 0.         1.         0.58312266 1.
 0.59737928 1.         0.         1.        ]
___Test Target_Simple poisoned: False, epoch: 48: Average loss: 1.3910, Accuracy: 6818/10000 (68.1800%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 48: Average loss: 1.2826, Accuracy: 6811/8991 (75.7535%)
Done in 60.22660040855408 sec.
Server Epoch:49 choose agents : [77, 10, 78, 72, 91, 13, 98, 21, 82, 74].
___Train Local_Simple,  epoch  49, local model 77, internal_epoch   1,  Average loss: 0.0107, Accuracy: 1331/1544 (86.2047%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 2.6992, Accuracy: 3499/10000 (34.9900%), Attack Success Rate:0/10000(0.000)
poison local model 10 index 9 
poison_now
___PoisonTrain Local_Simple ,  epoch  49, local model 10, internal_epoch   1,  Average loss: 0.0135, Accuracy: 600/688 (87.2093%), train_poison_data_count: 688
Global model norm: 2.167934877973007.
Norm before scaling: 2.528195645886005. Distance: 1.0413309446381522
Total norm for 3 adversaries is: 2.528195645886005. distance: 1.0413309446381522
___Test Local_Simple poisoned: True, epoch: 49: Average loss: 3.1247, Accuracy: 2039/8991 (22.6782%)
___Train Local_Simple,  epoch  49, local model 78, internal_epoch   1,  Average loss: 0.0103, Accuracy: 2047/2324 (88.0809%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 2.4183, Accuracy: 4088/10000 (40.8800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  49, local model 72, internal_epoch   1,  Average loss: 0.1177, Accuracy: 8/10 (80.0000%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 1.3889, Accuracy: 6741/10000 (67.4100%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  49, local model 91, internal_epoch   1,  Average loss: 0.0232, Accuracy: 161/182 (88.4615%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 1.4990, Accuracy: 5275/10000 (52.7500%), Attack Success Rate:0/10000(0.000)
poison local model 13 index 12 
poison_now
___PoisonTrain Local_Simple ,  epoch  49, local model 13, internal_epoch   1,  Average loss: 0.3496, Accuracy: 2/5 (40.0000%), train_poison_data_count: 5
Global model norm: 2.167934877973007.
Norm before scaling: 2.1699367079755745. Distance: 0.04274889800545129
Total norm for 3 adversaries is: 2.1699367079755745. distance: 0.04274889800545129
___Test Local_Simple poisoned: True, epoch: 49: Average loss: 1.2747, Accuracy: 7053/8991 (78.4451%)
___Train Local_Simple,  epoch  49, local model 98, internal_epoch   1,  Average loss: 0.1380, Accuracy: 6/6 (100.0000%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 1.3919, Accuracy: 6642/10000 (66.4200%), Attack Success Rate:0/10000(0.000)
poison local model 21 index 20 
poison_now
___PoisonTrain Local_Simple ,  epoch  49, local model 21, internal_epoch   1,  Average loss: 0.0067, Accuracy: 1919/2072 (92.6158%), train_poison_data_count: 2072
Global model norm: 2.167934877973007.
Norm before scaling: 2.9247885472739132. Distance: 1.690101172900573
Total norm for 3 adversaries is: 2.9247885472739132. distance: 1.690101172900573
___Test Local_Simple poisoned: True, epoch: 49: Average loss: 3.5938, Accuracy: 2721/8991 (30.2636%)
___Train Local_Simple,  epoch  49, local model 82, internal_epoch   1,  Average loss: 0.0333, Accuracy: 83/114 (72.8070%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 1.4082, Accuracy: 6414/10000 (64.1400%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  49, local model 74, internal_epoch   1,  Average loss: 0.0172, Accuracy: 560/762 (73.4908%)
___Test Local_Simple poisoned: False, epoch: 49: Average loss: 2.6848, Accuracy: 3261/10000 (32.6100%), Attack Success Rate:1/10000(0.010)
time spent on training: 22.43164372444153
[foolsgold agg] training data poison_ratio: 0.35876475930971846  data num: [1544, 688, 2324, 10, 182, 5, 6, 2072, 114, 762]
[foolsgold agg] considering poison per batch poison_fraction: 0.3587647593097184
[foolsgold agg] wv: [0.18361062 1.         0.6800541  0.         1.         1.
 0.         0.         0.         0.18361062]
___Test Target_Simple poisoned: False, epoch: 49: Average loss: 1.3820, Accuracy: 6803/10000 (68.0300%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 49: Average loss: 1.2746, Accuracy: 6792/8991 (75.5422%)
Done in 60.32661581039429 sec.
Server Epoch:50 choose agents : [75, 86, 51, 0, 31, 32, 67, 17, 29, 7].
___Train Local_Simple,  epoch  50, local model 75, internal_epoch   1,  Average loss: 0.0090, Accuracy: 474/497 (95.3722%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 3.6840, Accuracy: 1325/10000 (13.2500%), Attack Success Rate:26/10000(0.260)
___Train Local_Simple,  epoch  50, local model 86, internal_epoch   1,  Average loss: 0.0404, Accuracy: 25/34 (73.5294%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 1.3843, Accuracy: 6737/10000 (67.3700%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  50, local model 51, internal_epoch   1,  Average loss: 0.0132, Accuracy: 235/259 (90.7336%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 1.6518, Accuracy: 4248/10000 (42.4800%), Attack Success Rate:0/10000(0.000)
___Train Local_Simple,  epoch  50, local model 0, internal_epoch   1,  Average loss: 0.0150, Accuracy: 282/300 (94.0000%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 1.6277, Accuracy: 3977/10000 (39.7700%), Attack Success Rate:0/10000(0.000)
poison local model 31 index 30 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 31, internal_epoch   1,  Average loss: 0.0103, Accuracy: 1599/1839 (86.9494%), train_poison_data_count: 1839
Global model norm: 2.1760170498909277.
Norm before scaling: 2.9391028718340473. Distance: 1.6151703864526366
Total norm for 5 adversaries is: 2.9391028718340473. distance: 1.6151703864526366
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 2.8905, Accuracy: 2815/8991 (31.3091%)
poison local model 32 index 31 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 32, internal_epoch   1,  Average loss: 0.0416, Accuracy: 26/28 (92.8571%), train_poison_data_count: 28
Global model norm: 2.1760170498909277.
Norm before scaling: 2.180404709162899. Distance: 0.04596548813641893
Total norm for 5 adversaries is: 2.180404709162899. distance: 0.04596548813641893
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 1.2832, Accuracy: 6388/8991 (71.0488%)
___Train Local_Simple,  epoch  50, local model 67, internal_epoch   1,  Average loss: 0.0218, Accuracy: 401/568 (70.5986%)
___Test Local_Simple poisoned: False, epoch: 50: Average loss: 2.7387, Accuracy: 2512/10000 (25.1200%), Attack Success Rate:15/10000(0.150)
poison local model 17 index 16 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 17, internal_epoch   1,  Average loss: 0.0208, Accuracy: 87/94 (92.5532%), train_poison_data_count: 94
Global model norm: 2.1760170498909277.
Norm before scaling: 2.188896060690881. Distance: 0.09971626007380907
Total norm for 5 adversaries is: 2.188896060690881. distance: 0.09971626007380907
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 1.3153, Accuracy: 5617/8991 (62.4736%)
poison local model 29 index 28 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 29, internal_epoch   1,  Average loss: 0.0091, Accuracy: 1098/1232 (89.1234%), train_poison_data_count: 1232
Global model norm: 2.1760170498909277.
Norm before scaling: 2.515775972183934. Distance: 0.908888396280736
Total norm for 5 adversaries is: 2.515775972183934. distance: 0.908888396280736
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 2.5239, Accuracy: 1842/8991 (20.4872%)
poison local model 7 index 6 
poison_now
___PoisonTrain Local_Simple ,  epoch  50, local model 7, internal_epoch   1,  Average loss: 0.0269, Accuracy: 77/86 (89.5349%), train_poison_data_count: 86
Global model norm: 2.1760170498909277.
Norm before scaling: 2.188200593202115. Distance: 0.10999994890255174
Total norm for 5 adversaries is: 2.188200593202115. distance: 0.10999994890255174
___Test Local_Simple poisoned: True, epoch: 50: Average loss: 1.2895, Accuracy: 6214/8991 (69.1136%)
time spent on training: 20.285515785217285
[foolsgold agg] training data poison_ratio: 0.6641685233947742  data num: [497, 34, 259, 300, 1839, 28, 568, 94, 1232, 86]
[foolsgold agg] considering poison per batch poison_fraction: 0.6641685233947742
[foolsgold agg] wv: [0. 1. 1. 1. 1. 0. 1. 0. 1. 1.]
___Test Target_Simple poisoned: False, epoch: 50: Average loss: 1.3701, Accuracy: 6764/10000 (67.6400%), Attack Success Rate:0/10000(0.000)
___Test Target_Simple poisoned: True, epoch: 50: Average loss: 1.2633, Accuracy: 6758/8991 (75.1641%)
Done in 58.180659770965576 sec.
Saving all the graphs.
This run has a label: Mar.27_10.25.18. Visdom environment: mnist_DBA
